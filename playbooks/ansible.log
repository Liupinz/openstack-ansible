2018-04-26 19:04:35,495 p=31792 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:04:35,591 p=31792 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:04:35,591 p=31792 u=root |  Thursday 26 April 2018  19:04:35 +0800 (0:00:00.102)       0:00:00.102 ******** 
2018-04-26 19:04:35,592 p=31792 u=root |  =============================================================================== 
2018-04-26 19:05:05,947 p=31817 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:05:06,095 p=31817 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:05:06,096 p=31817 u=root |  Thursday 26 April 2018  19:05:06 +0800 (0:00:00.157)       0:00:00.157 ******** 
2018-04-26 19:05:06,096 p=31817 u=root |  =============================================================================== 
2018-04-26 19:07:23,006 p=31893 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:07:23,060 p=31893 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-26 19:07:23,060 p=31893 u=root |  Thursday 26 April 2018  19:07:23 +0800 (0:00:00.059)       0:00:00.059 ******** 
2018-04-26 19:07:33,901 p=31893 u=root |  changed: [controller]
2018-04-26 19:07:33,908 p=31893 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-26 19:07:33,909 p=31893 u=root |  Thursday 26 April 2018  19:07:33 +0800 (0:00:10.848)       0:00:10.908 ******** 
2018-04-26 19:07:34,735 p=31893 u=root |  changed: [controller] => (item=localhost)
2018-04-26 19:07:35,108 p=31893 u=root |  changed: [controller] => (item=%)
2018-04-26 19:07:35,114 p=31893 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-26 19:07:35,115 p=31893 u=root |  Thursday 26 April 2018  19:07:35 +0800 (0:00:01.205)       0:00:12.114 ******** 
2018-04-26 19:07:36,565 p=31893 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-26 19:07:36,571 p=31893 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-26 19:07:36,572 p=31893 u=root |  Thursday 26 April 2018  19:07:36 +0800 (0:00:01.456)       0:00:13.571 ******** 
2018-04-26 19:07:37,288 p=31893 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-26 19:07:37,611 p=31893 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-26 19:07:37,615 p=31893 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-26 19:07:37,616 p=31893 u=root |  Thursday 26 April 2018  19:07:37 +0800 (0:00:01.044)       0:00:14.615 ******** 
2018-04-26 19:07:40,549 p=31893 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "su -s /bin/sh -c \"keystone-manage db_sync\" keystone", "delta": "0:00:02.286669", "end": "2018-04-26 19:08:03.298739", "failed": true, "rc": 1, "start": "2018-04-26 19:08:01.012070", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-26 19:07:40,556 p=31893 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-26 19:07:40,557 p=31893 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:07:40,557 p=31893 u=root |  controller                 : ok=4    changed=3    unreachable=0    failed=1   
2018-04-26 19:07:40,558 p=31893 u=root |  Thursday 26 April 2018  19:07:40 +0800 (0:00:02.942)       0:00:17.557 ******** 
2018-04-26 19:07:40,559 p=31893 u=root |  =============================================================================== 
2018-04-26 19:07:40,560 p=31893 u=root |  Identity : create keystone database ------------------------------------ 10.85s
2018-04-26 19:07:40,560 p=31893 u=root |  Identity : populate the identity service -------------------------------- 2.94s
2018-04-26 19:07:40,560 p=31893 u=root |  Identity : Install packages --------------------------------------------- 1.46s
2018-04-26 19:07:40,561 p=31893 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.21s
2018-04-26 19:07:40,561 p=31893 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.04s
2018-04-26 19:09:23,949 p=31990 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:09:24,003 p=31990 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-26 19:09:24,003 p=31990 u=root |  Thursday 26 April 2018  19:09:24 +0800 (0:00:00.059)       0:00:00.059 ******** 
2018-04-26 19:09:34,776 p=31990 u=root |  ok: [controller]
2018-04-26 19:09:34,782 p=31990 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-26 19:09:34,782 p=31990 u=root |  Thursday 26 April 2018  19:09:34 +0800 (0:00:10.778)       0:00:10.838 ******** 
2018-04-26 19:09:35,575 p=31990 u=root |  ok: [controller] => (item=localhost)
2018-04-26 19:09:35,941 p=31990 u=root |  ok: [controller] => (item=%)
2018-04-26 19:09:35,947 p=31990 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-26 19:09:35,948 p=31990 u=root |  Thursday 26 April 2018  19:09:35 +0800 (0:00:01.164)       0:00:12.003 ******** 
2018-04-26 19:09:37,345 p=31990 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-26 19:09:37,355 p=31990 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-26 19:09:37,356 p=31990 u=root |  Thursday 26 April 2018  19:09:37 +0800 (0:00:01.407)       0:00:13.411 ******** 
2018-04-26 19:09:38,144 p=31990 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-26 19:09:38,465 p=31990 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-26 19:09:38,471 p=31990 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-26 19:09:38,472 p=31990 u=root |  Thursday 26 April 2018  19:09:38 +0800 (0:00:01.116)       0:00:14.528 ******** 
2018-04-26 19:09:40,814 p=31990 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "su -s /bin/sh -c \"keystone-manage db_sync\" keystone", "delta": "0:00:01.715961", "end": "2018-04-26 19:10:03.576644", "failed": true, "rc": 1, "start": "2018-04-26 19:10:01.860683", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-26 19:09:40,820 p=31990 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-26 19:09:40,821 p=31990 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:09:40,822 p=31990 u=root |  controller                 : ok=4    changed=1    unreachable=0    failed=1   
2018-04-26 19:09:40,822 p=31990 u=root |  Thursday 26 April 2018  19:09:40 +0800 (0:00:02.350)       0:00:16.878 ******** 
2018-04-26 19:09:40,823 p=31990 u=root |  =============================================================================== 
2018-04-26 19:09:40,823 p=31990 u=root |  Identity : create keystone database ------------------------------------ 10.78s
2018-04-26 19:09:40,824 p=31990 u=root |  Identity : populate the identity service -------------------------------- 2.35s
2018-04-26 19:09:40,825 p=31990 u=root |  Identity : Install packages --------------------------------------------- 1.41s
2018-04-26 19:09:40,825 p=31990 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.17s
2018-04-26 19:09:40,826 p=31990 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.12s
2018-04-26 19:22:45,465 p=32093 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:22:45,518 p=32093 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-26 19:22:45,518 p=32093 u=root |  Thursday 26 April 2018  19:22:45 +0800 (0:00:00.058)       0:00:00.059 ******** 
2018-04-26 19:22:56,227 p=32093 u=root |  ok: [controller]
2018-04-26 19:22:56,231 p=32093 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-26 19:22:56,232 p=32093 u=root |  Thursday 26 April 2018  19:22:56 +0800 (0:00:10.713)       0:00:10.772 ******** 
2018-04-26 19:22:57,086 p=32093 u=root |  ok: [controller] => (item=localhost)
2018-04-26 19:22:57,473 p=32093 u=root |  ok: [controller] => (item=%)
2018-04-26 19:22:57,477 p=32093 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-26 19:22:57,478 p=32093 u=root |  Thursday 26 April 2018  19:22:57 +0800 (0:00:01.246)       0:00:12.018 ******** 
2018-04-26 19:22:58,935 p=32093 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-26 19:22:58,941 p=32093 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-26 19:22:58,941 p=32093 u=root |  Thursday 26 April 2018  19:22:58 +0800 (0:00:01.463)       0:00:13.482 ******** 
2018-04-26 19:22:59,787 p=32093 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-26 19:23:00,161 p=32093 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-26 19:23:00,165 p=32093 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-26 19:23:00,166 p=32093 u=root |  Thursday 26 April 2018  19:23:00 +0800 (0:00:01.224)       0:00:14.706 ******** 
2018-04-26 19:23:02,318 p=32093 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["su", "-s", "/bin/sh", "-c", "keystone-manage db_sync", "keystone"], "delta": "0:00:01.477395", "end": "2018-04-26 19:23:25.098101", "failed": true, "rc": 1, "start": "2018-04-26 19:23:23.620706", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-26 19:23:02,323 p=32093 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-26 19:23:02,323 p=32093 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:23:02,323 p=32093 u=root |  controller                 : ok=4    changed=1    unreachable=0    failed=1   
2018-04-26 19:23:02,324 p=32093 u=root |  Thursday 26 April 2018  19:23:02 +0800 (0:00:02.158)       0:00:16.864 ******** 
2018-04-26 19:23:02,324 p=32093 u=root |  =============================================================================== 
2018-04-26 19:23:02,325 p=32093 u=root |  Identity : create keystone database ------------------------------------ 10.71s
2018-04-26 19:23:02,325 p=32093 u=root |  Identity : populate the identity service -------------------------------- 2.16s
2018-04-26 19:23:02,325 p=32093 u=root |  Identity : Install packages --------------------------------------------- 1.46s
2018-04-26 19:23:02,326 p=32093 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.25s
2018-04-26 19:23:02,326 p=32093 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.22s
2018-04-26 19:33:39,008 p=32185 u=root |  PLAY [install openstack] *******************************************************
2018-04-26 19:33:39,061 p=32185 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-26 19:33:39,062 p=32185 u=root |  Thursday 26 April 2018  19:33:39 +0800 (0:00:00.059)       0:00:00.059 ******** 
2018-04-26 19:33:49,760 p=32185 u=root |  ok: [controller]
2018-04-26 19:33:49,764 p=32185 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-26 19:33:49,764 p=32185 u=root |  Thursday 26 April 2018  19:33:49 +0800 (0:00:10.702)       0:00:10.762 ******** 
2018-04-26 19:33:50,541 p=32185 u=root |  ok: [controller] => (item=localhost)
2018-04-26 19:33:50,903 p=32185 u=root |  ok: [controller] => (item=%)
2018-04-26 19:33:50,907 p=32185 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-26 19:33:50,908 p=32185 u=root |  Thursday 26 April 2018  19:33:50 +0800 (0:00:01.143)       0:00:11.905 ******** 
2018-04-26 19:33:52,228 p=32185 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-26 19:33:52,233 p=32185 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-26 19:33:52,233 p=32185 u=root |  Thursday 26 April 2018  19:33:52 +0800 (0:00:01.324)       0:00:13.230 ******** 
2018-04-26 19:33:52,947 p=32185 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-26 19:33:53,276 p=32185 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-26 19:33:53,280 p=32185 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-26 19:33:53,280 p=32185 u=root |  Thursday 26 April 2018  19:33:53 +0800 (0:00:01.047)       0:00:14.278 ******** 
2018-04-26 19:33:55,389 p=32185 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["su", "-s", "/bin/sh", "-c", "keystone-manage db_sync", "keystone"], "delta": "0:00:01.429435", "end": "2018-04-26 19:34:18.133714", "failed": true, "failed_when_result": true, "rc": 1, "start": "2018-04-26 19:34:16.704279", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-26 19:33:55,394 p=32185 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-26 19:33:55,394 p=32185 u=root |  PLAY RECAP *********************************************************************
2018-04-26 19:33:55,395 p=32185 u=root |  controller                 : ok=4    changed=1    unreachable=0    failed=1   
2018-04-26 19:33:55,395 p=32185 u=root |  Thursday 26 April 2018  19:33:55 +0800 (0:00:02.114)       0:00:16.392 ******** 
2018-04-26 19:33:55,395 p=32185 u=root |  =============================================================================== 
2018-04-26 19:33:55,396 p=32185 u=root |  Identity : create keystone database ------------------------------------ 10.70s
2018-04-26 19:33:55,396 p=32185 u=root |  Identity : populate the identity service -------------------------------- 2.11s
2018-04-26 19:33:55,397 p=32185 u=root |  Identity : Install packages --------------------------------------------- 1.32s
2018-04-26 19:33:55,397 p=32185 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.14s
2018-04-26 19:33:55,397 p=32185 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.05s
2018-04-27 09:09:33,744 p=32557 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 09:09:33,799 p=32557 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-27 09:09:33,800 p=32557 u=root |  Friday 27 April 2018  09:09:33 +0800 (0:00:00.061)       0:00:00.061 ********** 
2018-04-27 09:09:44,511 p=32557 u=root |  ok: [controller]
2018-04-27 09:09:44,516 p=32557 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-27 09:09:44,516 p=32557 u=root |  Friday 27 April 2018  09:09:44 +0800 (0:00:10.716)       0:00:10.777 ********** 
2018-04-27 09:09:45,318 p=32557 u=root |  ok: [controller] => (item=localhost)
2018-04-27 09:09:45,690 p=32557 u=root |  ok: [controller] => (item=%)
2018-04-27 09:09:45,697 p=32557 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-27 09:09:45,697 p=32557 u=root |  Friday 27 April 2018  09:09:45 +0800 (0:00:01.180)       0:00:11.958 ********** 
2018-04-27 09:09:47,126 p=32557 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-27 09:09:47,131 p=32557 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-27 09:09:47,132 p=32557 u=root |  Friday 27 April 2018  09:09:47 +0800 (0:00:01.434)       0:00:13.393 ********** 
2018-04-27 09:09:47,831 p=32557 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-27 09:09:48,204 p=32557 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-27 09:09:48,210 p=32557 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 09:09:48,211 p=32557 u=root |  Friday 27 April 2018  09:09:48 +0800 (0:00:01.078)       0:00:14.471 ********** 
2018-04-27 09:09:50,688 p=32557 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["su", "-s", "/bin/sh", "-c", "keystone-manage db_sync", "keystone"], "delta": "0:00:01.735279", "end": "2018-04-27 09:10:14.391421", "failed": true, "failed_when_result": true, "rc": 1, "start": "2018-04-27 09:10:12.656142", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-27 09:09:50,693 p=32557 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 09:09:50,694 p=32557 u=root |  PLAY RECAP *********************************************************************
2018-04-27 09:09:50,694 p=32557 u=root |  controller                 : ok=4    changed=1    unreachable=0    failed=1   
2018-04-27 09:09:50,695 p=32557 u=root |  Friday 27 April 2018  09:09:50 +0800 (0:00:02.484)       0:00:16.956 ********** 
2018-04-27 09:09:50,695 p=32557 u=root |  =============================================================================== 
2018-04-27 09:09:50,696 p=32557 u=root |  Identity : create keystone database ------------------------------------ 10.72s
2018-04-27 09:09:50,696 p=32557 u=root |  Identity : populate the identity service -------------------------------- 2.48s
2018-04-27 09:09:50,696 p=32557 u=root |  Identity : Install packages --------------------------------------------- 1.43s
2018-04-27 09:09:50,696 p=32557 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.18s
2018-04-27 09:09:50,697 p=32557 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.08s
2018-04-27 16:45:51,085 p=776 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 16:45:51,139 p=776 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-27 16:45:51,139 p=776 u=root |  Friday 27 April 2018  16:45:51 +0800 (0:00:00.059)       0:00:00.059 ********** 
2018-04-27 16:46:01,780 p=776 u=root |  ok: [controller]
2018-04-27 16:46:01,784 p=776 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-27 16:46:01,784 p=776 u=root |  Friday 27 April 2018  16:46:01 +0800 (0:00:10.644)       0:00:10.704 ********** 
2018-04-27 16:46:02,703 p=776 u=root |  ok: [controller] => (item=localhost)
2018-04-27 16:46:03,049 p=776 u=root |  ok: [controller] => (item=%)
2018-04-27 16:46:03,053 p=776 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-27 16:46:03,054 p=776 u=root |  Friday 27 April 2018  16:46:03 +0800 (0:00:01.269)       0:00:11.973 ********** 
2018-04-27 16:46:04,478 p=776 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-27 16:46:04,485 p=776 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-27 16:46:04,486 p=776 u=root |  Friday 27 April 2018  16:46:04 +0800 (0:00:01.431)       0:00:13.405 ********** 
2018-04-27 16:46:05,186 p=776 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-27 16:46:05,511 p=776 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-27 16:46:05,516 p=776 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 16:46:05,518 p=776 u=root |  Friday 27 April 2018  16:46:05 +0800 (0:00:01.031)       0:00:14.437 ********** 
2018-04-27 16:46:08,042 p=776 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["su", "-s", "/bin/sh", "-c", "keystone-manage db_sync", "keystone"], "delta": "0:00:01.836894", "end": "2018-04-27 16:46:32.283477", "failed": true, "failed_when_result": true, "rc": 1, "start": "2018-04-27 16:46:30.446583", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-27 16:46:08,045 p=776 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 16:46:08,045 p=776 u=root |  PLAY RECAP *********************************************************************
2018-04-27 16:46:08,046 p=776 u=root |  controller                 : ok=4    changed=1    unreachable=0    failed=1   
2018-04-27 16:46:08,046 p=776 u=root |  Friday 27 April 2018  16:46:08 +0800 (0:00:02.528)       0:00:16.966 ********** 
2018-04-27 16:46:08,046 p=776 u=root |  =============================================================================== 
2018-04-27 16:46:08,047 p=776 u=root |  Identity : create keystone database ------------------------------------ 10.65s
2018-04-27 16:46:08,047 p=776 u=root |  Identity : populate the identity service -------------------------------- 2.53s
2018-04-27 16:46:08,047 p=776 u=root |  Identity : Install packages --------------------------------------------- 1.43s
2018-04-27 16:46:08,048 p=776 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.27s
2018-04-27 16:46:08,048 p=776 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.03s
2018-04-27 17:32:35,690 p=1011 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:32:35,762 p=1011 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-27 17:32:35,762 p=1011 u=root |  Friday 27 April 2018  17:32:35 +0800 (0:00:00.076)       0:00:00.076 ********** 
2018-04-27 17:32:54,218 p=1011 u=root |  fatal: [controller]: UNREACHABLE! => {"changed": false, "msg": "SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh", "unreachable": true}
2018-04-27 17:32:54,228 p=1011 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:32:54,229 p=1011 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:32:54,229 p=1011 u=root |  controller                 : ok=0    changed=0    unreachable=1    failed=0   
2018-04-27 17:32:54,230 p=1011 u=root |  Friday 27 April 2018  17:32:54 +0800 (0:00:18.467)       0:00:18.543 ********** 
2018-04-27 17:32:54,230 p=1011 u=root |  =============================================================================== 
2018-04-27 17:32:54,230 p=1011 u=root |  Environment : set hostname --------------------------------------------- 18.47s
2018-04-27 17:33:21,091 p=1065 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:33:21,157 p=1065 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-27 17:33:21,158 p=1065 u=root |  Friday 27 April 2018  17:33:21 +0800 (0:00:00.070)       0:00:00.070 ********** 
2018-04-27 17:33:24,947 p=1065 u=root |  fatal: [controller]: UNREACHABLE! => {"changed": false, "msg": "SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh", "unreachable": true}
2018-04-27 17:33:24,951 p=1065 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:33:24,951 p=1065 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:33:24,952 p=1065 u=root |  controller                 : ok=0    changed=0    unreachable=1    failed=0   
2018-04-27 17:33:24,952 p=1065 u=root |  Friday 27 April 2018  17:33:24 +0800 (0:00:03.794)       0:00:03.864 ********** 
2018-04-27 17:33:24,952 p=1065 u=root |  =============================================================================== 
2018-04-27 17:33:24,953 p=1065 u=root |  Environment : set hostname ---------------------------------------------- 3.79s
2018-04-27 17:35:25,546 p=1155 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:35:25,693 p=1155 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-27 17:35:25,694 p=1155 u=root |  Friday 27 April 2018  17:35:25 +0800 (0:00:00.156)       0:00:00.156 ********** 
2018-04-27 17:35:29,358 p=1155 u=root |  fatal: [controller]: UNREACHABLE! => {"changed": false, "msg": "SSH Error: data could not be sent to the remote host. Make sure this host can be reached over ssh", "unreachable": true}
2018-04-27 17:35:29,362 p=1155 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:35:29,363 p=1155 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:35:29,363 p=1155 u=root |  controller                 : ok=0    changed=0    unreachable=1    failed=0   
2018-04-27 17:35:29,364 p=1155 u=root |  Friday 27 April 2018  17:35:29 +0800 (0:00:03.669)       0:00:03.826 ********** 
2018-04-27 17:35:29,364 p=1155 u=root |  =============================================================================== 
2018-04-27 17:35:29,365 p=1155 u=root |  Environment : set hostname ---------------------------------------------- 3.67s
2018-04-27 17:36:05,843 p=1227 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:36:05,936 p=1227 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-27 17:36:05,937 p=1227 u=root |  Friday 27 April 2018  17:36:05 +0800 (0:00:00.100)       0:00:00.100 ********** 
2018-04-27 17:36:17,136 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:17,140 p=1227 u=root |  TASK [Environment : add host file] *********************************************
2018-04-27 17:36:17,141 p=1227 u=root |  Friday 27 April 2018  17:36:17 +0800 (0:00:11.203)       0:00:11.304 ********** 
2018-04-27 17:36:17,861 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:17,865 p=1227 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-27 17:36:17,866 p=1227 u=root |  Friday 27 April 2018  17:36:17 +0800 (0:00:00.725)       0:00:12.029 ********** 
2018-04-27 17:36:34,747 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:34,755 p=1227 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-27 17:36:34,756 p=1227 u=root |  Friday 27 April 2018  17:36:34 +0800 (0:00:16.889)       0:00:28.919 ********** 
2018-04-27 17:36:35,228 p=1227 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 17:36:35,521 p=1227 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 17:36:35,870 p=1227 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 17:36:36,190 p=1227 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 17:36:36,197 p=1227 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-27 17:36:36,198 p=1227 u=root |  Friday 27 April 2018  17:36:36 +0800 (0:00:01.441)       0:00:30.361 ********** 
2018-04-27 17:36:36,612 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:36,617 p=1227 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-27 17:36:36,618 p=1227 u=root |  Friday 27 April 2018  17:36:36 +0800 (0:00:00.419)       0:00:30.781 ********** 
2018-04-27 17:36:38,437 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:38,442 p=1227 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-27 17:36:38,443 p=1227 u=root |  Friday 27 April 2018  17:36:38 +0800 (0:00:01.824)       0:00:32.606 ********** 
2018-04-27 17:36:42,199 p=1227 u=root |  changed: [controller]
2018-04-27 17:36:42,203 p=1227 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-27 17:36:42,203 p=1227 u=root |  Friday 27 April 2018  17:36:42 +0800 (0:00:03.760)       0:00:36.367 ********** 
2018-04-27 17:42:07,840 p=1227 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-27 17:42:07,847 p=1227 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-27 17:42:07,847 p=1227 u=root |  Friday 27 April 2018  17:42:07 +0800 (0:05:25.643)       0:06:02.011 ********** 
2018-04-27 17:42:55,698 p=1227 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-27 17:42:55,708 p=1227 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-27 17:42:55,708 p=1227 u=root |  Friday 27 April 2018  17:42:55 +0800 (0:00:47.860)       0:06:49.872 ********** 
2018-04-27 17:42:57,243 p=1227 u=root |  changed: [controller]
2018-04-27 17:42:57,248 p=1227 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-04-27 17:42:57,248 p=1227 u=root |  Friday 27 April 2018  17:42:57 +0800 (0:00:01.539)       0:06:51.412 ********** 
2018-04-27 17:43:10,373 p=1227 u=root |  changed: [controller]
2018-04-27 17:43:10,377 p=1227 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-04-27 17:43:10,378 p=1227 u=root |  Friday 27 April 2018  17:43:10 +0800 (0:00:13.129)       0:07:04.541 ********** 
2018-04-27 17:43:40,805 p=1227 u=root |  changed: [controller]
2018-04-27 17:43:40,812 p=1227 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-04-27 17:43:40,813 p=1227 u=root |  Friday 27 April 2018  17:43:40 +0800 (0:00:30.434)       0:07:34.976 ********** 
2018-04-27 17:43:46,785 p=1227 u=root |  changed: [controller]
2018-04-27 17:43:46,790 p=1227 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-27 17:43:46,790 p=1227 u=root |  Friday 27 April 2018  17:43:46 +0800 (0:00:05.977)       0:07:40.954 ********** 
2018-04-27 17:43:52,511 p=1227 u=root |  changed: [controller]
2018-04-27 17:43:52,518 p=1227 u=root |  TASK [Environment : install Memcached] *****************************************
2018-04-27 17:43:52,519 p=1227 u=root |  Friday 27 April 2018  17:43:52 +0800 (0:00:05.728)       0:07:46.682 ********** 
2018-04-27 17:44:02,424 p=1227 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-04-27 17:44:02,428 p=1227 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-04-27 17:44:02,429 p=1227 u=root |  Friday 27 April 2018  17:44:02 +0800 (0:00:09.909)       0:07:56.592 ********** 
2018-04-27 17:44:02,818 p=1227 u=root |  changed: [controller]
2018-04-27 17:44:02,822 p=1227 u=root |  TASK [Environment : restart memcached] *****************************************
2018-04-27 17:44:02,823 p=1227 u=root |  Friday 27 April 2018  17:44:02 +0800 (0:00:00.394)       0:07:56.986 ********** 
2018-04-27 17:44:03,798 p=1227 u=root |  changed: [controller]
2018-04-27 17:44:03,803 p=1227 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-27 17:44:03,803 p=1227 u=root |  Friday 27 April 2018  17:44:03 +0800 (0:00:00.980)       0:07:57.967 ********** 
2018-04-27 17:44:04,502 p=1227 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "the python mysqldb module is required"}
2018-04-27 17:44:04,506 p=1227 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:44:04,506 p=1227 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:44:04,507 p=1227 u=root |  controller                 : ok=17   changed=17   unreachable=0    failed=1   
2018-04-27 17:44:04,507 p=1227 u=root |  Friday 27 April 2018  17:44:04 +0800 (0:00:00.703)       0:07:58.671 ********** 
2018-04-27 17:44:04,508 p=1227 u=root |  =============================================================================== 
2018-04-27 17:44:04,508 p=1227 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 325.64s
2018-04-27 17:44:04,508 p=1227 u=root |  Environment : install sql ---------------------------------------------- 47.86s
2018-04-27 17:44:04,509 p=1227 u=root |  Environment : install rabbitmq ----------------------------------------- 30.43s
2018-04-27 17:44:04,509 p=1227 u=root |  Environment : install chrony ------------------------------------------- 16.89s
2018-04-27 17:44:04,509 p=1227 u=root |  Environment : restart mariadb ------------------------------------------ 13.13s
2018-04-27 17:44:04,510 p=1227 u=root |  Environment : set hostname --------------------------------------------- 11.20s
2018-04-27 17:44:04,510 p=1227 u=root |  Environment : install Memcached ----------------------------------------- 9.91s
2018-04-27 17:44:04,510 p=1227 u=root |  Environment : start rabbitmq-server ------------------------------------- 5.98s
2018-04-27 17:44:04,510 p=1227 u=root |  Environment : useradd openstack ----------------------------------------- 5.73s
2018-04-27 17:44:04,511 p=1227 u=root |  Environment : install centos-release-openstack-newton ------------------- 3.76s
2018-04-27 17:44:04,511 p=1227 u=root |  Environment : restart NTP ----------------------------------------------- 1.82s
2018-04-27 17:44:04,511 p=1227 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.54s
2018-04-27 17:44:04,512 p=1227 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.44s
2018-04-27 17:44:04,512 p=1227 u=root |  Environment : restart memcached ----------------------------------------- 0.98s
2018-04-27 17:44:04,512 p=1227 u=root |  Environment : add host file --------------------------------------------- 0.73s
2018-04-27 17:44:04,513 p=1227 u=root |  Identity : create keystone database ------------------------------------- 0.70s
2018-04-27 17:44:04,513 p=1227 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.42s
2018-04-27 17:44:04,513 p=1227 u=root |  Environment : modify the /etc/sysconfig/memcached file ------------------ 0.39s
2018-04-27 17:48:21,110 p=1434 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:48:21,255 p=1434 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-27 17:48:21,256 p=1434 u=root |  Friday 27 April 2018  17:48:21 +0800 (0:00:00.159)       0:00:00.160 ********** 
2018-04-27 17:48:32,110 p=1434 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "the python mysqldb module is required"}
2018-04-27 17:48:32,115 p=1434 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:48:32,116 p=1434 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:48:32,116 p=1434 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-27 17:48:32,117 p=1434 u=root |  Friday 27 April 2018  17:48:32 +0800 (0:00:10.861)       0:00:11.021 ********** 
2018-04-27 17:48:32,117 p=1434 u=root |  =============================================================================== 
2018-04-27 17:48:32,118 p=1434 u=root |  Identity : create keystone database ------------------------------------ 10.86s
2018-04-27 17:51:36,796 p=1499 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:51:36,927 p=1499 u=root |  TASK [Identity : install python mysql bindings] ********************************
2018-04-27 17:51:36,928 p=1499 u=root |  Friday 27 April 2018  17:51:36 +0800 (0:00:00.144)       0:00:00.145 ********** 
2018-04-27 17:51:49,122 p=1499 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "No package matching 'python-mysqldb' found available, installed or updated", "rc": 126, "results": ["No package matching 'python-mysqldb' found available, installed or updated"]}
2018-04-27 17:51:49,126 p=1499 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:51:49,127 p=1499 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:51:49,127 p=1499 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-27 17:51:49,128 p=1499 u=root |  Friday 27 April 2018  17:51:49 +0800 (0:00:12.199)       0:00:12.344 ********** 
2018-04-27 17:51:49,128 p=1499 u=root |  =============================================================================== 
2018-04-27 17:51:49,129 p=1499 u=root |  Identity : install python mysql bindings ------------------------------- 12.20s
2018-04-27 17:52:57,647 p=1532 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:52:57,700 p=1532 u=root |  TASK [Identity : install python mysql bindings] ********************************
2018-04-27 17:52:57,701 p=1532 u=root |  Friday 27 April 2018  17:52:57 +0800 (0:00:00.059)       0:00:00.059 ********** 
2018-04-27 17:53:08,469 p=1532 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "Unable to find any of pip2, pip to use.  pip needs to be installed."}
2018-04-27 17:53:08,474 p=1532 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:53:08,474 p=1532 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:53:08,475 p=1532 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-27 17:53:08,475 p=1532 u=root |  Friday 27 April 2018  17:53:08 +0800 (0:00:10.774)       0:00:10.834 ********** 
2018-04-27 17:53:08,476 p=1532 u=root |  =============================================================================== 
2018-04-27 17:53:08,476 p=1532 u=root |  Identity : install python mysql bindings ------------------------------- 10.78s
2018-04-27 17:54:18,040 p=1565 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:54:18,093 p=1565 u=root |  TASK [Identity : install pip] **************************************************
2018-04-27 17:54:18,093 p=1565 u=root |  Friday 27 April 2018  17:54:18 +0800 (0:00:00.058)       0:00:00.058 ********** 
2018-04-27 17:54:37,107 p=1565 u=root |  changed: [controller]
2018-04-27 17:54:37,113 p=1565 u=root |  TASK [Identity : install python mysql bindings] ********************************
2018-04-27 17:54:37,114 p=1565 u=root |  Friday 27 April 2018  17:54:37 +0800 (0:00:19.020)       0:00:19.078 ********** 
2018-04-27 17:54:48,491 p=1565 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "/usr/bin/pip2 install MySQL-python", "failed": true, "msg": "stdout: Collecting MySQL-python\n  Downloading https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip (108kB)\n    Complete output from command python setup.py egg_info:\n    sh: mysql_config: command not found\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-build-8XI_yY/MySQL-python/setup.py\", line 17, in <module>\n        metadata, options = get_config()\n      File \"/tmp/pip-build-8XI_yY/MySQL-python/setup_posix.py\", line 43, in get_config\n        libs = mysql_config(\"libs_r\")\n      File \"/tmp/pip-build-8XI_yY/MySQL-python/setup_posix.py\", line 25, in mysql_config\n        raise EnvironmentError(\"%s not found\" % (mysql_config.path,))\n    EnvironmentError: mysql_config not found\n    \n    ----------------------------------------\n\n:stderr: Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-8XI_yY/MySQL-python/\nYou are using pip version 8.1.2, however version 10.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n"}
2018-04-27 17:54:48,496 p=1565 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:54:48,497 p=1565 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:54:48,497 p=1565 u=root |  controller                 : ok=1    changed=1    unreachable=0    failed=1   
2018-04-27 17:54:48,498 p=1565 u=root |  Friday 27 April 2018  17:54:48 +0800 (0:00:11.383)       0:00:30.462 ********** 
2018-04-27 17:54:48,498 p=1565 u=root |  =============================================================================== 
2018-04-27 17:54:48,499 p=1565 u=root |  Identity : install pip ------------------------------------------------- 19.02s
2018-04-27 17:54:48,499 p=1565 u=root |  Identity : install python mysql bindings ------------------------------- 11.38s
2018-04-27 17:56:24,113 p=1603 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 17:56:24,166 p=1603 u=root |  TASK [Identity : install pip] **************************************************
2018-04-27 17:56:24,166 p=1603 u=root |  Friday 27 April 2018  17:56:24 +0800 (0:00:00.058)       0:00:00.058 ********** 
2018-04-27 17:56:35,700 p=1603 u=root |  ok: [controller]
2018-04-27 17:56:35,703 p=1603 u=root |  TASK [Identity : upgrade] ******************************************************
2018-04-27 17:56:35,704 p=1603 u=root |  Friday 27 April 2018  17:56:35 +0800 (0:00:11.537)       0:00:11.596 ********** 
2018-04-27 17:56:42,384 p=1603 u=root |  changed: [controller]
2018-04-27 17:56:42,387 p=1603 u=root |  TASK [Identity : install python mysql bindings] ********************************
2018-04-27 17:56:42,388 p=1603 u=root |  Friday 27 April 2018  17:56:42 +0800 (0:00:06.683)       0:00:18.279 ********** 
2018-04-27 17:56:44,992 p=1603 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "/usr/bin/pip2 install MySQL-python", "failed": true, "msg": "stdout: Collecting MySQL-python\n  Using cached https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip\n    Complete output from command python setup.py egg_info:\n    sh: mysql_config: command not found\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-install-KCozMb/MySQL-python/setup.py\", line 17, in <module>\n        metadata, options = get_config()\n      File \"/tmp/pip-install-KCozMb/MySQL-python/setup_posix.py\", line 43, in get_config\n        libs = mysql_config(\"libs_r\")\n      File \"/tmp/pip-install-KCozMb/MySQL-python/setup_posix.py\", line 25, in mysql_config\n        raise EnvironmentError(\"%s not found\" % (mysql_config.path,))\n    EnvironmentError: mysql_config not found\n    \n    ----------------------------------------\n\n:stderr: Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-KCozMb/MySQL-python/\n"}
2018-04-27 17:56:45,000 p=1603 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 17:56:45,000 p=1603 u=root |  PLAY RECAP *********************************************************************
2018-04-27 17:56:45,000 p=1603 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-04-27 17:56:45,001 p=1603 u=root |  Friday 27 April 2018  17:56:44 +0800 (0:00:02.613)       0:00:20.893 ********** 
2018-04-27 17:56:45,001 p=1603 u=root |  =============================================================================== 
2018-04-27 17:56:45,002 p=1603 u=root |  Identity : install pip ------------------------------------------------- 11.54s
2018-04-27 17:56:45,002 p=1603 u=root |  Identity : upgrade ------------------------------------------------------ 6.68s
2018-04-27 17:56:45,002 p=1603 u=root |  Identity : install python mysql bindings -------------------------------- 2.61s
2018-04-27 18:01:37,014 p=1665 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:01:37,064 p=1665 u=root |  TASK [Identity : install pip] **************************************************
2018-04-27 18:01:37,064 p=1665 u=root |  Friday 27 April 2018  18:01:37 +0800 (0:00:00.055)       0:00:00.055 ********** 
2018-04-27 18:01:48,836 p=1665 u=root |  ok: [controller]
2018-04-27 18:01:48,839 p=1665 u=root |  TASK [Identity : upgrade] ******************************************************
2018-04-27 18:01:48,840 p=1665 u=root |  Friday 27 April 2018  18:01:48 +0800 (0:00:11.775)       0:00:11.830 ********** 
2018-04-27 18:01:51,861 p=1665 u=root |  changed: [controller]
2018-04-27 18:01:51,864 p=1665 u=root |  TASK [Identity : install python-devel] *****************************************
2018-04-27 18:01:51,865 p=1665 u=root |  Friday 27 April 2018  18:01:51 +0800 (0:00:03.025)       0:00:14.855 ********** 
2018-04-27 18:02:07,910 p=1665 u=root |  changed: [controller]
2018-04-27 18:02:07,914 p=1665 u=root |  TASK [Identity : install python mysql bindings] ********************************
2018-04-27 18:02:07,914 p=1665 u=root |  Friday 27 April 2018  18:02:07 +0800 (0:00:16.049)       0:00:30.905 ********** 
2018-04-27 18:02:10,820 p=1665 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "/usr/bin/pip2 install MySQL-python", "failed": true, "msg": "stdout: Collecting MySQL-python\n  Using cached https://files.pythonhosted.org/packages/a5/e9/51b544da85a36a68debe7a7091f068d802fc515a3a202652828c73453cad/MySQL-python-1.2.5.zip\n    Complete output from command python setup.py egg_info:\n    sh: mysql_config: command not found\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/tmp/pip-install-MA0N94/MySQL-python/setup.py\", line 17, in <module>\n        metadata, options = get_config()\n      File \"/tmp/pip-install-MA0N94/MySQL-python/setup_posix.py\", line 43, in get_config\n        libs = mysql_config(\"libs_r\")\n      File \"/tmp/pip-install-MA0N94/MySQL-python/setup_posix.py\", line 25, in mysql_config\n        raise EnvironmentError(\"%s not found\" % (mysql_config.path,))\n    EnvironmentError: mysql_config not found\n    \n    ----------------------------------------\n\n:stderr: Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-MA0N94/MySQL-python/\n"}
2018-04-27 18:02:10,824 p=1665 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 18:02:10,824 p=1665 u=root |  PLAY RECAP *********************************************************************
2018-04-27 18:02:10,825 p=1665 u=root |  controller                 : ok=3    changed=2    unreachable=0    failed=1   
2018-04-27 18:02:10,825 p=1665 u=root |  Friday 27 April 2018  18:02:10 +0800 (0:00:02.910)       0:00:33.816 ********** 
2018-04-27 18:02:10,826 p=1665 u=root |  =============================================================================== 
2018-04-27 18:02:10,826 p=1665 u=root |  Identity : install python-devel ---------------------------------------- 16.05s
2018-04-27 18:02:10,826 p=1665 u=root |  Identity : install pip ------------------------------------------------- 11.78s
2018-04-27 18:02:10,827 p=1665 u=root |  Identity : upgrade ------------------------------------------------------ 3.03s
2018-04-27 18:02:10,827 p=1665 u=root |  Identity : install python mysql bindings -------------------------------- 2.91s
2018-04-27 18:10:54,974 p=1715 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:10:55,025 p=1715 u=root |  TASK [Identity : install depends] **********************************************
2018-04-27 18:10:55,026 p=1715 u=root |  Friday 27 April 2018  18:10:55 +0800 (0:00:00.056)       0:00:00.056 ********** 
2018-04-27 18:11:08,585 p=1715 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-27 18:11:08,589 p=1715 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-27 18:11:08,590 p=1715 u=root |  Friday 27 April 2018  18:11:08 +0800 (0:00:13.563)       0:00:13.620 ********** 
2018-04-27 18:11:09,433 p=1715 u=root |  changed: [controller]
2018-04-27 18:11:09,437 p=1715 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-27 18:11:09,438 p=1715 u=root |  Friday 27 April 2018  18:11:09 +0800 (0:00:00.847)       0:00:14.468 ********** 
2018-04-27 18:11:10,199 p=1715 u=root |  changed: [controller] => (item=localhost)
2018-04-27 18:11:10,601 p=1715 u=root |  changed: [controller] => (item=%)
2018-04-27 18:11:10,605 p=1715 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-27 18:11:10,605 p=1715 u=root |  Friday 27 April 2018  18:11:10 +0800 (0:00:01.167)       0:00:15.635 ********** 
2018-04-27 18:11:40,815 p=1715 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-27 18:11:40,820 p=1715 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-27 18:11:40,820 p=1715 u=root |  Friday 27 April 2018  18:11:40 +0800 (0:00:30.215)       0:00:45.851 ********** 
2018-04-27 18:11:41,555 p=1715 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-27 18:11:41,912 p=1715 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-27 18:11:41,918 p=1715 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 18:11:41,919 p=1715 u=root |  Friday 27 April 2018  18:11:41 +0800 (0:00:01.098)       0:00:46.949 ********** 
2018-04-27 18:11:44,380 p=1715 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["su", "-s", "/bin/sh", "-c", "keystone-manage db_sync", "keystone"], "delta": "0:00:01.747705", "end": "2018-04-27 18:12:08.712184", "failed": true, "failed_when_result": true, "rc": 1, "start": "2018-04-27 18:12:06.964479", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-27 18:11:44,384 p=1715 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 18:11:44,385 p=1715 u=root |  PLAY RECAP *********************************************************************
2018-04-27 18:11:44,385 p=1715 u=root |  controller                 : ok=5    changed=5    unreachable=0    failed=1   
2018-04-27 18:11:44,386 p=1715 u=root |  Friday 27 April 2018  18:11:44 +0800 (0:00:02.466)       0:00:49.416 ********** 
2018-04-27 18:11:44,386 p=1715 u=root |  =============================================================================== 
2018-04-27 18:11:44,386 p=1715 u=root |  Identity : Install packages -------------------------------------------- 30.22s
2018-04-27 18:11:44,387 p=1715 u=root |  Identity : install depends --------------------------------------------- 13.56s
2018-04-27 18:11:44,387 p=1715 u=root |  Identity : populate the identity service -------------------------------- 2.47s
2018-04-27 18:11:44,387 p=1715 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.17s
2018-04-27 18:11:44,387 p=1715 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.10s
2018-04-27 18:11:44,388 p=1715 u=root |  Identity : create keystone database ------------------------------------- 0.85s
2018-04-27 18:18:30,478 p=1791 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:18:30,528 p=1791 u=root |  TASK [Identity : install depends] **********************************************
2018-04-27 18:18:30,528 p=1791 u=root |  Friday 27 April 2018  18:18:30 +0800 (0:00:00.054)       0:00:00.054 ********** 
2018-04-27 18:18:42,131 p=1791 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-27 18:18:42,136 p=1791 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 18:18:42,136 p=1791 u=root |  Friday 27 April 2018  18:18:42 +0800 (0:00:11.607)       0:00:11.662 ********** 
2018-04-27 18:18:44,456 p=1791 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "su -s /bin/sh -c \"keystone-manage db_sync\" keystone", "delta": "0:00:01.632086", "end": "2018-04-27 18:19:08.824530", "failed": true, "rc": 1, "start": "2018-04-27 18:19:07.192444", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": ["Consider using 'become', 'become_method', and 'become_user' rather than running su"]}
2018-04-27 18:18:44,462 p=1791 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 18:18:44,463 p=1791 u=root |  PLAY RECAP *********************************************************************
2018-04-27 18:18:44,463 p=1791 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-04-27 18:18:44,464 p=1791 u=root |  Friday 27 April 2018  18:18:44 +0800 (0:00:02.327)       0:00:13.989 ********** 
2018-04-27 18:18:44,464 p=1791 u=root |  =============================================================================== 
2018-04-27 18:18:44,465 p=1791 u=root |  Identity : install depends --------------------------------------------- 11.61s
2018-04-27 18:18:44,465 p=1791 u=root |  Identity : populate the identity service -------------------------------- 2.33s
2018-04-27 18:22:07,302 p=1830 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:22:07,400 p=1830 u=root |  TASK [Identity : install depends] **********************************************
2018-04-27 18:22:07,400 p=1830 u=root |  Friday 27 April 2018  18:22:07 +0800 (0:00:00.106)       0:00:00.106 ********** 
2018-04-27 18:22:19,563 p=1830 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-27 18:22:19,569 p=1830 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 18:22:19,570 p=1830 u=root |  Friday 27 April 2018  18:22:19 +0800 (0:00:12.169)       0:00:12.276 ********** 
2018-04-27 18:22:19,781 p=1830 u=root |   [ERROR]: User interrupted execution

2018-04-27 18:22:40,012 p=1880 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:22:40,060 p=1880 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 18:22:40,061 p=1880 u=root |  Friday 27 April 2018  18:22:40 +0800 (0:00:00.053)       0:00:00.053 ********** 
2018-04-27 18:22:43,283 p=1880 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "/bin/sh -c \"keystone-manage db_sync\" keystone", "delta": "0:00:02.631145", "end": "2018-04-27 18:23:07.652189", "failed": true, "rc": 1, "start": "2018-04-27 18:23:05.021044", "stderr": "", "stdout": "", "stdout_lines": [], "warnings": []}
2018-04-27 18:22:43,287 p=1880 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 18:22:43,288 p=1880 u=root |  PLAY RECAP *********************************************************************
2018-04-27 18:22:43,288 p=1880 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-27 18:22:43,289 p=1880 u=root |  Friday 27 April 2018  18:22:43 +0800 (0:00:03.227)       0:00:03.281 ********** 
2018-04-27 18:22:43,289 p=1880 u=root |  =============================================================================== 
2018-04-27 18:22:43,290 p=1880 u=root |  Identity : populate the identity service -------------------------------- 3.23s
2018-04-27 18:28:20,085 p=1895 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 18:28:20,133 p=1895 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-27 18:28:20,133 p=1895 u=root |  Friday 27 April 2018  18:28:20 +0800 (0:00:00.052)       0:00:00.052 ********** 
2018-04-27 18:28:39,678 p=1895 u=root |  changed: [controller]
2018-04-27 18:28:39,685 p=1895 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-04-27 18:28:39,685 p=1895 u=root |  Friday 27 April 2018  18:28:39 +0800 (0:00:19.551)       0:00:19.604 ********** 
2018-04-27 18:28:40,481 p=1895 u=root |   [ERROR]: User interrupted execution

2018-04-27 19:33:35,041 p=2160 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 19:33:35,156 p=2160 u=root |  TASK [Identity : install depends] **********************************************
2018-04-27 19:33:35,157 p=2160 u=root |  Friday 27 April 2018  19:33:35 +0800 (0:00:00.124)       0:00:00.124 ********** 
2018-04-27 19:33:49,283 p=2160 u=root |   [ERROR]: User interrupted execution

2018-04-27 19:34:25,913 p=2227 u=root |  PLAY [install openstack] *******************************************************
2018-04-27 19:34:25,979 p=2227 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-27 19:34:25,979 p=2227 u=root |  Friday 27 April 2018  19:34:25 +0800 (0:00:00.070)       0:00:00.070 ********** 
2018-04-27 19:34:31,925 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:31,932 p=2227 u=root |  TASK [Environment : add host file] *********************************************
2018-04-27 19:34:31,933 p=2227 u=root |  Friday 27 April 2018  19:34:31 +0800 (0:00:05.953)       0:00:06.024 ********** 
2018-04-27 19:34:32,660 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:32,664 p=2227 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-27 19:34:32,665 p=2227 u=root |  Friday 27 April 2018  19:34:32 +0800 (0:00:00.731)       0:00:06.756 ********** 
2018-04-27 19:34:37,791 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:37,796 p=2227 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-27 19:34:37,797 p=2227 u=root |  Friday 27 April 2018  19:34:37 +0800 (0:00:05.131)       0:00:11.888 ********** 
2018-04-27 19:34:38,193 p=2227 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 19:34:38,510 p=2227 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 19:34:38,826 p=2227 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 19:34:39,140 p=2227 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-27 19:34:39,150 p=2227 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-27 19:34:39,150 p=2227 u=root |  Friday 27 April 2018  19:34:39 +0800 (0:00:01.353)       0:00:13.241 ********** 
2018-04-27 19:34:39,516 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:39,522 p=2227 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-27 19:34:39,523 p=2227 u=root |  Friday 27 April 2018  19:34:39 +0800 (0:00:00.372)       0:00:13.614 ********** 
2018-04-27 19:34:41,103 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:41,108 p=2227 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-27 19:34:41,108 p=2227 u=root |  Friday 27 April 2018  19:34:41 +0800 (0:00:01.585)       0:00:15.199 ********** 
2018-04-27 19:34:43,885 p=2227 u=root |  changed: [controller]
2018-04-27 19:34:43,892 p=2227 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-27 19:34:43,893 p=2227 u=root |  Friday 27 April 2018  19:34:43 +0800 (0:00:02.784)       0:00:17.984 ********** 
2018-04-27 19:39:56,730 p=2227 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-27 19:39:56,737 p=2227 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-27 19:39:56,737 p=2227 u=root |  Friday 27 April 2018  19:39:56 +0800 (0:05:12.844)       0:05:30.828 ********** 
2018-04-27 19:40:39,190 p=2227 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-27 19:40:39,197 p=2227 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-27 19:40:39,198 p=2227 u=root |  Friday 27 April 2018  19:40:39 +0800 (0:00:42.460)       0:06:13.289 ********** 
2018-04-27 19:40:40,571 p=2227 u=root |  changed: [controller]
2018-04-27 19:40:40,576 p=2227 u=root |  TASK [Environment : change database password] **********************************
2018-04-27 19:40:40,577 p=2227 u=root |  Friday 27 April 2018  19:40:40 +0800 (0:00:01.379)       0:06:14.668 ********** 
2018-04-27 19:40:41,263 p=2227 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["mysqladmin", "-u", "root", "password", "123456"], "delta": "0:00:00.018248", "end": "2018-04-27 11:41:05.413737", "failed": true, "rc": 1, "start": "2018-04-27 11:41:05.395489", "stderr": "\u0007mysqladmin: connect to server at 'localhost' failed\nerror: 'Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")'\nCheck that mysqld is running and that the socket: '/var/lib/mysql/mysql.sock' exists!", "stdout": "", "stdout_lines": [], "warnings": []}
2018-04-27 19:40:41,268 p=2227 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-27 19:40:41,268 p=2227 u=root |  PLAY RECAP *********************************************************************
2018-04-27 19:40:41,269 p=2227 u=root |  controller                 : ok=10   changed=10   unreachable=0    failed=1   
2018-04-27 19:40:41,270 p=2227 u=root |  Friday 27 April 2018  19:40:41 +0800 (0:00:00.692)       0:06:15.361 ********** 
2018-04-27 19:40:41,271 p=2227 u=root |  =============================================================================== 
2018-04-27 19:40:41,271 p=2227 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 312.84s
2018-04-27 19:40:41,271 p=2227 u=root |  Environment : install sql ---------------------------------------------- 42.46s
2018-04-27 19:40:41,272 p=2227 u=root |  Environment : set hostname ---------------------------------------------- 5.95s
2018-04-27 19:40:41,272 p=2227 u=root |  Environment : install chrony -------------------------------------------- 5.13s
2018-04-27 19:40:41,272 p=2227 u=root |  Environment : install centos-release-openstack-newton ------------------- 2.78s
2018-04-27 19:40:41,273 p=2227 u=root |  Environment : restart NTP ----------------------------------------------- 1.59s
2018-04-27 19:40:41,273 p=2227 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.38s
2018-04-27 19:40:41,273 p=2227 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.35s
2018-04-27 19:40:41,273 p=2227 u=root |  Environment : add host file --------------------------------------------- 0.73s
2018-04-27 19:40:41,274 p=2227 u=root |  Environment : change database password ---------------------------------- 0.69s
2018-04-27 19:40:41,274 p=2227 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.37s
2018-04-28 14:04:41,063 p=3201 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:04:41,210 p=3201 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 14:04:41,211 p=3201 u=root |  Saturday 28 April 2018  14:04:41 +0800 (0:00:00.154)       0:00:00.154 ******** 
2018-04-28 14:04:57,907 p=3201 u=root |  changed: [controller]
2018-04-28 14:04:57,911 p=3201 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 14:04:57,911 p=3201 u=root |  Saturday 28 April 2018  14:04:57 +0800 (0:00:16.700)       0:00:16.855 ******** 
2018-04-28 14:04:58,611 p=3201 u=root |  changed: [controller]
2018-04-28 14:04:58,615 p=3201 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 14:04:58,616 p=3201 u=root |  Saturday 28 April 2018  14:04:58 +0800 (0:00:00.704)       0:00:17.559 ******** 
2018-04-28 14:05:40,839 p=3201 u=root |  changed: [controller]
2018-04-28 14:05:40,843 p=3201 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 14:05:40,844 p=3201 u=root |  Saturday 28 April 2018  14:05:40 +0800 (0:00:42.227)       0:00:59.787 ******** 
2018-04-28 14:05:41,288 p=3201 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:05:41,668 p=3201 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:05:42,046 p=3201 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:05:42,387 p=3201 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:05:42,400 p=3201 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 14:05:42,401 p=3201 u=root |  Saturday 28 April 2018  14:05:42 +0800 (0:00:01.557)       0:01:01.344 ******** 
2018-04-28 14:05:42,784 p=3201 u=root |  changed: [controller]
2018-04-28 14:05:42,792 p=3201 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 14:05:42,793 p=3201 u=root |  Saturday 28 April 2018  14:05:42 +0800 (0:00:00.391)       0:01:01.736 ******** 
2018-04-28 14:05:44,626 p=3201 u=root |  changed: [controller]
2018-04-28 14:05:44,630 p=3201 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 14:05:44,630 p=3201 u=root |  Saturday 28 April 2018  14:05:44 +0800 (0:00:01.837)       0:01:03.574 ******** 
2018-04-28 14:05:48,889 p=3201 u=root |  changed: [controller]
2018-04-28 14:05:48,893 p=3201 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 14:05:48,894 p=3201 u=root |  Saturday 28 April 2018  14:05:48 +0800 (0:00:04.262)       0:01:07.837 ******** 
2018-04-28 14:11:37,257 p=3201 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 14:11:37,262 p=3201 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 14:11:37,262 p=3201 u=root |  Saturday 28 April 2018  14:11:37 +0800 (0:05:48.368)       0:06:56.206 ******** 
2018-04-28 14:11:42,776 p=3201 u=root |  changed: [controller]
2018-04-28 14:11:42,783 p=3201 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 14:11:42,783 p=3201 u=root |  Saturday 28 April 2018  14:11:42 +0800 (0:00:05.520)       0:07:01.727 ******** 
2018-04-28 14:11:44,266 p=3201 u=root |  changed: [controller]
2018-04-28 14:11:44,269 p=3201 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 14:11:44,270 p=3201 u=root |  Saturday 28 April 2018  14:11:44 +0800 (0:00:01.486)       0:07:03.213 ******** 
2018-04-28 14:11:44,978 p=3201 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "expect mysql_secure_installation.exp", "delta": "0:00:00.026289", "end": "2018-04-28 14:12:10.716939", "failed": true, "rc": 1, "start": "2018-04-28 14:12:10.690650", "stderr": "couldn't execute \"mysql_secure_installation\": no such file or directory\n    while executing\n\"spawn mysql_secure_installation\"\n    (file \"mysql_secure_installation.exp\" line 3)", "stdout": "spawn mysql_secure_installation", "stdout_lines": ["spawn mysql_secure_installation"], "warnings": []}
2018-04-28 14:11:44,982 p=3201 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 14:11:44,982 p=3201 u=root |  PLAY RECAP *********************************************************************
2018-04-28 14:11:44,982 p=3201 u=root |  controller                 : ok=10   changed=10   unreachable=0    failed=1   
2018-04-28 14:11:44,983 p=3201 u=root |  Saturday 28 April 2018  14:11:44 +0800 (0:00:00.713)       0:07:03.927 ******** 
2018-04-28 14:11:44,983 p=3201 u=root |  =============================================================================== 
2018-04-28 14:11:44,984 p=3201 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 348.37s
2018-04-28 14:11:44,984 p=3201 u=root |  Environment : install chrony ------------------------------------------- 42.23s
2018-04-28 14:11:44,985 p=3201 u=root |  Environment : set hostname --------------------------------------------- 16.70s
2018-04-28 14:11:44,985 p=3201 u=root |  Environment : install expect -------------------------------------------- 5.52s
2018-04-28 14:11:44,985 p=3201 u=root |  Environment : install centos-release-openstack-newton ------------------- 4.26s
2018-04-28 14:11:44,986 p=3201 u=root |  Environment : restart NTP ----------------------------------------------- 1.84s
2018-04-28 14:11:44,986 p=3201 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.56s
2018-04-28 14:11:44,986 p=3201 u=root |  Environment : copy file ------------------------------------------------- 1.49s
2018-04-28 14:11:44,986 p=3201 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.71s
2018-04-28 14:11:44,987 p=3201 u=root |  Environment : add host file --------------------------------------------- 0.70s
2018-04-28 14:11:44,987 p=3201 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.39s
2018-04-28 14:26:58,085 p=3406 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:26:58,182 p=3406 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 14:26:58,183 p=3406 u=root |  Saturday 28 April 2018  14:26:58 +0800 (0:00:00.102)       0:00:00.102 ******** 
2018-04-28 14:27:09,486 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:09,491 p=3406 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 14:27:09,491 p=3406 u=root |  Saturday 28 April 2018  14:27:09 +0800 (0:00:11.308)       0:00:11.411 ******** 
2018-04-28 14:27:10,249 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:10,255 p=3406 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 14:27:10,255 p=3406 u=root |  Saturday 28 April 2018  14:27:10 +0800 (0:00:00.763)       0:00:12.175 ******** 
2018-04-28 14:27:33,343 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:33,348 p=3406 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 14:27:33,348 p=3406 u=root |  Saturday 28 April 2018  14:27:33 +0800 (0:00:23.093)       0:00:35.268 ******** 
2018-04-28 14:27:33,794 p=3406 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:27:34,152 p=3406 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:27:34,497 p=3406 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:27:34,829 p=3406 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 14:27:34,839 p=3406 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 14:27:34,839 p=3406 u=root |  Saturday 28 April 2018  14:27:34 +0800 (0:00:01.491)       0:00:36.759 ******** 
2018-04-28 14:27:35,263 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:35,268 p=3406 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 14:27:35,268 p=3406 u=root |  Saturday 28 April 2018  14:27:35 +0800 (0:00:00.428)       0:00:37.188 ******** 
2018-04-28 14:27:37,172 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:37,178 p=3406 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 14:27:37,179 p=3406 u=root |  Saturday 28 April 2018  14:27:37 +0800 (0:00:01.910)       0:00:39.099 ******** 
2018-04-28 14:27:40,428 p=3406 u=root |  changed: [controller]
2018-04-28 14:27:40,432 p=3406 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 14:27:40,433 p=3406 u=root |  Saturday 28 April 2018  14:27:40 +0800 (0:00:03.254)       0:00:42.353 ******** 
2018-04-28 14:33:52,098 p=3406 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 14:33:52,110 p=3406 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-28 14:33:52,110 p=3406 u=root |  Saturday 28 April 2018  14:33:52 +0800 (0:06:11.677)       0:06:54.030 ******** 
2018-04-28 14:35:20,125 p=3406 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-28 14:35:20,135 p=3406 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-28 14:35:20,136 p=3406 u=root |  Saturday 28 April 2018  14:35:20 +0800 (0:01:28.025)       0:08:22.056 ******** 
2018-04-28 14:35:21,625 p=3406 u=root |  changed: [controller]
2018-04-28 14:35:21,629 p=3406 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 14:35:21,630 p=3406 u=root |  Saturday 28 April 2018  14:35:21 +0800 (0:00:01.493)       0:08:23.550 ******** 
2018-04-28 14:35:26,427 p=3406 u=root |  changed: [controller]
2018-04-28 14:35:26,434 p=3406 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 14:35:26,435 p=3406 u=root |  Saturday 28 April 2018  14:35:26 +0800 (0:00:04.804)       0:08:28.354 ******** 
2018-04-28 14:35:27,368 p=3406 u=root |  changed: [controller]
2018-04-28 14:35:27,373 p=3406 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 14:35:27,373 p=3406 u=root |  Saturday 28 April 2018  14:35:27 +0800 (0:00:00.938)       0:08:29.293 ******** 
2018-04-28 14:36:47,314 p=3406 u=root |  changed: [controller]
2018-04-28 14:36:47,318 p=3406 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-04-28 14:36:47,319 p=3406 u=root |  Saturday 28 April 2018  14:36:47 +0800 (0:01:19.945)       0:09:49.239 ******** 
2018-04-28 14:37:00,399 p=3406 u=root |  changed: [controller]
2018-04-28 14:37:00,406 p=3406 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-04-28 14:37:00,407 p=3406 u=root |  Saturday 28 April 2018  14:37:00 +0800 (0:00:13.088)       0:10:02.327 ******** 
2018-04-28 14:38:27,897 p=3406 u=root |  changed: [controller]
2018-04-28 14:38:27,903 p=3406 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-04-28 14:38:27,904 p=3406 u=root |  Saturday 28 April 2018  14:38:27 +0800 (0:01:27.496)       0:11:29.823 ******** 
2018-04-28 14:38:35,030 p=3406 u=root |  changed: [controller]
2018-04-28 14:38:35,036 p=3406 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 14:38:35,037 p=3406 u=root |  Saturday 28 April 2018  14:38:35 +0800 (0:00:07.133)       0:11:36.957 ******** 
2018-04-28 14:38:41,028 p=3406 u=root |  changed: [controller]
2018-04-28 14:38:41,035 p=3406 u=root |  TASK [Environment : install Memcached] *****************************************
2018-04-28 14:38:41,036 p=3406 u=root |  Saturday 28 April 2018  14:38:41 +0800 (0:00:05.998)       0:11:42.956 ******** 
2018-04-28 14:38:48,617 p=3406 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-04-28 14:38:48,623 p=3406 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-04-28 14:38:48,624 p=3406 u=root |  Saturday 28 April 2018  14:38:48 +0800 (0:00:07.587)       0:11:50.543 ******** 
2018-04-28 14:38:49,068 p=3406 u=root |  changed: [controller]
2018-04-28 14:38:49,072 p=3406 u=root |  TASK [Environment : restart memcached] *****************************************
2018-04-28 14:38:49,073 p=3406 u=root |  Saturday 28 April 2018  14:38:49 +0800 (0:00:00.449)       0:11:50.993 ******** 
2018-04-28 14:38:50,122 p=3406 u=root |  changed: [controller]
2018-04-28 14:38:50,126 p=3406 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:38:50,127 p=3406 u=root |  Saturday 28 April 2018  14:38:50 +0800 (0:00:01.054)       0:11:52.047 ******** 
2018-04-28 14:39:21,949 p=3406 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 14:39:21,959 p=3406 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 14:39:21,959 p=3406 u=root |  Saturday 28 April 2018  14:39:21 +0800 (0:00:31.832)       0:12:23.879 ******** 
2018-04-28 14:39:22,789 p=3406 u=root |  changed: [controller]
2018-04-28 14:39:22,795 p=3406 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 14:39:22,796 p=3406 u=root |  Saturday 28 April 2018  14:39:22 +0800 (0:00:00.836)       0:12:24.715 ******** 
2018-04-28 14:39:23,734 p=3406 u=root |  failed: [controller] (item=localhost) => {"failed": true, "item": "localhost", "msg": "unable to connect to database, check login_user and login_password are correct or /root/.my.cnf has the credentials. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-04-28 14:39:24,115 p=3406 u=root |  failed: [controller] (item=%) => {"failed": true, "item": "%", "msg": "unable to connect to database, check login_user and login_password are correct or /root/.my.cnf has the credentials. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-04-28 14:39:24,120 p=3406 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 14:39:24,121 p=3406 u=root |  PLAY RECAP *********************************************************************
2018-04-28 14:39:24,121 p=3406 u=root |  controller                 : ok=22   changed=22   unreachable=0    failed=1   
2018-04-28 14:39:24,122 p=3406 u=root |  Saturday 28 April 2018  14:39:24 +0800 (0:00:01.326)       0:12:26.042 ******** 
2018-04-28 14:39:24,122 p=3406 u=root |  =============================================================================== 
2018-04-28 14:39:24,123 p=3406 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 371.68s
2018-04-28 14:39:24,123 p=3406 u=root |  Environment : install sql ---------------------------------------------- 88.03s
2018-04-28 14:39:24,124 p=3406 u=root |  Environment : install rabbitmq ----------------------------------------- 87.50s
2018-04-28 14:39:24,124 p=3406 u=root |  Environment : expect the mysql_secure_installation.exp ----------------- 79.95s
2018-04-28 14:39:24,124 p=3406 u=root |  Identity : install depends --------------------------------------------- 31.83s
2018-04-28 14:39:24,125 p=3406 u=root |  Environment : install chrony ------------------------------------------- 23.09s
2018-04-28 14:39:24,125 p=3406 u=root |  Environment : restart mariadb ------------------------------------------ 13.09s
2018-04-28 14:39:24,125 p=3406 u=root |  Environment : set hostname --------------------------------------------- 11.31s
2018-04-28 14:39:24,126 p=3406 u=root |  Environment : install Memcached ----------------------------------------- 7.59s
2018-04-28 14:39:24,126 p=3406 u=root |  Environment : start rabbitmq-server ------------------------------------- 7.13s
2018-04-28 14:39:24,126 p=3406 u=root |  Environment : useradd openstack ----------------------------------------- 6.00s
2018-04-28 14:39:24,127 p=3406 u=root |  Environment : install expect -------------------------------------------- 4.80s
2018-04-28 14:39:24,127 p=3406 u=root |  Environment : install centos-release-openstack-newton ------------------- 3.25s
2018-04-28 14:39:24,127 p=3406 u=root |  Environment : restart NTP ----------------------------------------------- 1.91s
2018-04-28 14:39:24,128 p=3406 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.49s
2018-04-28 14:39:24,128 p=3406 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.49s
2018-04-28 14:39:24,128 p=3406 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.33s
2018-04-28 14:39:24,129 p=3406 u=root |  Environment : restart memcached ----------------------------------------- 1.05s
2018-04-28 14:39:24,129 p=3406 u=root |  Environment : copy file ------------------------------------------------- 0.94s
2018-04-28 14:39:24,129 p=3406 u=root |  Identity : create keystone database ------------------------------------- 0.84s
2018-04-28 14:42:53,971 p=3791 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:42:54,025 p=3791 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:42:54,025 p=3791 u=root |  Saturday 28 April 2018  14:42:54 +0800 (0:00:00.059)       0:00:00.060 ******** 
2018-04-28 14:43:05,879 p=3791 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 14:43:05,883 p=3791 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 14:43:05,884 p=3791 u=root |  Saturday 28 April 2018  14:43:05 +0800 (0:00:11.858)       0:00:11.918 ******** 
2018-04-28 14:43:06,634 p=3791 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "unable to find /root/.my.cnf. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: NO)\")"}
2018-04-28 14:43:06,639 p=3791 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 14:43:06,639 p=3791 u=root |  PLAY RECAP *********************************************************************
2018-04-28 14:43:06,640 p=3791 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-04-28 14:43:06,641 p=3791 u=root |  Saturday 28 April 2018  14:43:06 +0800 (0:00:00.756)       0:00:12.675 ******** 
2018-04-28 14:43:06,641 p=3791 u=root |  =============================================================================== 
2018-04-28 14:43:06,641 p=3791 u=root |  Identity : install depends --------------------------------------------- 11.86s
2018-04-28 14:43:06,642 p=3791 u=root |  Identity : create keystone database ------------------------------------- 0.76s
2018-04-28 14:46:20,334 p=3844 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:46:20,386 p=3844 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:46:20,386 p=3844 u=root |  Saturday 28 April 2018  14:46:20 +0800 (0:00:00.057)       0:00:00.057 ******** 
2018-04-28 14:46:31,714 p=3844 u=root |   [ERROR]: User interrupted execution

2018-04-28 14:46:59,650 p=3875 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:46:59,702 p=3875 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:46:59,702 p=3875 u=root |  Saturday 28 April 2018  14:46:59 +0800 (0:00:00.057)       0:00:00.057 ******** 
2018-04-28 14:47:00,984 p=3875 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 14:47:00,988 p=3875 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 14:47:00,988 p=3875 u=root |  Saturday 28 April 2018  14:47:00 +0800 (0:00:01.286)       0:00:01.343 ******** 
2018-04-28 14:47:01,755 p=3875 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "unable to find /root/.my.cnf. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: NO)\")"}
2018-04-28 14:47:01,758 p=3875 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 14:47:01,759 p=3875 u=root |  PLAY RECAP *********************************************************************
2018-04-28 14:47:01,759 p=3875 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-04-28 14:47:01,760 p=3875 u=root |  Saturday 28 April 2018  14:47:01 +0800 (0:00:00.771)       0:00:02.114 ******** 
2018-04-28 14:47:01,760 p=3875 u=root |  =============================================================================== 
2018-04-28 14:47:01,760 p=3875 u=root |  Identity : install depends ---------------------------------------------- 1.29s
2018-04-28 14:47:01,761 p=3875 u=root |  Identity : create keystone database ------------------------------------- 0.77s
2018-04-28 14:51:12,952 p=3936 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:51:13,008 p=3936 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:51:13,009 p=3936 u=root |  Saturday 28 April 2018  14:51:13 +0800 (0:00:00.061)       0:00:00.062 ******** 
2018-04-28 14:51:24,699 p=3936 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 14:51:24,708 p=3936 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 14:51:24,709 p=3936 u=root |  Saturday 28 April 2018  14:51:24 +0800 (0:00:11.700)       0:00:11.762 ******** 
2018-04-28 14:51:25,468 p=3936 u=root |  changed: [controller]
2018-04-28 14:51:25,472 p=3936 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 14:51:25,473 p=3936 u=root |  Saturday 28 April 2018  14:51:25 +0800 (0:00:00.763)       0:00:12.525 ******** 
2018-04-28 14:51:26,306 p=3936 u=root |  changed: [controller] => (item=localhost)
2018-04-28 14:51:26,743 p=3936 u=root |  changed: [controller] => (item=%)
2018-04-28 14:51:26,748 p=3936 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 14:51:26,749 p=3936 u=root |  Saturday 28 April 2018  14:51:26 +0800 (0:00:01.276)       0:00:13.801 ******** 
2018-04-28 14:51:36,519 p=3936 u=root |   [ERROR]: User interrupted execution

2018-04-28 14:51:39,369 p=3970 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 14:51:39,422 p=3970 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 14:51:39,422 p=3970 u=root |  Saturday 28 April 2018  14:51:39 +0800 (0:00:00.058)       0:00:00.058 ******** 
2018-04-28 14:51:41,078 p=3970 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 14:51:41,084 p=3970 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 14:51:41,085 p=3970 u=root |  Saturday 28 April 2018  14:51:41 +0800 (0:00:01.662)       0:00:01.721 ******** 
2018-04-28 14:51:41,976 p=3970 u=root |  changed: [controller]
2018-04-28 14:51:41,981 p=3970 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 14:51:41,982 p=3970 u=root |  Saturday 28 April 2018  14:51:41 +0800 (0:00:00.896)       0:00:02.618 ******** 
2018-04-28 14:51:42,770 p=3970 u=root |  ok: [controller] => (item=localhost)
2018-04-28 14:51:43,161 p=3970 u=root |  ok: [controller] => (item=%)
2018-04-28 14:51:43,171 p=3970 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 14:51:43,172 p=3970 u=root |  Saturday 28 April 2018  14:51:43 +0800 (0:00:01.190)       0:00:03.808 ******** 
2018-04-28 14:53:05,659 p=3970 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 14:53:05,665 p=3970 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 14:53:05,665 p=3970 u=root |  Saturday 28 April 2018  14:53:05 +0800 (0:01:22.493)       0:01:26.302 ******** 
2018-04-28 14:53:06,487 p=3970 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-28 14:53:06,879 p=3970 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-28 14:53:06,888 p=3970 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 14:53:06,888 p=3970 u=root |  Saturday 28 April 2018  14:53:06 +0800 (0:00:01.222)       0:01:27.524 ******** 
2018-04-28 14:53:07,640 p=3970 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 14:53:07,644 p=3970 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 14:53:07,645 p=3970 u=root |  PLAY RECAP *********************************************************************
2018-04-28 14:53:07,645 p=3970 u=root |  controller                 : ok=5    changed=2    unreachable=0    failed=1   
2018-04-28 14:53:07,646 p=3970 u=root |  Saturday 28 April 2018  14:53:07 +0800 (0:00:00.757)       0:01:28.282 ******** 
2018-04-28 14:53:07,646 p=3970 u=root |  =============================================================================== 
2018-04-28 14:53:07,647 p=3970 u=root |  Identity : Install packages -------------------------------------------- 82.49s
2018-04-28 14:53:07,647 p=3970 u=root |  Identity : install depends ---------------------------------------------- 1.66s
2018-04-28 14:53:07,647 p=3970 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.22s
2018-04-28 14:53:07,648 p=3970 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.19s
2018-04-28 14:53:07,648 p=3970 u=root |  Identity : create keystone database ------------------------------------- 0.90s
2018-04-28 14:53:07,648 p=3970 u=root |  Identity : populate the identity service -------------------------------- 0.76s
2018-04-28 15:00:06,053 p=4171 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:00:06,154 p=4171 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:00:06,155 p=4171 u=root |  Saturday 28 April 2018  15:00:06 +0800 (0:00:00.110)       0:00:00.110 ******** 
2018-04-28 15:00:17,096 p=4171 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:00:17,100 p=4171 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:00:17,100 p=4171 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:00:17,101 p=4171 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:00:17,101 p=4171 u=root |  Saturday 28 April 2018  15:00:17 +0800 (0:00:10.946)       0:00:11.057 ******** 
2018-04-28 15:00:17,102 p=4171 u=root |  =============================================================================== 
2018-04-28 15:00:17,102 p=4171 u=root |  Identity : populate the identity service ------------------------------- 10.95s
2018-04-28 15:02:56,714 p=4231 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:02:56,817 p=4231 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 15:02:56,818 p=4231 u=root |  Saturday 28 April 2018  15:02:56 +0800 (0:00:00.114)       0:00:00.114 ******** 
2018-04-28 15:03:07,705 p=4231 u=root |  changed: [controller]
2018-04-28 15:03:07,711 p=4231 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 15:03:07,711 p=4231 u=root |  Saturday 28 April 2018  15:03:07 +0800 (0:00:10.893)       0:00:11.007 ******** 
2018-04-28 15:03:08,564 p=4231 u=root |  ok: [controller] => (item=localhost)
2018-04-28 15:03:08,995 p=4231 u=root |  ok: [controller] => (item=%)
2018-04-28 15:03:08,999 p=4231 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:03:09,000 p=4231 u=root |  Saturday 28 April 2018  15:03:08 +0800 (0:00:01.288)       0:00:12.296 ******** 
2018-04-28 15:03:09,687 p=4231 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:03:09,691 p=4231 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:03:09,692 p=4231 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:03:09,692 p=4231 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-04-28 15:03:09,693 p=4231 u=root |  Saturday 28 April 2018  15:03:09 +0800 (0:00:00.692)       0:00:12.989 ******** 
2018-04-28 15:03:09,693 p=4231 u=root |  =============================================================================== 
2018-04-28 15:03:09,693 p=4231 u=root |  Identity : create keystone database ------------------------------------ 10.89s
2018-04-28 15:03:09,694 p=4231 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.29s
2018-04-28 15:03:09,694 p=4231 u=root |  Identity : populate the identity service -------------------------------- 0.69s
2018-04-28 15:05:19,650 p=4276 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:05:19,719 p=4276 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:05:19,719 p=4276 u=root |  Saturday 28 April 2018  15:05:19 +0800 (0:00:00.075)       0:00:00.075 ******** 
2018-04-28 15:05:30,467 p=4276 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:05:30,471 p=4276 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:05:30,471 p=4276 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:05:30,472 p=4276 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:05:30,473 p=4276 u=root |  Saturday 28 April 2018  15:05:30 +0800 (0:00:10.752)       0:00:10.828 ******** 
2018-04-28 15:05:30,473 p=4276 u=root |  =============================================================================== 
2018-04-28 15:05:30,473 p=4276 u=root |  Identity : populate the identity service ------------------------------- 10.75s
2018-04-28 15:11:35,013 p=4309 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:11:35,062 p=4309 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:11:35,062 p=4309 u=root |  Saturday 28 April 2018  15:11:35 +0800 (0:00:00.053)       0:00:00.053 ******** 
2018-04-28 15:11:45,752 p=4309 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:11:45,756 p=4309 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:11:45,756 p=4309 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:11:45,757 p=4309 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:11:45,757 p=4309 u=root |  Saturday 28 April 2018  15:11:45 +0800 (0:00:10.694)       0:00:10.748 ******** 
2018-04-28 15:11:45,757 p=4309 u=root |  =============================================================================== 
2018-04-28 15:11:45,758 p=4309 u=root |  Identity : populate the identity service ------------------------------- 10.70s
2018-04-28 15:15:20,748 p=4327 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:15:20,853 p=4327 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:15:20,854 p=4327 u=root |  Saturday 28 April 2018  15:15:20 +0800 (0:00:00.116)       0:00:00.117 ******** 
2018-04-28 15:15:31,693 p=4327 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:15:31,697 p=4327 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:15:31,698 p=4327 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:15:31,698 p=4327 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:15:31,699 p=4327 u=root |  Saturday 28 April 2018  15:15:31 +0800 (0:00:10.844)       0:00:10.961 ******** 
2018-04-28 15:15:31,699 p=4327 u=root |  =============================================================================== 
2018-04-28 15:15:31,699 p=4327 u=root |  Identity : populate the identity service ------------------------------- 10.84s
2018-04-28 15:17:59,245 p=4347 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-04-28 15:17:59,374 p=4347 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml
2018-04-28 15:17:59,393 p=4347 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-04-28 15:17:59,426 p=4347 u=root |  PLAYBOOK: openstack.yml ********************************************************
2018-04-28 15:17:59,427 p=4347 u=root |  1 plays in openstack.yml
2018-04-28 15:17:59,430 p=4347 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:17:59,517 p=4347 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:17:59,518 p=4347 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml:33
2018-04-28 15:17:59,518 p=4347 u=root |  Saturday 28 April 2018  15:17:59 +0800 (0:00:00.095)       0:00:00.096 ******** 
2018-04-28 15:17:59,919 p=4347 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/commands/command.py
2018-04-28 15:18:10,462 p=4347 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", 
    "failed": true, 
    "failed_when_result": true, 
    "invocation": {
        "module_args": {
            "_raw_params": "su-s /bin/sh -c \"keystone-manage db_sync\" keystone", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "warn": true
        }, 
        "module_name": "command"
    }, 
    "msg": "[Errno 2] No such file or directory", 
    "rc": 2
}
2018-04-28 15:18:10,467 p=4347 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:18:10,467 p=4347 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:18:10,468 p=4347 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:18:10,468 p=4347 u=root |  Saturday 28 April 2018  15:18:10 +0800 (0:00:10.949)       0:00:11.045 ******** 
2018-04-28 15:18:10,469 p=4347 u=root |  =============================================================================== 
2018-04-28 15:18:10,469 p=4347 u=root |  Identity : populate the identity service ------------------------------- 10.95s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml:33 ---
2018-04-28 15:25:42,714 p=4383 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-04-28 15:25:42,792 p=4383 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml
2018-04-28 15:25:42,803 p=4383 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-04-28 15:25:42,823 p=4383 u=root |  PLAYBOOK: openstack.yml ********************************************************
2018-04-28 15:25:42,824 p=4383 u=root |  1 plays in openstack.yml
2018-04-28 15:25:42,826 p=4383 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:25:42,874 p=4383 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:25:42,874 p=4383 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml:33
2018-04-28 15:25:42,874 p=4383 u=root |  Saturday 28 April 2018  15:25:42 +0800 (0:00:00.053)       0:00:00.053 ******** 
2018-04-28 15:25:43,080 p=4383 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/commands/command.py
2018-04-28 15:25:53,613 p=4383 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", 
    "failed": true, 
    "failed_when_result": true, 
    "invocation": {
        "module_args": {
            "_raw_params": "su-s /bin/sh -c \"keystone-manage db_sync\" keystone", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "warn": true
        }, 
        "module_name": "command"
    }, 
    "msg": "[Errno 2] No such file or directory", 
    "rc": 2
}
2018-04-28 15:25:53,618 p=4383 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:25:53,618 p=4383 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:25:53,619 p=4383 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-04-28 15:25:53,620 p=4383 u=root |  Saturday 28 April 2018  15:25:53 +0800 (0:00:10.745)       0:00:10.798 ******** 
2018-04-28 15:25:53,620 p=4383 u=root |  =============================================================================== 
2018-04-28 15:25:53,620 p=4383 u=root |  Identity : populate the identity service ------------------------------- 10.75s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml:33 ---
2018-04-28 15:34:20,278 p=4601 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 15:34:20,343 p=4601 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 15:34:20,343 p=4601 u=root |  Saturday 28 April 2018  15:34:20 +0800 (0:00:00.068)       0:00:00.068 ******** 
2018-04-28 15:34:36,678 p=4601 u=root |  changed: [controller]
2018-04-28 15:34:36,684 p=4601 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 15:34:36,685 p=4601 u=root |  Saturday 28 April 2018  15:34:36 +0800 (0:00:16.341)       0:00:16.410 ******** 
2018-04-28 15:34:37,461 p=4601 u=root |  changed: [controller]
2018-04-28 15:34:37,466 p=4601 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 15:34:37,466 p=4601 u=root |  Saturday 28 April 2018  15:34:37 +0800 (0:00:00.781)       0:00:17.192 ******** 
2018-04-28 15:35:04,046 p=4601 u=root |  changed: [controller]
2018-04-28 15:35:04,053 p=4601 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 15:35:04,055 p=4601 u=root |  Saturday 28 April 2018  15:35:04 +0800 (0:00:26.587)       0:00:43.780 ******** 
2018-04-28 15:35:04,480 p=4601 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 15:35:04,807 p=4601 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 15:35:05,155 p=4601 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 15:35:05,497 p=4601 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 15:35:05,503 p=4601 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 15:35:05,504 p=4601 u=root |  Saturday 28 April 2018  15:35:05 +0800 (0:00:01.448)       0:00:45.229 ******** 
2018-04-28 15:35:05,874 p=4601 u=root |  changed: [controller]
2018-04-28 15:35:05,881 p=4601 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 15:35:05,881 p=4601 u=root |  Saturday 28 April 2018  15:35:05 +0800 (0:00:00.377)       0:00:45.607 ******** 
2018-04-28 15:35:07,791 p=4601 u=root |  changed: [controller]
2018-04-28 15:35:07,796 p=4601 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 15:35:07,796 p=4601 u=root |  Saturday 28 April 2018  15:35:07 +0800 (0:00:01.914)       0:00:47.521 ******** 
2018-04-28 15:35:17,101 p=4601 u=root |  changed: [controller]
2018-04-28 15:35:17,106 p=4601 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 15:35:17,107 p=4601 u=root |  Saturday 28 April 2018  15:35:17 +0800 (0:00:09.310)       0:00:56.832 ******** 
2018-04-28 15:42:28,595 p=4601 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 15:42:28,601 p=4601 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-28 15:42:28,601 p=4601 u=root |  Saturday 28 April 2018  15:42:28 +0800 (0:07:11.494)       0:08:08.327 ******** 
2018-04-28 15:46:46,699 p=4601 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-28 15:46:46,705 p=4601 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-28 15:46:46,705 p=4601 u=root |  Saturday 28 April 2018  15:46:46 +0800 (0:04:18.104)       0:12:26.431 ******** 
2018-04-28 15:46:48,224 p=4601 u=root |  changed: [controller]
2018-04-28 15:46:48,229 p=4601 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 15:46:48,230 p=4601 u=root |  Saturday 28 April 2018  15:46:48 +0800 (0:00:01.524)       0:12:27.955 ******** 
2018-04-28 15:46:59,111 p=4601 u=root |  changed: [controller]
2018-04-28 15:46:59,115 p=4601 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 15:46:59,116 p=4601 u=root |  Saturday 28 April 2018  15:46:59 +0800 (0:00:10.885)       0:12:38.841 ******** 
2018-04-28 15:47:00,017 p=4601 u=root |  changed: [controller]
2018-04-28 15:47:00,021 p=4601 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 15:47:00,022 p=4601 u=root |  Saturday 28 April 2018  15:47:00 +0800 (0:00:00.905)       0:12:39.747 ******** 
2018-04-28 15:48:20,928 p=4601 u=root |  changed: [controller]
2018-04-28 15:48:20,933 p=4601 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-04-28 15:48:20,933 p=4601 u=root |  Saturday 28 April 2018  15:48:20 +0800 (0:01:20.911)       0:14:00.659 ******** 
2018-04-28 15:48:34,125 p=4601 u=root |  changed: [controller]
2018-04-28 15:48:34,130 p=4601 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-04-28 15:48:34,130 p=4601 u=root |  Saturday 28 April 2018  15:48:34 +0800 (0:00:13.196)       0:14:13.856 ******** 
2018-04-28 15:49:53,904 p=4601 u=root |  changed: [controller]
2018-04-28 15:49:53,908 p=4601 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-04-28 15:49:53,909 p=4601 u=root |  Saturday 28 April 2018  15:49:53 +0800 (0:01:19.778)       0:15:33.634 ******** 
2018-04-28 15:50:00,010 p=4601 u=root |  changed: [controller]
2018-04-28 15:50:00,015 p=4601 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 15:50:00,015 p=4601 u=root |  Saturday 28 April 2018  15:50:00 +0800 (0:00:06.106)       0:15:39.740 ******** 
2018-04-28 15:50:05,622 p=4601 u=root |  changed: [controller]
2018-04-28 15:50:05,626 p=4601 u=root |  TASK [Environment : install Memcached] *****************************************
2018-04-28 15:50:05,627 p=4601 u=root |  Saturday 28 April 2018  15:50:05 +0800 (0:00:05.611)       0:15:45.352 ******** 
2018-04-28 15:50:16,351 p=4601 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-04-28 15:50:16,356 p=4601 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-04-28 15:50:16,356 p=4601 u=root |  Saturday 28 April 2018  15:50:16 +0800 (0:00:10.729)       0:15:56.082 ******** 
2018-04-28 15:50:16,750 p=4601 u=root |  changed: [controller]
2018-04-28 15:50:16,754 p=4601 u=root |  TASK [Environment : restart memcached] *****************************************
2018-04-28 15:50:16,754 p=4601 u=root |  Saturday 28 April 2018  15:50:16 +0800 (0:00:00.398)       0:15:56.480 ******** 
2018-04-28 15:50:17,776 p=4601 u=root |  changed: [controller]
2018-04-28 15:50:17,780 p=4601 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 15:50:17,780 p=4601 u=root |  Saturday 28 April 2018  15:50:17 +0800 (0:00:01.025)       0:15:57.506 ******** 
2018-04-28 15:50:35,954 p=4601 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 15:50:35,963 p=4601 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 15:50:35,964 p=4601 u=root |  Saturday 28 April 2018  15:50:35 +0800 (0:00:18.183)       0:16:15.689 ******** 
2018-04-28 15:50:36,709 p=4601 u=root |  changed: [controller]
2018-04-28 15:50:36,714 p=4601 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 15:50:36,715 p=4601 u=root |  Saturday 28 April 2018  15:50:36 +0800 (0:00:00.751)       0:16:16.440 ******** 
2018-04-28 15:50:37,512 p=4601 u=root |  changed: [controller] => (item=localhost)
2018-04-28 15:50:37,926 p=4601 u=root |  changed: [controller] => (item=%)
2018-04-28 15:50:37,930 p=4601 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 15:50:37,931 p=4601 u=root |  Saturday 28 April 2018  15:50:37 +0800 (0:00:01.216)       0:16:17.656 ******** 
2018-04-28 15:51:13,900 p=4601 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 15:51:13,908 p=4601 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 15:51:13,909 p=4601 u=root |  Saturday 28 April 2018  15:51:13 +0800 (0:00:35.977)       0:16:53.634 ******** 
2018-04-28 15:51:14,403 p=4601 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-28 15:51:14,776 p=4601 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-28 15:51:14,780 p=4601 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 15:51:14,781 p=4601 u=root |  Saturday 28 April 2018  15:51:14 +0800 (0:00:00.871)       0:16:54.506 ******** 
2018-04-28 15:51:15,265 p=4601 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 15:51:15,270 p=4601 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 15:51:15,270 p=4601 u=root |  PLAY RECAP *********************************************************************
2018-04-28 15:51:15,271 p=4601 u=root |  controller                 : ok=25   changed=25   unreachable=0    failed=1   
2018-04-28 15:51:15,271 p=4601 u=root |  Saturday 28 April 2018  15:51:15 +0800 (0:00:00.490)       0:16:54.997 ******** 
2018-04-28 15:51:15,272 p=4601 u=root |  =============================================================================== 
2018-04-28 15:51:15,272 p=4601 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 431.49s
2018-04-28 15:51:15,273 p=4601 u=root |  Environment : install sql --------------------------------------------- 258.10s
2018-04-28 15:51:15,273 p=4601 u=root |  Environment : expect the mysql_secure_installation.exp ----------------- 80.91s
2018-04-28 15:51:15,273 p=4601 u=root |  Environment : install rabbitmq ----------------------------------------- 79.78s
2018-04-28 15:51:15,274 p=4601 u=root |  Identity : Install packages -------------------------------------------- 35.98s
2018-04-28 15:51:15,274 p=4601 u=root |  Environment : install chrony ------------------------------------------- 26.59s
2018-04-28 15:51:15,274 p=4601 u=root |  Identity : install depends --------------------------------------------- 18.18s
2018-04-28 15:51:15,274 p=4601 u=root |  Environment : set hostname --------------------------------------------- 16.34s
2018-04-28 15:51:15,275 p=4601 u=root |  Environment : restart mariadb ------------------------------------------ 13.20s
2018-04-28 15:51:15,275 p=4601 u=root |  Environment : install expect ------------------------------------------- 10.89s
2018-04-28 15:51:15,275 p=4601 u=root |  Environment : install Memcached ---------------------------------------- 10.73s
2018-04-28 15:51:15,276 p=4601 u=root |  Environment : install centos-release-openstack-newton ------------------- 9.31s
2018-04-28 15:51:15,276 p=4601 u=root |  Environment : start rabbitmq-server ------------------------------------- 6.11s
2018-04-28 15:51:15,276 p=4601 u=root |  Environment : useradd openstack ----------------------------------------- 5.61s
2018-04-28 15:51:15,277 p=4601 u=root |  Environment : restart NTP ----------------------------------------------- 1.91s
2018-04-28 15:51:15,277 p=4601 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.52s
2018-04-28 15:51:15,277 p=4601 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.45s
2018-04-28 15:51:15,278 p=4601 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.22s
2018-04-28 15:51:15,278 p=4601 u=root |  Environment : restart memcached ----------------------------------------- 1.03s
2018-04-28 15:51:15,278 p=4601 u=root |  Environment : copy file ------------------------------------------------- 0.91s
2018-04-28 16:00:04,322 p=4916 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 16:00:04,371 p=4916 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 16:00:04,371 p=4916 u=root |  Saturday 28 April 2018  16:00:04 +0800 (0:00:00.053)       0:00:00.053 ******** 
2018-04-28 16:00:06,002 p=4916 u=root |   [ERROR]: User interrupted execution

2018-04-28 16:00:45,257 p=4933 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 16:00:45,305 p=4933 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 16:00:45,306 p=4933 u=root |  Saturday 28 April 2018  16:00:45 +0800 (0:00:00.052)       0:00:00.052 ******** 
2018-04-28 16:00:56,768 p=4933 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 16:00:56,774 p=4933 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 16:00:56,774 p=4933 u=root |  Saturday 28 April 2018  16:00:56 +0800 (0:00:11.468)       0:00:11.520 ******** 
2018-04-28 16:00:57,630 p=4933 u=root |  changed: [controller]
2018-04-28 16:00:57,634 p=4933 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 16:00:57,634 p=4933 u=root |  Saturday 28 April 2018  16:00:57 +0800 (0:00:00.860)       0:00:12.380 ******** 
2018-04-28 16:00:58,411 p=4933 u=root |  failed: [controller] (item=localhost) => {"failed": true, "item": "localhost", "msg": "unable to connect to database, check login_user and login_password are correct or /root/.my.cnf has the credentials. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-04-28 16:00:58,791 p=4933 u=root |  failed: [controller] (item=%) => {"failed": true, "item": "%", "msg": "unable to connect to database, check login_user and login_password are correct or /root/.my.cnf has the credentials. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-04-28 16:00:58,795 p=4933 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 16:00:58,795 p=4933 u=root |  PLAY RECAP *********************************************************************
2018-04-28 16:00:58,796 p=4933 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-04-28 16:00:58,796 p=4933 u=root |  Saturday 28 April 2018  16:00:58 +0800 (0:00:01.161)       0:00:13.542 ******** 
2018-04-28 16:00:58,797 p=4933 u=root |  =============================================================================== 
2018-04-28 16:00:58,797 p=4933 u=root |  Identity : install depends --------------------------------------------- 11.47s
2018-04-28 16:00:58,797 p=4933 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.16s
2018-04-28 16:00:58,798 p=4933 u=root |  Identity : create keystone database ------------------------------------- 0.86s
2018-04-28 16:01:53,794 p=5006 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 16:01:53,842 p=5006 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 16:01:53,842 p=5006 u=root |  Saturday 28 April 2018  16:01:53 +0800 (0:00:00.052)       0:00:00.052 ******** 
2018-04-28 16:01:55,182 p=5006 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 16:01:55,186 p=5006 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 16:01:55,187 p=5006 u=root |  Saturday 28 April 2018  16:01:55 +0800 (0:00:01.344)       0:00:01.397 ******** 
2018-04-28 16:01:55,963 p=5006 u=root |  changed: [controller]
2018-04-28 16:01:55,966 p=5006 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 16:01:55,967 p=5006 u=root |  Saturday 28 April 2018  16:01:55 +0800 (0:00:00.779)       0:00:02.177 ******** 
2018-04-28 16:01:56,719 p=5006 u=root |  ok: [controller] => (item=localhost)
2018-04-28 16:01:57,144 p=5006 u=root |  ok: [controller] => (item=%)
2018-04-28 16:01:57,152 p=5006 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 16:01:57,153 p=5006 u=root |  Saturday 28 April 2018  16:01:57 +0800 (0:00:01.185)       0:00:03.363 ******** 
2018-04-28 16:01:57,810 p=5006 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 16:01:57,815 p=5006 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 16:01:57,815 p=5006 u=root |  PLAY RECAP *********************************************************************
2018-04-28 16:01:57,816 p=5006 u=root |  controller                 : ok=3    changed=1    unreachable=0    failed=1   
2018-04-28 16:01:57,816 p=5006 u=root |  Saturday 28 April 2018  16:01:57 +0800 (0:00:00.663)       0:00:04.026 ******** 
2018-04-28 16:01:57,816 p=5006 u=root |  =============================================================================== 
2018-04-28 16:01:57,817 p=5006 u=root |  Identity : install depends ---------------------------------------------- 1.34s
2018-04-28 16:01:57,817 p=5006 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.19s
2018-04-28 16:01:57,817 p=5006 u=root |  Identity : create keystone database ------------------------------------- 0.78s
2018-04-28 16:01:57,818 p=5006 u=root |  Identity : populate the identity service -------------------------------- 0.66s
2018-04-28 17:05:14,917 p=5306 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 17:05:14,991 p=5306 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 17:05:14,991 p=5306 u=root |  Saturday 28 April 2018  17:05:14 +0800 (0:00:00.082)       0:00:00.082 ******** 
2018-04-28 17:05:26,522 p=5306 u=root |  changed: [controller]
2018-04-28 17:05:26,527 p=5306 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 17:05:26,528 p=5306 u=root |  Saturday 28 April 2018  17:05:26 +0800 (0:00:11.536)       0:00:11.618 ******** 
2018-04-28 17:05:27,252 p=5306 u=root |  changed: [controller]
2018-04-28 17:05:27,257 p=5306 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 17:05:27,258 p=5306 u=root |  Saturday 28 April 2018  17:05:27 +0800 (0:00:00.729)       0:00:12.348 ******** 
2018-04-28 17:05:50,232 p=5306 u=root |  changed: [controller]
2018-04-28 17:05:50,236 p=5306 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 17:05:50,237 p=5306 u=root |  Saturday 28 April 2018  17:05:50 +0800 (0:00:22.979)       0:00:35.327 ******** 
2018-04-28 17:05:50,697 p=5306 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:05:51,056 p=5306 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:05:51,409 p=5306 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:05:51,730 p=5306 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:05:51,737 p=5306 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 17:05:51,738 p=5306 u=root |  Saturday 28 April 2018  17:05:51 +0800 (0:00:01.501)       0:00:36.828 ******** 
2018-04-28 17:05:52,166 p=5306 u=root |  changed: [controller]
2018-04-28 17:05:52,170 p=5306 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 17:05:52,171 p=5306 u=root |  Saturday 28 April 2018  17:05:52 +0800 (0:00:00.432)       0:00:37.261 ******** 
2018-04-28 17:05:54,143 p=5306 u=root |  changed: [controller]
2018-04-28 17:05:54,149 p=5306 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 17:05:54,150 p=5306 u=root |  Saturday 28 April 2018  17:05:54 +0800 (0:00:01.978)       0:00:39.240 ******** 
2018-04-28 17:06:03,021 p=5306 u=root |  changed: [controller]
2018-04-28 17:06:03,025 p=5306 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 17:06:03,026 p=5306 u=root |  Saturday 28 April 2018  17:06:03 +0800 (0:00:08.876)       0:00:48.116 ******** 
2018-04-28 17:12:16,525 p=5306 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 17:12:16,533 p=5306 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-28 17:12:16,533 p=5306 u=root |  Saturday 28 April 2018  17:12:16 +0800 (0:06:13.507)       0:07:01.624 ******** 
2018-04-28 17:14:07,606 p=5306 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-28 17:14:07,614 p=5306 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-28 17:14:07,615 p=5306 u=root |  Saturday 28 April 2018  17:14:07 +0800 (0:01:51.081)       0:08:52.705 ******** 
2018-04-28 17:14:09,087 p=5306 u=root |  changed: [controller]
2018-04-28 17:14:09,091 p=5306 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 17:14:09,092 p=5306 u=root |  Saturday 28 April 2018  17:14:09 +0800 (0:00:01.477)       0:08:54.182 ******** 
2018-04-28 17:14:14,040 p=5306 u=root |  changed: [controller]
2018-04-28 17:14:14,046 p=5306 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 17:14:14,047 p=5306 u=root |  Saturday 28 April 2018  17:14:14 +0800 (0:00:04.954)       0:08:59.137 ******** 
2018-04-28 17:14:14,932 p=5306 u=root |  changed: [controller]
2018-04-28 17:14:14,939 p=5306 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 17:14:14,940 p=5306 u=root |  Saturday 28 April 2018  17:14:14 +0800 (0:00:00.892)       0:09:00.030 ******** 
2018-04-28 17:15:35,847 p=5306 u=root |  changed: [controller]
2018-04-28 17:15:35,852 p=5306 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-04-28 17:15:35,853 p=5306 u=root |  Saturday 28 April 2018  17:15:35 +0800 (0:01:20.913)       0:10:20.944 ******** 
2018-04-28 17:15:49,271 p=5306 u=root |  changed: [controller]
2018-04-28 17:15:49,275 p=5306 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-04-28 17:15:49,276 p=5306 u=root |  Saturday 28 April 2018  17:15:49 +0800 (0:00:13.422)       0:10:34.366 ******** 
2018-04-28 17:17:04,267 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:04,273 p=5306 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-04-28 17:17:04,274 p=5306 u=root |  Saturday 28 April 2018  17:17:04 +0800 (0:01:14.998)       0:11:49.364 ******** 
2018-04-28 17:17:10,156 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:10,162 p=5306 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 17:17:10,162 p=5306 u=root |  Saturday 28 April 2018  17:17:10 +0800 (0:00:05.888)       0:11:55.253 ******** 
2018-04-28 17:17:13,378 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:13,383 p=5306 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 17:17:13,384 p=5306 u=root |  Saturday 28 April 2018  17:17:13 +0800 (0:00:03.221)       0:11:58.474 ******** 
2018-04-28 17:17:16,537 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:16,542 p=5306 u=root |  TASK [Environment : install Memcached] *****************************************
2018-04-28 17:17:16,542 p=5306 u=root |  Saturday 28 April 2018  17:17:16 +0800 (0:00:03.158)       0:12:01.633 ******** 
2018-04-28 17:17:23,334 p=5306 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-04-28 17:17:23,338 p=5306 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-04-28 17:17:23,339 p=5306 u=root |  Saturday 28 April 2018  17:17:23 +0800 (0:00:06.796)       0:12:08.429 ******** 
2018-04-28 17:17:23,736 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:23,742 p=5306 u=root |  TASK [Environment : restart memcached] *****************************************
2018-04-28 17:17:23,742 p=5306 u=root |  Saturday 28 April 2018  17:17:23 +0800 (0:00:00.403)       0:12:08.833 ******** 
2018-04-28 17:17:24,818 p=5306 u=root |  changed: [controller]
2018-04-28 17:17:24,822 p=5306 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 17:17:24,823 p=5306 u=root |  Saturday 28 April 2018  17:17:24 +0800 (0:00:01.080)       0:12:09.913 ******** 
2018-04-28 17:17:57,515 p=5306 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 17:17:57,519 p=5306 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 17:17:57,519 p=5306 u=root |  Saturday 28 April 2018  17:17:57 +0800 (0:00:32.696)       0:12:42.610 ******** 
2018-04-28 17:17:58,396 p=5306 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "unable to find /root/.my.cnf. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-04-28 17:17:58,400 p=5306 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 17:17:58,400 p=5306 u=root |  PLAY RECAP *********************************************************************
2018-04-28 17:17:58,401 p=5306 u=root |  controller                 : ok=22   changed=22   unreachable=0    failed=1   
2018-04-28 17:17:58,401 p=5306 u=root |  Saturday 28 April 2018  17:17:58 +0800 (0:00:00.881)       0:12:43.492 ******** 
2018-04-28 17:17:58,401 p=5306 u=root |  =============================================================================== 
2018-04-28 17:17:58,402 p=5306 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 373.51s
2018-04-28 17:17:58,403 p=5306 u=root |  Environment : install sql --------------------------------------------- 111.08s
2018-04-28 17:17:58,403 p=5306 u=root |  Environment : expect the mysql_secure_installation.exp ----------------- 80.91s
2018-04-28 17:17:58,403 p=5306 u=root |  Environment : install rabbitmq ----------------------------------------- 75.00s
2018-04-28 17:17:58,404 p=5306 u=root |  Identity : install depends --------------------------------------------- 32.70s
2018-04-28 17:17:58,404 p=5306 u=root |  Environment : install chrony ------------------------------------------- 22.98s
2018-04-28 17:17:58,404 p=5306 u=root |  Environment : restart mariadb ------------------------------------------ 13.42s
2018-04-28 17:17:58,404 p=5306 u=root |  Environment : set hostname --------------------------------------------- 11.54s
2018-04-28 17:17:58,405 p=5306 u=root |  Environment : install centos-release-openstack-newton ------------------- 8.88s
2018-04-28 17:17:58,405 p=5306 u=root |  Environment : install Memcached ----------------------------------------- 6.80s
2018-04-28 17:17:58,405 p=5306 u=root |  Environment : start rabbitmq-server ------------------------------------- 5.89s
2018-04-28 17:17:58,406 p=5306 u=root |  Environment : install expect -------------------------------------------- 4.95s
2018-04-28 17:17:58,406 p=5306 u=root |  Environment : useradd openstack ----------------------------------------- 3.22s
2018-04-28 17:17:58,406 p=5306 u=root |  Environment : useradd openstack ----------------------------------------- 3.16s
2018-04-28 17:17:58,407 p=5306 u=root |  Environment : restart NTP ----------------------------------------------- 1.98s
2018-04-28 17:17:58,407 p=5306 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.50s
2018-04-28 17:17:58,407 p=5306 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.48s
2018-04-28 17:17:58,408 p=5306 u=root |  Environment : restart memcached ----------------------------------------- 1.08s
2018-04-28 17:17:58,408 p=5306 u=root |  Environment : copy file ------------------------------------------------- 0.89s
2018-04-28 17:17:58,408 p=5306 u=root |  Identity : create keystone database ------------------------------------- 0.88s
2018-04-28 17:25:48,329 p=5604 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 17:25:48,379 p=5604 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 17:25:48,379 p=5604 u=root |  Saturday 28 April 2018  17:25:48 +0800 (0:00:00.055)       0:00:00.055 ******** 
2018-04-28 17:25:59,856 p=5604 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 17:25:59,860 p=5604 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 17:25:59,861 p=5604 u=root |  Saturday 28 April 2018  17:25:59 +0800 (0:00:11.481)       0:00:11.537 ******** 
2018-04-28 17:26:00,580 p=5604 u=root |  changed: [controller]
2018-04-28 17:26:00,584 p=5604 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 17:26:00,584 p=5604 u=root |  Saturday 28 April 2018  17:26:00 +0800 (0:00:00.723)       0:00:12.260 ******** 
2018-04-28 17:26:01,341 p=5604 u=root |  changed: [controller] => (item=localhost)
2018-04-28 17:26:01,713 p=5604 u=root |  changed: [controller] => (item=%)
2018-04-28 17:26:01,717 p=5604 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 17:26:01,718 p=5604 u=root |  Saturday 28 April 2018  17:26:01 +0800 (0:00:01.133)       0:00:13.394 ******** 
2018-04-28 17:26:57,054 p=5604 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 17:26:57,058 p=5604 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 17:26:57,059 p=5604 u=root |  Saturday 28 April 2018  17:26:57 +0800 (0:00:55.341)       0:01:08.735 ******** 
2018-04-28 17:26:57,842 p=5604 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-28 17:26:58,184 p=5604 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-28 17:26:58,190 p=5604 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 17:26:58,191 p=5604 u=root |  Saturday 28 April 2018  17:26:58 +0800 (0:00:01.131)       0:01:09.867 ******** 
2018-04-28 17:26:58,895 p=5604 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "failed_when_result": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 17:26:58,899 p=5604 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 17:26:58,899 p=5604 u=root |  PLAY RECAP *********************************************************************
2018-04-28 17:26:58,900 p=5604 u=root |  controller                 : ok=5    changed=4    unreachable=0    failed=1   
2018-04-28 17:26:58,900 p=5604 u=root |  Saturday 28 April 2018  17:26:58 +0800 (0:00:00.709)       0:01:10.576 ******** 
2018-04-28 17:26:58,901 p=5604 u=root |  =============================================================================== 
2018-04-28 17:26:58,901 p=5604 u=root |  Identity : Install packages -------------------------------------------- 55.34s
2018-04-28 17:26:58,901 p=5604 u=root |  Identity : install depends --------------------------------------------- 11.48s
2018-04-28 17:26:58,902 p=5604 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.13s
2018-04-28 17:26:58,902 p=5604 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.13s
2018-04-28 17:26:58,902 p=5604 u=root |  Identity : create keystone database ------------------------------------- 0.72s
2018-04-28 17:26:58,903 p=5604 u=root |  Identity : populate the identity service -------------------------------- 0.71s
2018-04-28 17:44:55,616 p=5754 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 17:44:55,681 p=5754 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 17:44:55,682 p=5754 u=root |  Saturday 28 April 2018  17:44:55 +0800 (0:00:00.069)       0:00:00.069 ******** 
2018-04-28 17:44:56,974 p=5754 u=root |  changed: [controller]
2018-04-28 17:44:56,978 p=5754 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 17:44:56,978 p=5754 u=root |  Saturday 28 April 2018  17:44:56 +0800 (0:00:01.296)       0:00:01.366 ******** 
2018-04-28 17:44:57,778 p=5754 u=root |  changed: [controller]
2018-04-28 17:44:57,782 p=5754 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 17:44:57,783 p=5754 u=root |  Saturday 28 April 2018  17:44:57 +0800 (0:00:00.804)       0:00:02.170 ******** 
2018-04-28 17:45:19,141 p=5754 u=root |  changed: [controller]
2018-04-28 17:45:19,148 p=5754 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 17:45:19,148 p=5754 u=root |  Saturday 28 April 2018  17:45:19 +0800 (0:00:21.365)       0:00:23.536 ******** 
2018-04-28 17:45:19,653 p=5754 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:45:20,005 p=5754 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:45:20,352 p=5754 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:45:20,741 p=5754 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 17:45:20,749 p=5754 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 17:45:20,750 p=5754 u=root |  Saturday 28 April 2018  17:45:20 +0800 (0:00:01.601)       0:00:25.137 ******** 
2018-04-28 17:45:21,191 p=5754 u=root |  changed: [controller]
2018-04-28 17:45:21,197 p=5754 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 17:45:21,198 p=5754 u=root |  Saturday 28 April 2018  17:45:21 +0800 (0:00:00.448)       0:00:25.586 ******** 
2018-04-28 17:45:23,015 p=5754 u=root |  changed: [controller]
2018-04-28 17:45:23,019 p=5754 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 17:45:23,020 p=5754 u=root |  Saturday 28 April 2018  17:45:23 +0800 (0:00:01.821)       0:00:27.407 ******** 
2018-04-28 17:45:31,684 p=5754 u=root |  changed: [controller]
2018-04-28 17:45:31,690 p=5754 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 17:45:31,690 p=5754 u=root |  Saturday 28 April 2018  17:45:31 +0800 (0:00:08.670)       0:00:36.078 ******** 
2018-04-28 17:52:46,125 p=5754 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 17:52:46,130 p=5754 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-28 17:52:46,130 p=5754 u=root |  Saturday 28 April 2018  17:52:46 +0800 (0:07:14.439)       0:07:50.518 ******** 
2018-04-28 17:56:42,967 p=5754 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-28 17:56:42,972 p=5754 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-28 17:56:42,973 p=5754 u=root |  Saturday 28 April 2018  17:56:42 +0800 (0:03:56.842)       0:11:47.360 ******** 
2018-04-28 17:56:44,385 p=5754 u=root |  changed: [controller]
2018-04-28 17:56:44,389 p=5754 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 17:56:44,390 p=5754 u=root |  Saturday 28 April 2018  17:56:44 +0800 (0:00:01.416)       0:11:48.777 ******** 
2018-04-28 17:56:50,197 p=5754 u=root |  changed: [controller]
2018-04-28 17:56:50,201 p=5754 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 17:56:50,202 p=5754 u=root |  Saturday 28 April 2018  17:56:50 +0800 (0:00:05.812)       0:11:54.589 ******** 
2018-04-28 17:56:51,121 p=5754 u=root |  changed: [controller]
2018-04-28 17:56:51,126 p=5754 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 17:56:51,128 p=5754 u=root |  Saturday 28 April 2018  17:56:51 +0800 (0:00:00.924)       0:11:55.515 ******** 
2018-04-28 17:58:11,177 p=5754 u=root |  changed: [controller]
2018-04-28 17:58:11,185 p=5754 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-04-28 17:58:11,187 p=5754 u=root |  Saturday 28 April 2018  17:58:11 +0800 (0:01:20.057)       0:13:15.574 ******** 
2018-04-28 17:58:24,381 p=5754 u=root |  changed: [controller]
2018-04-28 17:58:24,386 p=5754 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-04-28 17:58:24,387 p=5754 u=root |  Saturday 28 April 2018  17:58:24 +0800 (0:00:13.200)       0:13:28.774 ******** 
2018-04-28 17:58:58,191 p=5754 u=root |  changed: [controller]
2018-04-28 17:58:58,199 p=5754 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-04-28 17:58:58,200 p=5754 u=root |  Saturday 28 April 2018  17:58:58 +0800 (0:00:33.812)       0:14:02.587 ******** 
2018-04-28 17:59:03,405 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:03,409 p=5754 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 17:59:03,410 p=5754 u=root |  Saturday 28 April 2018  17:59:03 +0800 (0:00:05.210)       0:14:07.797 ******** 
2018-04-28 17:59:05,884 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:05,888 p=5754 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-04-28 17:59:05,889 p=5754 u=root |  Saturday 28 April 2018  17:59:05 +0800 (0:00:02.478)       0:14:10.276 ******** 
2018-04-28 17:59:09,072 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:09,076 p=5754 u=root |  TASK [Environment : install Memcached] *****************************************
2018-04-28 17:59:09,077 p=5754 u=root |  Saturday 28 April 2018  17:59:09 +0800 (0:00:03.187)       0:14:13.464 ******** 
2018-04-28 17:59:15,128 p=5754 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-04-28 17:59:15,135 p=5754 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-04-28 17:59:15,136 p=5754 u=root |  Saturday 28 April 2018  17:59:15 +0800 (0:00:06.059)       0:14:19.523 ******** 
2018-04-28 17:59:15,551 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:15,555 p=5754 u=root |  TASK [Environment : restart memcached] *****************************************
2018-04-28 17:59:15,556 p=5754 u=root |  Saturday 28 April 2018  17:59:15 +0800 (0:00:00.420)       0:14:19.943 ******** 
2018-04-28 17:59:16,593 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:16,599 p=5754 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 17:59:16,599 p=5754 u=root |  Saturday 28 April 2018  17:59:16 +0800 (0:00:01.043)       0:14:20.987 ******** 
2018-04-28 17:59:35,252 p=5754 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 17:59:35,256 p=5754 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 17:59:35,257 p=5754 u=root |  Saturday 28 April 2018  17:59:35 +0800 (0:00:18.657)       0:14:39.644 ******** 
2018-04-28 17:59:36,049 p=5754 u=root |  changed: [controller]
2018-04-28 17:59:36,055 p=5754 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 17:59:36,056 p=5754 u=root |  Saturday 28 April 2018  17:59:36 +0800 (0:00:00.798)       0:14:40.443 ******** 
2018-04-28 17:59:36,836 p=5754 u=root |  changed: [controller] => (item=localhost)
2018-04-28 17:59:37,248 p=5754 u=root |  changed: [controller] => (item=%)
2018-04-28 17:59:37,252 p=5754 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 17:59:37,253 p=5754 u=root |  Saturday 28 April 2018  17:59:37 +0800 (0:00:01.196)       0:14:41.640 ******** 
2018-04-28 18:00:07,301 p=5754 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 18:00:07,307 p=5754 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 18:00:07,308 p=5754 u=root |  Saturday 28 April 2018  18:00:07 +0800 (0:00:30.054)       0:15:11.695 ******** 
2018-04-28 18:00:07,823 p=5754 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-04-28 18:00:08,189 p=5754 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-04-28 18:00:08,193 p=5754 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 18:00:08,194 p=5754 u=root |  Saturday 28 April 2018  18:00:08 +0800 (0:00:00.885)       0:15:12.581 ******** 
2018-04-28 18:00:08,573 p=5754 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 18:00:08,578 p=5754 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 18:00:08,578 p=5754 u=root |  PLAY RECAP *********************************************************************
2018-04-28 18:00:08,579 p=5754 u=root |  controller                 : ok=26   changed=26   unreachable=0    failed=1   
2018-04-28 18:00:08,579 p=5754 u=root |  Saturday 28 April 2018  18:00:08 +0800 (0:00:00.385)       0:15:12.967 ******** 
2018-04-28 18:00:08,580 p=5754 u=root |  =============================================================================== 
2018-04-28 18:00:08,580 p=5754 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 434.44s
2018-04-28 18:00:08,581 p=5754 u=root |  Environment : install sql --------------------------------------------- 236.84s
2018-04-28 18:00:08,581 p=5754 u=root |  Environment : expect the mysql_secure_installation.exp ----------------- 80.06s
2018-04-28 18:00:08,581 p=5754 u=root |  Environment : install rabbitmq ----------------------------------------- 33.81s
2018-04-28 18:00:08,582 p=5754 u=root |  Identity : Install packages -------------------------------------------- 30.06s
2018-04-28 18:00:08,582 p=5754 u=root |  Environment : install chrony ------------------------------------------- 21.37s
2018-04-28 18:00:08,582 p=5754 u=root |  Identity : install depends --------------------------------------------- 18.66s
2018-04-28 18:00:08,582 p=5754 u=root |  Environment : restart mariadb ------------------------------------------ 13.20s
2018-04-28 18:00:08,583 p=5754 u=root |  Environment : install centos-release-openstack-newton ------------------- 8.67s
2018-04-28 18:00:08,583 p=5754 u=root |  Environment : install Memcached ----------------------------------------- 6.06s
2018-04-28 18:00:08,583 p=5754 u=root |  Environment : install expect -------------------------------------------- 5.81s
2018-04-28 18:00:08,584 p=5754 u=root |  Environment : start rabbitmq-server ------------------------------------- 5.21s
2018-04-28 18:00:08,584 p=5754 u=root |  Environment : useradd openstack ----------------------------------------- 3.19s
2018-04-28 18:00:08,584 p=5754 u=root |  Environment : useradd openstack ----------------------------------------- 2.48s
2018-04-28 18:00:08,585 p=5754 u=root |  Environment : restart NTP ----------------------------------------------- 1.82s
2018-04-28 18:00:08,585 p=5754 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.60s
2018-04-28 18:00:08,585 p=5754 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.42s
2018-04-28 18:00:08,586 p=5754 u=root |  Environment : set hostname ---------------------------------------------- 1.30s
2018-04-28 18:00:08,586 p=5754 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.20s
2018-04-28 18:00:08,586 p=5754 u=root |  Environment : restart memcached ----------------------------------------- 1.04s
2018-04-28 18:09:06,856 p=6055 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 18:09:06,905 p=6055 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 18:09:06,906 p=6055 u=root |  Saturday 28 April 2018  18:09:06 +0800 (0:00:00.054)       0:00:00.054 ******** 
2018-04-28 18:09:08,405 p=6055 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 18:09:08,417 p=6055 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 18:09:08,418 p=6055 u=root |  Saturday 28 April 2018  18:09:08 +0800 (0:00:01.511)       0:00:01.566 ******** 
2018-04-28 18:09:09,161 p=6055 u=root |  ok: [controller]
2018-04-28 18:09:09,164 p=6055 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 18:09:09,165 p=6055 u=root |  Saturday 28 April 2018  18:09:09 +0800 (0:00:00.747)       0:00:02.313 ******** 
2018-04-28 18:09:09,979 p=6055 u=root |  ok: [controller] => (item=localhost)
2018-04-28 18:09:10,373 p=6055 u=root |  ok: [controller] => (item=%)
2018-04-28 18:09:10,379 p=6055 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 18:09:10,379 p=6055 u=root |  Saturday 28 April 2018  18:09:10 +0800 (0:00:01.214)       0:00:03.527 ******** 
2018-04-28 18:09:11,507 p=6055 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 18:09:11,517 p=6055 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 18:09:11,518 p=6055 u=root |  Saturday 28 April 2018  18:09:11 +0800 (0:00:01.138)       0:00:04.666 ******** 
2018-04-28 18:09:12,439 p=6055 u=root |  ok: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^connection ='})
2018-04-28 18:09:12,806 p=6055 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^provider = uuid'})
2018-04-28 18:09:12,810 p=6055 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 18:09:12,810 p=6055 u=root |  Saturday 28 April 2018  18:09:12 +0800 (0:00:01.292)       0:00:05.959 ******** 
2018-04-28 18:09:13,466 p=6055 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "su-s /bin/sh -c 'keystone-manage db_sync' keystone", "failed": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-04-28 18:09:13,471 p=6055 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 18:09:13,471 p=6055 u=root |  PLAY RECAP *********************************************************************
2018-04-28 18:09:13,471 p=6055 u=root |  controller                 : ok=5    changed=1    unreachable=0    failed=1   
2018-04-28 18:09:13,472 p=6055 u=root |  Saturday 28 April 2018  18:09:13 +0800 (0:00:00.661)       0:00:06.620 ******** 
2018-04-28 18:09:13,472 p=6055 u=root |  =============================================================================== 
2018-04-28 18:09:13,473 p=6055 u=root |  Identity : install depends ---------------------------------------------- 1.51s
2018-04-28 18:09:13,473 p=6055 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.29s
2018-04-28 18:09:13,473 p=6055 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.21s
2018-04-28 18:09:13,474 p=6055 u=root |  Identity : Install packages --------------------------------------------- 1.14s
2018-04-28 18:09:13,474 p=6055 u=root |  Identity : create keystone database ------------------------------------- 0.75s
2018-04-28 18:09:13,474 p=6055 u=root |  Identity : populate the identity service -------------------------------- 0.66s
2018-04-28 18:09:50,933 p=6121 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 18:09:50,986 p=6121 u=root |  TASK [Identity : install depends] **********************************************
2018-04-28 18:09:50,987 p=6121 u=root |  Saturday 28 April 2018  18:09:50 +0800 (0:00:00.059)       0:00:00.059 ******** 
2018-04-28 18:09:52,289 p=6121 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-04-28 18:09:52,295 p=6121 u=root |  TASK [Identity : create keystone database] *************************************
2018-04-28 18:09:52,296 p=6121 u=root |  Saturday 28 April 2018  18:09:52 +0800 (0:00:01.309)       0:00:01.369 ******** 
2018-04-28 18:09:53,057 p=6121 u=root |  ok: [controller]
2018-04-28 18:09:53,061 p=6121 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-04-28 18:09:53,061 p=6121 u=root |  Saturday 28 April 2018  18:09:53 +0800 (0:00:00.765)       0:00:02.134 ******** 
2018-04-28 18:09:53,806 p=6121 u=root |  ok: [controller] => (item=localhost)
2018-04-28 18:09:54,216 p=6121 u=root |  ok: [controller] => (item=%)
2018-04-28 18:09:54,221 p=6121 u=root |  TASK [Identity : Install packages] *********************************************
2018-04-28 18:09:54,222 p=6121 u=root |  Saturday 28 April 2018  18:09:54 +0800 (0:00:01.160)       0:00:03.295 ******** 
2018-04-28 18:09:55,299 p=6121 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-04-28 18:09:55,303 p=6121 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-04-28 18:09:55,304 p=6121 u=root |  Saturday 28 April 2018  18:09:55 +0800 (0:00:01.081)       0:00:04.376 ******** 
2018-04-28 18:09:56,021 p=6121 u=root |  ok: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^connection ='})
2018-04-28 18:09:56,357 p=6121 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^provider = uuid'})
2018-04-28 18:09:56,365 p=6121 u=root |  TASK [Identity : populate the identity service] ********************************
2018-04-28 18:09:56,366 p=6121 u=root |  Saturday 28 April 2018  18:09:56 +0800 (0:00:01.061)       0:00:05.438 ******** 
2018-04-28 18:09:59,888 p=6121 u=root |  changed: [controller]
2018-04-28 18:09:59,890 p=6121 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-04-28 18:09:59,894 p=6121 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-04-28 18:09:59,895 p=6121 u=root |  Saturday 28 April 2018  18:09:59 +0800 (0:00:03.529)       0:00:08.967 ******** 
2018-04-28 18:10:02,131 p=6121 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["keystone-manage", "fernet_setup", "--keystone-user", "keystone", "--keystone-group", "keystone", "keystone-manage", "credential_setup", "--keystone-user", "keystone", "--keystone-group", "keystone"], "delta": "0:00:01.869513", "end": "2018-04-28 18:10:28.187839", "failed": true, "rc": 2, "start": "2018-04-28 18:10:26.318326", "stderr": "usage: keystone-manage [bootstrap|credential_migrate|credential_rotate|credential_setup|db_sync|db_version|doctor|domain_config_upload|fernet_rotate|fernet_setup|mapping_populate|mapping_purge|mapping_engine|pki_setup|saml_idp_metadata|token_flush]\nkeystone-manage: error: unrecognized arguments: keystone-manage credential_setup", "stdout": "", "stdout_lines": [], "warnings": []}
2018-04-28 18:10:02,135 p=6121 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 18:10:02,136 p=6121 u=root |  PLAY RECAP *********************************************************************
2018-04-28 18:10:02,136 p=6121 u=root |  controller                 : ok=6    changed=2    unreachable=0    failed=1   
2018-04-28 18:10:02,137 p=6121 u=root |  Saturday 28 April 2018  18:10:02 +0800 (0:00:02.242)       0:00:11.209 ******** 
2018-04-28 18:10:02,137 p=6121 u=root |  =============================================================================== 
2018-04-28 18:10:02,138 p=6121 u=root |  Identity : populate the identity service -------------------------------- 3.53s
2018-04-28 18:10:02,138 p=6121 u=root |  Identity : Initialize Fernet key repositories --------------------------- 2.24s
2018-04-28 18:10:02,138 p=6121 u=root |  Identity : install depends ---------------------------------------------- 1.31s
2018-04-28 18:10:02,139 p=6121 u=root |  Identity : Grant access to the DB for keystone -------------------------- 1.16s
2018-04-28 18:10:02,139 p=6121 u=root |  Identity : Install packages --------------------------------------------- 1.08s
2018-04-28 18:10:02,139 p=6121 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 1.06s
2018-04-28 18:10:02,140 p=6121 u=root |  Identity : create keystone database ------------------------------------- 0.76s
2018-04-28 18:33:03,626 p=6364 u=root |  PLAY [install openstack] *******************************************************
2018-04-28 18:33:03,690 p=6364 u=root |  TASK [Environment : set hostname] **********************************************
2018-04-28 18:33:03,690 p=6364 u=root |  Saturday 28 April 2018  18:33:03 +0800 (0:00:00.068)       0:00:00.068 ******** 
2018-04-28 18:33:05,192 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:05,196 p=6364 u=root |  TASK [Environment : add host file] *********************************************
2018-04-28 18:33:05,197 p=6364 u=root |  Saturday 28 April 2018  18:33:05 +0800 (0:00:01.506)       0:00:01.575 ******** 
2018-04-28 18:33:05,844 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:05,849 p=6364 u=root |  TASK [Environment : install chrony] ********************************************
2018-04-28 18:33:05,849 p=6364 u=root |  Saturday 28 April 2018  18:33:05 +0800 (0:00:00.652)       0:00:02.227 ******** 
2018-04-28 18:33:36,214 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:36,219 p=6364 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 18:33:36,219 p=6364 u=root |  Saturday 28 April 2018  18:33:36 +0800 (0:00:30.369)       0:00:32.597 ******** 
2018-04-28 18:33:36,661 p=6364 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 18:33:37,048 p=6364 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 18:33:37,421 p=6364 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 18:33:37,770 p=6364 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-04-28 18:33:37,774 p=6364 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-04-28 18:33:37,774 p=6364 u=root |  Saturday 28 April 2018  18:33:37 +0800 (0:00:01.555)       0:00:34.152 ******** 
2018-04-28 18:33:38,204 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:38,209 p=6364 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-04-28 18:33:38,209 p=6364 u=root |  Saturday 28 April 2018  18:33:38 +0800 (0:00:00.434)       0:00:34.587 ******** 
2018-04-28 18:33:40,024 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:40,031 p=6364 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-04-28 18:33:40,032 p=6364 u=root |  Saturday 28 April 2018  18:33:40 +0800 (0:00:01.822)       0:00:36.410 ******** 
2018-04-28 18:33:48,599 p=6364 u=root |  changed: [controller]
2018-04-28 18:33:48,605 p=6364 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-04-28 18:33:48,606 p=6364 u=root |  Saturday 28 April 2018  18:33:48 +0800 (0:00:08.573)       0:00:44.983 ******** 
2018-04-28 18:39:30,516 p=6364 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-04-28 18:39:30,525 p=6364 u=root |  TASK [Environment : install sql] ***********************************************
2018-04-28 18:39:30,527 p=6364 u=root |  Saturday 28 April 2018  18:39:30 +0800 (0:05:41.920)       0:06:26.904 ******** 
2018-04-28 18:40:06,395 p=6364 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-04-28 18:40:06,403 p=6364 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-04-28 18:40:06,404 p=6364 u=root |  Saturday 28 April 2018  18:40:06 +0800 (0:00:35.877)       0:07:02.781 ******** 
2018-04-28 18:40:07,861 p=6364 u=root |  changed: [controller]
2018-04-28 18:40:07,867 p=6364 u=root |  TASK [Environment : install expect] ********************************************
2018-04-28 18:40:07,867 p=6364 u=root |  Saturday 28 April 2018  18:40:07 +0800 (0:00:01.463)       0:07:04.245 ******** 
2018-04-28 18:40:13,244 p=6364 u=root |  changed: [controller]
2018-04-28 18:40:13,248 p=6364 u=root |  TASK [Environment : copy file] *************************************************
2018-04-28 18:40:13,249 p=6364 u=root |  Saturday 28 April 2018  18:40:13 +0800 (0:00:05.381)       0:07:09.626 ******** 
2018-04-28 18:40:14,249 p=6364 u=root |  changed: [controller]
2018-04-28 18:40:14,253 p=6364 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-04-28 18:40:14,253 p=6364 u=root |  Saturday 28 April 2018  18:40:14 +0800 (0:00:01.004)       0:07:10.631 ******** 
2018-04-28 18:40:14,934 p=6364 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "./mysql_secure_installation.exp", "delta": "0:00:00.008605", "end": "2018-04-28 18:40:41.007952", "failed": true, "rc": 126, "start": "2018-04-28 18:40:40.999347", "stderr": "/bin/sh: ./mysql_secure_installation.exp: Permission denied", "stdout": "", "stdout_lines": [], "warnings": []}
2018-04-28 18:40:14,939 p=6364 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-04-28 18:40:14,939 p=6364 u=root |  PLAY RECAP *********************************************************************
2018-04-28 18:40:14,940 p=6364 u=root |  controller                 : ok=12   changed=12   unreachable=0    failed=1   
2018-04-28 18:40:14,940 p=6364 u=root |  Saturday 28 April 2018  18:40:14 +0800 (0:00:00.686)       0:07:11.318 ******** 
2018-04-28 18:40:14,940 p=6364 u=root |  =============================================================================== 
2018-04-28 18:40:14,941 p=6364 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 341.92s
2018-04-28 18:40:14,941 p=6364 u=root |  Environment : install sql ---------------------------------------------- 35.88s
2018-04-28 18:40:14,942 p=6364 u=root |  Environment : install chrony ------------------------------------------- 30.37s
2018-04-28 18:40:14,942 p=6364 u=root |  Environment : install centos-release-openstack-newton ------------------- 8.57s
2018-04-28 18:40:14,942 p=6364 u=root |  Environment : install expect -------------------------------------------- 5.38s
2018-04-28 18:40:14,942 p=6364 u=root |  Environment : restart NTP ----------------------------------------------- 1.82s
2018-04-28 18:40:14,943 p=6364 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.56s
2018-04-28 18:40:14,943 p=6364 u=root |  Environment : set hostname ---------------------------------------------- 1.51s
2018-04-28 18:40:14,943 p=6364 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.46s
2018-04-28 18:40:14,944 p=6364 u=root |  Environment : copy file ------------------------------------------------- 1.00s
2018-04-28 18:40:14,944 p=6364 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.69s
2018-04-28 18:40:14,945 p=6364 u=root |  Environment : add host file --------------------------------------------- 0.65s
2018-04-28 18:40:14,945 p=6364 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.43s
2018-05-02 09:21:37,441 p=2105 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 09:21:37,573 p=2105 u=root |  TASK [Environment : set hostname] **********************************************
2018-05-02 09:21:37,573 p=2105 u=root |  Wednesday 02 May 2018  09:21:37 +0800 (0:00:00.139)       0:00:00.139 ********* 
2018-05-02 09:22:08,830 p=2105 u=root |  changed: [controller]
2018-05-02 09:22:08,834 p=2105 u=root |  TASK [Environment : add host file] *********************************************
2018-05-02 09:22:08,835 p=2105 u=root |  Wednesday 02 May 2018  09:22:08 +0800 (0:00:31.261)       0:00:31.400 ********* 
2018-05-02 09:22:09,463 p=2105 u=root |  changed: [controller]
2018-05-02 09:22:09,467 p=2105 u=root |  TASK [Environment : install chrony] ********************************************
2018-05-02 09:22:09,468 p=2105 u=root |  Wednesday 02 May 2018  09:22:09 +0800 (0:00:00.633)       0:00:32.034 ********* 
2018-05-02 09:24:18,022 p=2105 u=root |  changed: [controller]
2018-05-02 09:24:18,026 p=2105 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 09:24:18,026 p=2105 u=root |  Wednesday 02 May 2018  09:24:18 +0800 (0:02:08.557)       0:02:40.592 ********* 
2018-05-02 09:24:18,421 p=2105 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 09:24:18,702 p=2105 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 09:24:18,982 p=2105 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 09:24:19,265 p=2105 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 09:24:19,272 p=2105 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 09:24:19,272 p=2105 u=root |  Wednesday 02 May 2018  09:24:19 +0800 (0:00:01.245)       0:02:41.838 ********* 
2018-05-02 09:24:19,587 p=2105 u=root |  changed: [controller]
2018-05-02 09:24:19,592 p=2105 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-05-02 09:24:19,593 p=2105 u=root |  Wednesday 02 May 2018  09:24:19 +0800 (0:00:00.320)       0:02:42.158 ********* 
2018-05-02 09:24:21,052 p=2105 u=root |  changed: [controller]
2018-05-02 09:24:21,056 p=2105 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-05-02 09:24:21,057 p=2105 u=root |  Wednesday 02 May 2018  09:24:21 +0800 (0:00:01.464)       0:02:43.623 ********* 
2018-05-02 09:24:24,012 p=2105 u=root |  changed: [controller]
2018-05-02 09:24:24,016 p=2105 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-05-02 09:24:24,016 p=2105 u=root |  Wednesday 02 May 2018  09:24:24 +0800 (0:00:02.959)       0:02:46.582 ********* 
2018-05-02 09:30:05,239 p=2105 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-02 09:30:05,245 p=2105 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 09:30:05,246 p=2105 u=root |  Wednesday 02 May 2018  09:30:05 +0800 (0:05:41.229)       0:08:27.811 ********* 
2018-05-02 09:31:36,996 p=2105 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 09:31:37,002 p=2105 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 09:31:37,002 p=2105 u=root |  Wednesday 02 May 2018  09:31:37 +0800 (0:01:31.756)       0:09:59.568 ********* 
2018-05-02 09:31:38,384 p=2105 u=root |  changed: [controller]
2018-05-02 09:31:38,388 p=2105 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 09:31:38,388 p=2105 u=root |  Wednesday 02 May 2018  09:31:38 +0800 (0:00:01.385)       0:10:00.954 ********* 
2018-05-02 09:31:42,910 p=2105 u=root |  changed: [controller]
2018-05-02 09:31:42,914 p=2105 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 09:31:42,915 p=2105 u=root |  Wednesday 02 May 2018  09:31:42 +0800 (0:00:04.526)       0:10:05.481 ********* 
2018-05-02 09:31:43,629 p=2105 u=root |  changed: [controller]
2018-05-02 09:31:43,633 p=2105 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 09:31:43,634 p=2105 u=root |  Wednesday 02 May 2018  09:31:43 +0800 (0:00:00.718)       0:10:06.199 ********* 
2018-05-02 09:31:44,219 p=2105 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "./mysql_secure_installation.exp", "delta": "0:00:00.006345", "end": "2018-05-02 09:31:44.837582", "failed": true, "rc": 126, "start": "2018-05-02 09:31:44.831237", "stderr": "/bin/sh: ./mysql_secure_installation.exp: Permission denied", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 09:31:44,227 p=2105 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 09:31:44,228 p=2105 u=root |  PLAY RECAP *********************************************************************
2018-05-02 09:31:44,228 p=2105 u=root |  controller                 : ok=12   changed=12   unreachable=0    failed=1   
2018-05-02 09:31:44,229 p=2105 u=root |  Wednesday 02 May 2018  09:31:44 +0800 (0:00:00.594)       0:10:06.794 ********* 
2018-05-02 09:31:44,229 p=2105 u=root |  =============================================================================== 
2018-05-02 09:31:44,229 p=2105 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 341.23s
2018-05-02 09:31:44,230 p=2105 u=root |  Environment : install chrony ------------------------------------------ 128.56s
2018-05-02 09:31:44,230 p=2105 u=root |  Environment : install sql ---------------------------------------------- 91.76s
2018-05-02 09:31:44,230 p=2105 u=root |  Environment : set hostname --------------------------------------------- 31.26s
2018-05-02 09:31:44,231 p=2105 u=root |  Environment : install expect -------------------------------------------- 4.53s
2018-05-02 09:31:44,231 p=2105 u=root |  Environment : install centos-release-openstack-newton ------------------- 2.96s
2018-05-02 09:31:44,231 p=2105 u=root |  Environment : restart NTP ----------------------------------------------- 1.46s
2018-05-02 09:31:44,231 p=2105 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.39s
2018-05-02 09:31:44,232 p=2105 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.25s
2018-05-02 09:31:44,232 p=2105 u=root |  Environment : copy file ------------------------------------------------- 0.72s
2018-05-02 09:31:44,232 p=2105 u=root |  Environment : add host file --------------------------------------------- 0.63s
2018-05-02 09:31:44,233 p=2105 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.60s
2018-05-02 09:31:44,233 p=2105 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.32s
2018-05-02 09:35:23,292 p=2264 u=root |   [WARNING]: No hosts matched, nothing to do

2018-05-02 09:37:06,449 p=2273 u=root |  controller | SUCCESS => {
    "changed": true, 
    "rc": 0, 
    "stderr": "Shared connection to 172.16.52.17 closed.\r\n", 
    "stdout": "spawn mysql_secure_installation\r\r\r\n\r\r\nNOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB\r\r\n      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!\r\r\n\r\r\nIn order to log into MariaDB to secure it, we'll need the current\r\r\npassword for the root user.  If you've just installed MariaDB, and\r\r\nyou haven't set the root password yet, the password will be blank,\r\r\nso you should just press enter here.\r\r\n\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): \r\r\nERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")\r\r\nEnter current password for root (enter for none): ", 
    "stdout_lines": [
        "spawn mysql_secure_installation", 
        "", 
        "", 
        "", 
        "", 
        "NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB", 
        "", 
        "      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!", 
        "", 
        "", 
        "", 
        "In order to log into MariaDB to secure it, we'll need the current", 
        "", 
        "password for the root user.  If you've just installed MariaDB, and", 
        "", 
        "you haven't set the root password yet, the password will be blank,", 
        "", 
        "so you should just press enter here.", 
        "", 
        "", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2 \"No such file or directory\")", 
        "", 
        "Enter current password for root (enter for none): "
    ]
}
2018-05-02 10:40:10,001 p=2363 u=root |  controller | FAILED! => {
    "changed": false, 
    "failed": true, 
    "msg": "Unable to find 'expect' in expected paths."
}
2018-05-02 10:42:51,316 p=2442 u=root |  controller | SUCCESS => {
    "changed": true, 
    "rc": 0, 
    "stderr": "Shared connection to 172.16.52.17 closed.\r\n", 
    "stdout": "/root/.ansible/tmp/ansible-tmp-1525228960.79-27365196019620/mysql_secure_installation.exp: line 24: warning: here-document at line 2 delimited by end-of-file (wanted `EOF')\r\nspawn mysql_secure_installation\r\r\r\n\r\r\nNOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB\r\r\n      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!\r\r\n\r\r\nIn order to log into MariaDB to secure it, we'll need the current\r\r\npassword for the root user.  If you've just installed MariaDB, and\r\r\nyou haven't set the root password yet, the password will be blank,\r\r\nso you should just press enter here.\r\r\n\r\r\nEnter current password for root (enter for none): \r\r\nOK, successfully used password, moving on...\r\r\n\r\r\nSetting the root password ensures that nobody can log into the MariaDB\r\r\nroot user without the proper authorisation.\r\r\n\r\r\nSet root password? [Y/n] y\r\r\nNew password: \r\r\nRe-enter new password: \r\r\nPassword updated successfully!\r\r\nReloading privilege tables..\r\r\n ... Success!\r\r\n\r\r\n\r\r\nBy default, a MariaDB installation has an anonymous user, allowing anyone\r\r\nto log into MariaDB without having to have a user account created for\r\r\nthem.  This is intended only for testing, and to make the installation\r\r\ngo a bit smoother.  You should remove them before moving into a\r\r\nproduction environment.\r\r\n\r\r\nRemove anonymous users? [Y/n] y\r\r\n ... Success!\r\r\n\r\r\nNormally, root should only be allowed to connect from 'localhost'.  This\r\r\nensures that someone cannot guess at the root password from the network.\r\r\n\r\r\nDisallow root login remotely? [Y/n] n\r\r\n ... skipping.\r\r\n\r\r\nBy default, MariaDB comes with a database named 'test' that anyone can\r\r\naccess.  This is also intended only for testing, and should be removed\r\r\nbefore moving into a production environment.\r\r\n\r\r\nRemove test database and access to it? [Y/n] y\r\r\n - Dropping test database...\r\r\n ... Success!\r\r\n - Removing privileges on test database...\r\r\n ... Success!\r\r\n\r\r\nReloading the privilege tables will ensure that all changes made so far\r\r\nwill take effect immediately.\r\r\n\r\r\nReload privilege tables now? [Y/n] y\r\r\n ... Success!\r\r\n\r\r\nCleaning up...\r\r\n\r\r\nAll done!  If you've completed all of the above steps, your MariaDB\r\r\ninstallation should now be secure.\r\r\n\r\r\nThanks for using MariaDB!\r\r\n", 
    "stdout_lines": [
        "/root/.ansible/tmp/ansible-tmp-1525228960.79-27365196019620/mysql_secure_installation.exp: line 24: warning: here-document at line 2 delimited by end-of-file (wanted `EOF')", 
        "spawn mysql_secure_installation", 
        "", 
        "", 
        "", 
        "", 
        "NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB", 
        "", 
        "      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!", 
        "", 
        "", 
        "", 
        "In order to log into MariaDB to secure it, we'll need the current", 
        "", 
        "password for the root user.  If you've just installed MariaDB, and", 
        "", 
        "you haven't set the root password yet, the password will be blank,", 
        "", 
        "so you should just press enter here.", 
        "", 
        "", 
        "", 
        "Enter current password for root (enter for none): ", 
        "", 
        "OK, successfully used password, moving on...", 
        "", 
        "", 
        "", 
        "Setting the root password ensures that nobody can log into the MariaDB", 
        "", 
        "root user without the proper authorisation.", 
        "", 
        "", 
        "", 
        "Set root password? [Y/n] y", 
        "", 
        "New password: ", 
        "", 
        "Re-enter new password: ", 
        "", 
        "Password updated successfully!", 
        "", 
        "Reloading privilege tables..", 
        "", 
        " ... Success!", 
        "", 
        "", 
        "", 
        "", 
        "", 
        "By default, a MariaDB installation has an anonymous user, allowing anyone", 
        "", 
        "to log into MariaDB without having to have a user account created for", 
        "", 
        "them.  This is intended only for testing, and to make the installation", 
        "", 
        "go a bit smoother.  You should remove them before moving into a", 
        "", 
        "production environment.", 
        "", 
        "", 
        "", 
        "Remove anonymous users? [Y/n] y", 
        "", 
        " ... Success!", 
        "", 
        "", 
        "", 
        "Normally, root should only be allowed to connect from 'localhost'.  This", 
        "", 
        "ensures that someone cannot guess at the root password from the network.", 
        "", 
        "", 
        "", 
        "Disallow root login remotely? [Y/n] n", 
        "", 
        " ... skipping.", 
        "", 
        "", 
        "", 
        "By default, MariaDB comes with a database named 'test' that anyone can", 
        "", 
        "access.  This is also intended only for testing, and should be removed", 
        "", 
        "before moving into a production environment.", 
        "", 
        "", 
        "", 
        "Remove test database and access to it? [Y/n] y", 
        "", 
        " - Dropping test database...", 
        "", 
        " ... Success!", 
        "", 
        " - Removing privileges on test database...", 
        "", 
        " ... Success!", 
        "", 
        "", 
        "", 
        "Reloading the privilege tables will ensure that all changes made so far", 
        "", 
        "will take effect immediately.", 
        "", 
        "", 
        "", 
        "Reload privilege tables now? [Y/n] y", 
        "", 
        " ... Success!", 
        "", 
        "", 
        "", 
        "Cleaning up...", 
        "", 
        "", 
        "", 
        "All done!  If you've completed all of the above steps, your MariaDB", 
        "", 
        "installation should now be secure.", 
        "", 
        "", 
        "", 
        "Thanks for using MariaDB!", 
        ""
    ]
}
2018-05-02 10:48:28,975 p=2471 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 10:48:29,036 p=2471 u=root |  TASK [Environment : set hostname] **********************************************
2018-05-02 10:48:29,037 p=2471 u=root |  Wednesday 02 May 2018  10:48:29 +0800 (0:00:00.065)       0:00:00.065 ********* 
2018-05-02 10:49:10,118 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:10,120 p=2471 u=root |  TASK [Environment : add host file] *********************************************
2018-05-02 10:49:10,120 p=2471 u=root |  Wednesday 02 May 2018  10:49:10 +0800 (0:00:41.083)       0:00:41.149 ********* 
2018-05-02 10:49:10,536 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:10,538 p=2471 u=root |  TASK [Environment : install chrony] ********************************************
2018-05-02 10:49:10,538 p=2471 u=root |  Wednesday 02 May 2018  10:49:10 +0800 (0:00:00.417)       0:00:41.566 ********* 
2018-05-02 10:49:32,152 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:32,157 p=2471 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 10:49:32,158 p=2471 u=root |  Wednesday 02 May 2018  10:49:32 +0800 (0:00:21.619)       0:01:03.186 ********* 
2018-05-02 10:49:32,543 p=2471 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 10:49:32,844 p=2471 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 10:49:33,137 p=2471 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 10:49:33,429 p=2471 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 10:49:33,436 p=2471 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 10:49:33,436 p=2471 u=root |  Wednesday 02 May 2018  10:49:33 +0800 (0:00:01.278)       0:01:04.464 ********* 
2018-05-02 10:49:33,765 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:33,770 p=2471 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-05-02 10:49:33,770 p=2471 u=root |  Wednesday 02 May 2018  10:49:33 +0800 (0:00:00.334)       0:01:04.798 ********* 
2018-05-02 10:49:35,459 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:35,463 p=2471 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-05-02 10:49:35,464 p=2471 u=root |  Wednesday 02 May 2018  10:49:35 +0800 (0:00:01.693)       0:01:06.492 ********* 
2018-05-02 10:49:38,148 p=2471 u=root |  changed: [controller]
2018-05-02 10:49:38,153 p=2471 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-05-02 10:49:38,153 p=2471 u=root |  Wednesday 02 May 2018  10:49:38 +0800 (0:00:02.689)       0:01:09.181 ********* 
2018-05-02 10:58:23,433 p=2471 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-02 10:58:23,440 p=2471 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 10:58:23,441 p=2471 u=root |  Wednesday 02 May 2018  10:58:23 +0800 (0:08:45.287)       0:09:54.469 ********* 
2018-05-02 11:04:16,355 p=2471 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 11:04:16,361 p=2471 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 11:04:16,362 p=2471 u=root |  Wednesday 02 May 2018  11:04:16 +0800 (0:05:52.920)       0:15:47.390 ********* 
2018-05-02 11:04:17,664 p=2471 u=root |  changed: [controller]
2018-05-02 11:04:17,669 p=2471 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 11:04:17,670 p=2471 u=root |  Wednesday 02 May 2018  11:04:17 +0800 (0:00:01.308)       0:15:48.698 ********* 
2018-05-02 11:04:17,775 p=2471 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "Unable to find 'free_form=./files/mysql_secure_installation.exp' in expected paths."}
2018-05-02 11:04:17,780 p=2471 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 11:04:17,780 p=2471 u=root |  PLAY RECAP *********************************************************************
2018-05-02 11:04:17,781 p=2471 u=root |  controller                 : ok=10   changed=10   unreachable=0    failed=1   
2018-05-02 11:04:17,781 p=2471 u=root |  Wednesday 02 May 2018  11:04:17 +0800 (0:00:00.111)       0:15:48.809 ********* 
2018-05-02 11:04:17,782 p=2471 u=root |  =============================================================================== 
2018-05-02 11:04:17,782 p=2471 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 525.29s
2018-05-02 11:04:17,782 p=2471 u=root |  Environment : install sql --------------------------------------------- 352.92s
2018-05-02 11:04:17,783 p=2471 u=root |  Environment : set hostname --------------------------------------------- 41.08s
2018-05-02 11:04:17,783 p=2471 u=root |  Environment : install chrony ------------------------------------------- 21.62s
2018-05-02 11:04:17,784 p=2471 u=root |  Environment : install centos-release-openstack-newton ------------------- 2.69s
2018-05-02 11:04:17,784 p=2471 u=root |  Environment : restart NTP ----------------------------------------------- 1.69s
2018-05-02 11:04:17,784 p=2471 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.31s
2018-05-02 11:04:17,785 p=2471 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.28s
2018-05-02 11:04:17,785 p=2471 u=root |  Environment : add host file --------------------------------------------- 0.42s
2018-05-02 11:04:17,786 p=2471 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.33s
2018-05-02 11:04:17,786 p=2471 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.11s
2018-05-02 11:05:27,882 p=2668 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 11:05:27,937 p=2668 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 11:05:27,938 p=2668 u=root |  Wednesday 02 May 2018  11:05:27 +0800 (0:00:00.059)       0:00:00.059 ********* 
2018-05-02 11:05:39,321 p=2668 u=root |  ok: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 11:05:39,323 p=2668 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 11:05:39,323 p=2668 u=root |  Wednesday 02 May 2018  11:05:39 +0800 (0:00:11.385)       0:00:11.445 ********* 
2018-05-02 11:05:40,123 p=2668 u=root |  ok: [controller]
2018-05-02 11:05:40,126 p=2668 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 11:05:40,127 p=2668 u=root |  Wednesday 02 May 2018  11:05:40 +0800 (0:00:00.803)       0:00:12.249 ********* 
2018-05-02 11:05:44,060 p=2668 u=root |  changed: [controller]
2018-05-02 11:05:44,062 p=2668 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 11:05:44,063 p=2668 u=root |  Wednesday 02 May 2018  11:05:44 +0800 (0:00:03.935)       0:00:16.184 ********* 
2018-05-02 11:05:44,943 p=2668 u=root |  changed: [controller]
2018-05-02 11:05:44,948 p=2668 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 11:05:44,948 p=2668 u=root |  Wednesday 02 May 2018  11:05:44 +0800 (0:00:00.885)       0:00:17.070 ********* 
2018-05-02 11:05:45,047 p=2668 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "Unable to find 'free_form=/root/mysql_secure_installation.exp' in expected paths."}
2018-05-02 11:05:45,051 p=2668 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 11:05:45,051 p=2668 u=root |  PLAY RECAP *********************************************************************
2018-05-02 11:05:45,052 p=2668 u=root |  controller                 : ok=4    changed=2    unreachable=0    failed=1   
2018-05-02 11:05:45,052 p=2668 u=root |  Wednesday 02 May 2018  11:05:45 +0800 (0:00:00.103)       0:00:17.174 ********* 
2018-05-02 11:05:45,053 p=2668 u=root |  =============================================================================== 
2018-05-02 11:05:45,053 p=2668 u=root |  Environment : install sql ---------------------------------------------- 11.39s
2018-05-02 11:05:45,054 p=2668 u=root |  Environment : install expect -------------------------------------------- 3.94s
2018-05-02 11:05:45,054 p=2668 u=root |  Environment : copy file ------------------------------------------------- 0.89s
2018-05-02 11:05:45,054 p=2668 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 0.80s
2018-05-02 11:05:45,054 p=2668 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.10s
2018-05-02 11:08:52,846 p=2755 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 11:08:52,905 p=2755 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 11:08:52,905 p=2755 u=root |  Wednesday 02 May 2018  11:08:52 +0800 (0:00:00.062)       0:00:00.062 ********* 
2018-05-02 11:09:04,274 p=2755 u=root |  ok: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 11:09:04,279 p=2755 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 11:09:04,280 p=2755 u=root |  Wednesday 02 May 2018  11:09:04 +0800 (0:00:11.374)       0:00:11.437 ********* 
2018-05-02 11:09:05,460 p=2755 u=root |  ok: [controller]
2018-05-02 11:09:05,464 p=2755 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 11:09:05,465 p=2755 u=root |  Wednesday 02 May 2018  11:09:05 +0800 (0:00:01.184)       0:00:12.622 ********* 
2018-05-02 11:09:06,319 p=2755 u=root |  ok: [controller]
2018-05-02 11:09:06,323 p=2755 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 11:09:06,323 p=2755 u=root |  Wednesday 02 May 2018  11:09:06 +0800 (0:00:00.858)       0:00:13.480 ********* 
2018-05-02 11:09:06,923 p=2755 u=root |  ok: [controller]
2018-05-02 11:09:06,927 p=2755 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 11:09:06,928 p=2755 u=root |  Wednesday 02 May 2018  11:09:06 +0800 (0:00:00.604)       0:00:14.085 ********* 
2018-05-02 11:10:27,751 p=2755 u=root |  changed: [controller]
2018-05-02 11:10:27,757 p=2755 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-05-02 11:10:27,758 p=2755 u=root |  Wednesday 02 May 2018  11:10:27 +0800 (0:01:20.829)       0:01:34.914 ********* 
2018-05-02 11:10:40,982 p=2755 u=root |  changed: [controller]
2018-05-02 11:10:40,987 p=2755 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 11:10:40,988 p=2755 u=root |  Wednesday 02 May 2018  11:10:40 +0800 (0:00:13.229)       0:01:48.144 ********* 
2018-05-02 11:10:58,332 p=2755 u=root |   [ERROR]: User interrupted execution

2018-05-02 11:11:46,552 p=2822 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 11:11:46,611 p=2822 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 11:11:46,612 p=2822 u=root |  Wednesday 02 May 2018  11:11:46 +0800 (0:00:00.063)       0:00:00.063 ********* 
2018-05-02 11:11:47,669 p=2822 u=root |  ok: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 11:11:47,672 p=2822 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 11:11:47,673 p=2822 u=root |  Wednesday 02 May 2018  11:11:47 +0800 (0:00:01.060)       0:00:01.124 ********* 
2018-05-02 11:11:48,485 p=2822 u=root |  ok: [controller]
2018-05-02 11:11:48,488 p=2822 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 11:11:48,489 p=2822 u=root |  Wednesday 02 May 2018  11:11:48 +0800 (0:00:00.816)       0:00:01.941 ********* 
2018-05-02 11:11:49,294 p=2822 u=root |  ok: [controller]
2018-05-02 11:11:49,296 p=2822 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 11:11:49,296 p=2822 u=root |  Wednesday 02 May 2018  11:11:49 +0800 (0:00:00.807)       0:00:02.748 ********* 
2018-05-02 11:11:49,855 p=2822 u=root |  ok: [controller]
2018-05-02 11:11:49,858 p=2822 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 11:11:49,858 p=2822 u=root |  Wednesday 02 May 2018  11:11:49 +0800 (0:00:00.561)       0:00:03.310 ********* 
2018-05-02 11:11:49,927 p=2822 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "Unable to find 'free_form=../files/mysql_secure_installation.exp' in expected paths."}
2018-05-02 11:11:49,930 p=2822 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 11:11:49,930 p=2822 u=root |  PLAY RECAP *********************************************************************
2018-05-02 11:11:49,930 p=2822 u=root |  controller                 : ok=4    changed=0    unreachable=0    failed=1   
2018-05-02 11:11:49,930 p=2822 u=root |  Wednesday 02 May 2018  11:11:49 +0800 (0:00:00.072)       0:00:03.382 ********* 
2018-05-02 11:11:49,930 p=2822 u=root |  =============================================================================== 
2018-05-02 11:11:49,931 p=2822 u=root |  Environment : install sql ----------------------------------------------- 1.06s
2018-05-02 11:11:49,931 p=2822 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 0.82s
2018-05-02 11:11:49,931 p=2822 u=root |  Environment : install expect -------------------------------------------- 0.81s
2018-05-02 11:11:49,931 p=2822 u=root |  Environment : copy file ------------------------------------------------- 0.56s
2018-05-02 11:11:49,931 p=2822 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.07s
2018-05-02 13:25:36,931 p=3038 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:25:36,991 p=3038 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 13:25:36,992 p=3038 u=root |  Wednesday 02 May 2018  13:25:36 +0800 (0:00:00.064)       0:00:00.064 ********* 
2018-05-02 13:25:56,032 p=3038 u=root |  failed: [controller] (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL']) => {"changed": false, "failed": true, "item": ["mariadb", "mariadb-server", "python2-PyMySQL"], "msg": "No package matching 'python2-PyMySQL' found available, installed or updated", "rc": 126, "results": ["No package matching 'python2-PyMySQL' found available, installed or updated"]}
2018-05-02 13:25:56,034 p=3038 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 13:25:56,034 p=3038 u=root |  PLAY RECAP *********************************************************************
2018-05-02 13:25:56,034 p=3038 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-02 13:25:56,034 p=3038 u=root |  Wednesday 02 May 2018  13:25:56 +0800 (0:00:19.042)       0:00:19.107 ********* 
2018-05-02 13:25:56,034 p=3038 u=root |  =============================================================================== 
2018-05-02 13:25:56,035 p=3038 u=root |  Environment : install sql ---------------------------------------------- 19.04s
2018-05-02 13:27:07,756 p=3060 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:27:07,813 p=3060 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 13:27:07,813 p=3060 u=root |  Wednesday 02 May 2018  13:27:07 +0800 (0:00:00.060)       0:00:00.060 ********* 
2018-05-02 13:27:19,605 p=3060 u=root |  failed: [controller] (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL']) => {"changed": false, "failed": true, "item": ["mariadb", "mariadb-server", "python2-PyMySQL"], "msg": "No package matching 'python2-PyMySQL' found available, installed or updated", "rc": 126, "results": ["No package matching 'python2-PyMySQL' found available, installed or updated"]}
2018-05-02 13:27:19,607 p=3060 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 13:27:19,607 p=3060 u=root |  PLAY RECAP *********************************************************************
2018-05-02 13:27:19,607 p=3060 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-02 13:27:19,608 p=3060 u=root |  Wednesday 02 May 2018  13:27:19 +0800 (0:00:11.794)       0:00:11.855 ********* 
2018-05-02 13:27:19,608 p=3060 u=root |  =============================================================================== 
2018-05-02 13:27:19,608 p=3060 u=root |  Environment : install sql ---------------------------------------------- 11.79s
2018-05-02 13:34:53,917 p=3168 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:34:53,980 p=3168 u=root |  TASK [Environment : set hostname] **********************************************
2018-05-02 13:34:53,980 p=3168 u=root |  Wednesday 02 May 2018  13:34:53 +0800 (0:00:00.067)       0:00:00.067 ********* 
2018-05-02 13:35:24,984 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:24,986 p=3168 u=root |  TASK [Environment : add host file] *********************************************
2018-05-02 13:35:24,986 p=3168 u=root |  Wednesday 02 May 2018  13:35:24 +0800 (0:00:31.006)       0:00:31.073 ********* 
2018-05-02 13:35:25,390 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:25,392 p=3168 u=root |  TASK [Environment : install chrony] ********************************************
2018-05-02 13:35:25,392 p=3168 u=root |  Wednesday 02 May 2018  13:35:25 +0800 (0:00:00.405)       0:00:31.479 ********* 
2018-05-02 13:35:28,920 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:28,922 p=3168 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 13:35:28,922 p=3168 u=root |  Wednesday 02 May 2018  13:35:28 +0800 (0:00:03.529)       0:00:35.009 ********* 
2018-05-02 13:35:29,188 p=3168 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 13:35:29,425 p=3168 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 13:35:29,675 p=3168 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 13:35:29,928 p=3168 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 13:35:29,930 p=3168 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 13:35:29,930 p=3168 u=root |  Wednesday 02 May 2018  13:35:29 +0800 (0:00:01.008)       0:00:36.017 ********* 
2018-05-02 13:35:30,178 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:30,181 p=3168 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-05-02 13:35:30,181 p=3168 u=root |  Wednesday 02 May 2018  13:35:30 +0800 (0:00:00.250)       0:00:36.268 ********* 
2018-05-02 13:35:31,264 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:31,268 p=3168 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-05-02 13:35:31,268 p=3168 u=root |  Wednesday 02 May 2018  13:35:31 +0800 (0:00:01.087)       0:00:37.355 ********* 
2018-05-02 13:35:33,660 p=3168 u=root |  changed: [controller]
2018-05-02 13:35:33,665 p=3168 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-05-02 13:35:33,665 p=3168 u=root |  Wednesday 02 May 2018  13:35:33 +0800 (0:00:02.396)       0:00:39.752 ********* 
2018-05-02 13:40:22,039 p=3168 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-02 13:40:22,041 p=3168 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 13:40:22,041 p=3168 u=root |  Wednesday 02 May 2018  13:40:22 +0800 (0:04:48.375)       0:05:28.128 ********* 
2018-05-02 13:41:01,787 p=3168 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 13:41:01,791 p=3168 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 13:41:01,792 p=3168 u=root |  Wednesday 02 May 2018  13:41:01 +0800 (0:00:39.750)       0:06:07.879 ********* 
2018-05-02 13:41:02,602 p=3168 u=root |  changed: [controller]
2018-05-02 13:41:02,604 p=3168 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 13:41:02,604 p=3168 u=root |  Wednesday 02 May 2018  13:41:02 +0800 (0:00:00.812)       0:06:08.691 ********* 
2018-05-02 13:41:02,799 p=3168 u=root |  fatal: [controller]: FAILED! => {"changed": true, "failed": true, "rc": 127, "stderr": "Shared connection to 172.16.52.17 closed.\r\n", "stdout": "/root/.ansible/tmp/ansible-tmp-1525239662.62-28248848795114/mysql_secure_installation.exp: line 24: warning: here-document at line 2 delimited by end-of-file (wanted `EOF')\r\n/root/.ansible/tmp/ansible-tmp-1525239662.62-28248848795114/mysql_secure_installation.exp: line 2: /usr/bin/expect: No such file or directory\r\n", "stdout_lines": ["/root/.ansible/tmp/ansible-tmp-1525239662.62-28248848795114/mysql_secure_installation.exp: line 24: warning: here-document at line 2 delimited by end-of-file (wanted `EOF')", "/root/.ansible/tmp/ansible-tmp-1525239662.62-28248848795114/mysql_secure_installation.exp: line 2: /usr/bin/expect: No such file or directory"]}
2018-05-02 13:41:02,801 p=3168 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 13:41:02,801 p=3168 u=root |  PLAY RECAP *********************************************************************
2018-05-02 13:41:02,801 p=3168 u=root |  controller                 : ok=10   changed=10   unreachable=0    failed=1   
2018-05-02 13:41:02,802 p=3168 u=root |  Wednesday 02 May 2018  13:41:02 +0800 (0:00:00.197)       0:06:08.889 ********* 
2018-05-02 13:41:02,802 p=3168 u=root |  =============================================================================== 
2018-05-02 13:41:02,802 p=3168 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 288.38s
2018-05-02 13:41:02,802 p=3168 u=root |  Environment : install sql ---------------------------------------------- 39.75s
2018-05-02 13:41:02,802 p=3168 u=root |  Environment : set hostname --------------------------------------------- 31.01s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : install chrony -------------------------------------------- 3.53s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : install centos-release-openstack-newton ------------------- 2.40s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : restart NTP ----------------------------------------------- 1.09s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.01s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 0.81s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : add host file --------------------------------------------- 0.41s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 0.25s
2018-05-02 13:41:02,803 p=3168 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.20s
2018-05-02 13:42:07,680 p=3358 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:42:07,738 p=3358 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 13:42:07,739 p=3358 u=root |  Wednesday 02 May 2018  13:42:07 +0800 (0:00:00.062)       0:00:00.062 ********* 
2018-05-02 13:42:18,927 p=3358 u=root |  ok: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 13:42:18,932 p=3358 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 13:42:18,933 p=3358 u=root |  Wednesday 02 May 2018  13:42:18 +0800 (0:00:11.193)       0:00:11.256 ********* 
2018-05-02 13:42:20,086 p=3358 u=root |  ok: [controller]
2018-05-02 13:42:20,090 p=3358 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 13:42:20,090 p=3358 u=root |  Wednesday 02 May 2018  13:42:20 +0800 (0:00:01.157)       0:00:12.413 ********* 
2018-05-02 13:42:24,249 p=3358 u=root |  changed: [controller]
2018-05-02 13:42:24,252 p=3358 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 13:42:24,252 p=3358 u=root |  Wednesday 02 May 2018  13:42:24 +0800 (0:00:04.161)       0:00:16.575 ********* 
2018-05-02 13:43:44,603 p=3358 u=root |  changed: [controller]
2018-05-02 13:43:44,605 p=3358 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-05-02 13:43:44,605 p=3358 u=root |  Wednesday 02 May 2018  13:43:44 +0800 (0:01:20.353)       0:01:36.929 ********* 
2018-05-02 13:43:57,652 p=3358 u=root |  changed: [controller]
2018-05-02 13:43:57,655 p=3358 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 13:43:57,656 p=3358 u=root |  Wednesday 02 May 2018  13:43:57 +0800 (0:00:13.050)       0:01:49.979 ********* 
2018-05-02 13:44:21,644 p=3358 u=root |   [ERROR]: User interrupted execution

2018-05-02 13:49:52,069 p=3441 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:49:52,127 p=3441 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 13:49:52,127 p=3441 u=root |  Wednesday 02 May 2018  13:49:52 +0800 (0:00:00.061)       0:00:00.061 ********* 
2018-05-02 13:50:03,071 p=3441 u=root |  changed: [controller]
2018-05-02 13:50:03,073 p=3441 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 13:50:03,073 p=3441 u=root |  Wednesday 02 May 2018  13:50:03 +0800 (0:00:10.946)       0:00:11.007 ********* 
2018-05-02 13:50:03,438 p=3441 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["chmod", "777", "mysql_secure_installation.exp", "&&", "./mysql_secure_installation.exp"], "delta": "0:00:00.004734", "end": "2018-05-02 13:50:04.375890", "failed": true, "rc": 1, "start": "2018-05-02 13:50:04.371156", "stderr": "chmod: cannot access &&: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with mode rather than running chmod"]}
2018-05-02 13:50:03,442 p=3441 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 13:50:03,442 p=3441 u=root |  PLAY RECAP *********************************************************************
2018-05-02 13:50:03,442 p=3441 u=root |  controller                 : ok=1    changed=1    unreachable=0    failed=1   
2018-05-02 13:50:03,442 p=3441 u=root |  Wednesday 02 May 2018  13:50:03 +0800 (0:00:00.369)       0:00:11.377 ********* 
2018-05-02 13:50:03,443 p=3441 u=root |  =============================================================================== 
2018-05-02 13:50:03,443 p=3441 u=root |  Environment : copy file ------------------------------------------------ 10.95s
2018-05-02 13:50:03,443 p=3441 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.37s
2018-05-02 13:51:39,082 p=3496 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 13:51:39,138 p=3496 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 13:51:39,138 p=3496 u=root |  Wednesday 02 May 2018  13:51:39 +0800 (0:00:00.060)       0:00:00.060 ********* 
2018-05-02 13:51:49,899 p=3496 u=root |  ok: [controller]
2018-05-02 13:51:49,902 p=3496 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 13:51:49,902 p=3496 u=root |  Wednesday 02 May 2018  13:51:49 +0800 (0:00:10.764)       0:00:10.824 ********* 
2018-05-02 13:51:50,258 p=3496 u=root |  changed: [controller]
2018-05-02 13:51:50,259 p=3496 u=root |   [WARNING]: Consider using file module with mode rather than running chmod

2018-05-02 13:51:50,261 p=3496 u=root |  TASK [Environment : xxx] *******************************************************
2018-05-02 13:51:50,261 p=3496 u=root |  Wednesday 02 May 2018  13:51:50 +0800 (0:00:00.358)       0:00:11.183 ********* 
2018-05-02 13:51:50,590 p=3496 u=root |  changed: [controller]
2018-05-02 13:51:50,592 p=3496 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-05-02 13:51:50,592 p=3496 u=root |  Wednesday 02 May 2018  13:51:50 +0800 (0:00:00.331)       0:00:11.514 ********* 
2018-05-02 13:51:51,781 p=3496 u=root |  ok: [controller]
2018-05-02 13:51:51,786 p=3496 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 13:51:51,786 p=3496 u=root |  Wednesday 02 May 2018  13:51:51 +0800 (0:00:01.193)       0:00:12.708 ********* 
2018-05-02 13:51:52,709 p=3496 u=root |  ok: [controller]
2018-05-02 13:51:52,711 p=3496 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-05-02 13:51:52,712 p=3496 u=root |  Wednesday 02 May 2018  13:51:52 +0800 (0:00:00.925)       0:00:13.633 ********* 
2018-05-02 13:51:56,621 p=3496 u=root |  changed: [controller]
2018-05-02 13:51:56,623 p=3496 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 13:51:56,623 p=3496 u=root |  Wednesday 02 May 2018  13:51:56 +0800 (0:00:03.911)       0:00:17.545 ********* 
2018-05-02 13:51:59,158 p=3496 u=root |  changed: [controller]
2018-05-02 13:51:59,160 p=3496 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 13:51:59,160 p=3496 u=root |  Wednesday 02 May 2018  13:51:59 +0800 (0:00:02.537)       0:00:20.082 ********* 
2018-05-02 13:52:00,883 p=3496 u=root |  changed: [controller]
2018-05-02 13:52:00,888 p=3496 u=root |  TASK [Environment : install Memcached] *****************************************
2018-05-02 13:52:00,888 p=3496 u=root |  Wednesday 02 May 2018  13:52:00 +0800 (0:00:01.727)       0:00:21.810 ********* 
2018-05-02 13:52:04,624 p=3496 u=root |   [ERROR]: User interrupted execution

2018-05-02 14:09:11,379 p=3763 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:09:11,445 p=3763 u=root |  TASK [Environment : set hostname] **********************************************
2018-05-02 14:09:11,446 p=3763 u=root |  Wednesday 02 May 2018  14:09:11 +0800 (0:00:00.070)       0:00:00.070 ********* 
2018-05-02 14:09:22,528 p=3763 u=root |  changed: [controller]
2018-05-02 14:09:22,530 p=3763 u=root |  TASK [Environment : add host file] *********************************************
2018-05-02 14:09:22,530 p=3763 u=root |  Wednesday 02 May 2018  14:09:22 +0800 (0:00:11.084)       0:00:11.155 ********* 
2018-05-02 14:09:22,981 p=3763 u=root |  changed: [controller]
2018-05-02 14:09:22,983 p=3763 u=root |  TASK [Environment : install chrony] ********************************************
2018-05-02 14:09:22,983 p=3763 u=root |  Wednesday 02 May 2018  14:09:22 +0800 (0:00:00.452)       0:00:11.607 ********* 
2018-05-02 14:10:17,463 p=3763 u=root |  changed: [controller]
2018-05-02 14:10:17,468 p=3763 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 14:10:17,468 p=3763 u=root |  Wednesday 02 May 2018  14:10:17 +0800 (0:00:54.485)       0:01:06.093 ********* 
2018-05-02 14:10:17,837 p=3763 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 14:10:18,131 p=3763 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 14:10:18,420 p=3763 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 14:10:18,702 p=3763 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 14:10:18,705 p=3763 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 14:10:18,706 p=3763 u=root |  Wednesday 02 May 2018  14:10:18 +0800 (0:00:01.237)       0:01:07.330 ********* 
2018-05-02 14:10:19,005 p=3763 u=root |  changed: [controller]
2018-05-02 14:10:19,007 p=3763 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-05-02 14:10:19,007 p=3763 u=root |  Wednesday 02 May 2018  14:10:19 +0800 (0:00:00.301)       0:01:07.632 ********* 
2018-05-02 14:10:20,159 p=3763 u=root |  changed: [controller]
2018-05-02 14:10:20,161 p=3763 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-05-02 14:10:20,162 p=3763 u=root |  Wednesday 02 May 2018  14:10:20 +0800 (0:00:01.154)       0:01:08.786 ********* 
2018-05-02 14:10:23,454 p=3763 u=root |  changed: [controller]
2018-05-02 14:10:23,456 p=3763 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-05-02 14:10:23,456 p=3763 u=root |  Wednesday 02 May 2018  14:10:23 +0800 (0:00:03.294)       0:01:12.081 ********* 
2018-05-02 14:20:13,735 p=3763 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-02 14:20:13,737 p=3763 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 14:20:13,738 p=3763 u=root |  Wednesday 02 May 2018  14:20:13 +0800 (0:09:50.281)       0:11:02.362 ********* 
2018-05-02 14:21:01,451 p=3763 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 14:21:01,454 p=3763 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 14:21:01,454 p=3763 u=root |  Wednesday 02 May 2018  14:21:01 +0800 (0:00:47.716)       0:11:50.078 ********* 
2018-05-02 14:21:02,420 p=3763 u=root |  changed: [controller]
2018-05-02 14:21:02,422 p=3763 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 14:21:02,423 p=3763 u=root |  Wednesday 02 May 2018  14:21:02 +0800 (0:00:00.968)       0:11:51.047 ********* 
2018-05-02 14:21:07,671 p=3763 u=root |  changed: [controller]
2018-05-02 14:21:07,675 p=3763 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 14:21:07,676 p=3763 u=root |  Wednesday 02 May 2018  14:21:07 +0800 (0:00:05.252)       0:11:56.300 ********* 
2018-05-02 14:21:08,278 p=3763 u=root |  changed: [controller]
2018-05-02 14:21:08,282 p=3763 u=root |  TASK [Environment : chmod] *****************************************************
2018-05-02 14:21:08,283 p=3763 u=root |  Wednesday 02 May 2018  14:21:08 +0800 (0:00:00.607)       0:11:56.907 ********* 
2018-05-02 14:21:08,872 p=3763 u=root |  changed: [controller]
2018-05-02 14:21:08,877 p=3763 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 14:21:08,877 p=3763 u=root |  Wednesday 02 May 2018  14:21:08 +0800 (0:00:00.594)       0:11:57.501 ********* 
2018-05-02 14:22:29,634 p=3763 u=root |  changed: [controller]
2018-05-02 14:22:29,638 p=3763 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-05-02 14:22:29,639 p=3763 u=root |  Wednesday 02 May 2018  14:22:29 +0800 (0:01:20.761)       0:13:18.263 ********* 
2018-05-02 14:22:41,976 p=3763 u=root |  changed: [controller]
2018-05-02 14:22:41,978 p=3763 u=root |  TASK [Environment : del mysql_secure_installation.exp] *************************
2018-05-02 14:22:41,978 p=3763 u=root |  Wednesday 02 May 2018  14:22:41 +0800 (0:00:12.339)       0:13:30.603 ********* 
2018-05-02 14:22:42,224 p=3763 u=root |  changed: [controller]
2018-05-02 14:22:42,226 p=3763 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 14:22:42,227 p=3763 u=root |  Wednesday 02 May 2018  14:22:42 +0800 (0:00:00.248)       0:13:30.851 ********* 
2018-05-02 14:23:05,847 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:05,849 p=3763 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-05-02 14:23:05,849 p=3763 u=root |  Wednesday 02 May 2018  14:23:05 +0800 (0:00:23.622)       0:13:54.474 ********* 
2018-05-02 14:23:09,655 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:09,659 p=3763 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 14:23:09,660 p=3763 u=root |  Wednesday 02 May 2018  14:23:09 +0800 (0:00:03.810)       0:13:58.284 ********* 
2018-05-02 14:23:11,848 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:11,851 p=3763 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 14:23:11,851 p=3763 u=root |  Wednesday 02 May 2018  14:23:11 +0800 (0:00:02.191)       0:14:00.476 ********* 
2018-05-02 14:23:13,704 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:13,706 p=3763 u=root |  TASK [Environment : install Memcached] *****************************************
2018-05-02 14:23:13,706 p=3763 u=root |  Wednesday 02 May 2018  14:23:13 +0800 (0:00:01.854)       0:14:02.331 ********* 
2018-05-02 14:23:18,887 p=3763 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-05-02 14:23:18,889 p=3763 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-05-02 14:23:18,889 p=3763 u=root |  Wednesday 02 May 2018  14:23:18 +0800 (0:00:05.182)       0:14:07.513 ********* 
2018-05-02 14:23:19,175 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:19,177 p=3763 u=root |  TASK [Environment : restart memcached] *****************************************
2018-05-02 14:23:19,177 p=3763 u=root |  Wednesday 02 May 2018  14:23:19 +0800 (0:00:00.288)       0:14:07.801 ********* 
2018-05-02 14:23:19,881 p=3763 u=root |  changed: [controller]
2018-05-02 14:23:19,883 p=3763 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:23:19,883 p=3763 u=root |  Wednesday 02 May 2018  14:23:19 +0800 (0:00:00.706)       0:14:08.508 ********* 
2018-05-02 14:23:53,864 p=3763 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:23:53,868 p=3763 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 14:23:53,868 p=3763 u=root |  Wednesday 02 May 2018  14:23:53 +0800 (0:00:33.984)       0:14:42.493 ********* 
2018-05-02 14:23:54,296 p=3763 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "unable to find /root/.my.cnf. Exception message: (1045, \"Access denied for user 'root'@'localhost' (using password: YES)\")"}
2018-05-02 14:23:54,298 p=3763 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:23:54,298 p=3763 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:23:54,298 p=3763 u=root |  controller                 : ok=24   changed=24   unreachable=0    failed=1   
2018-05-02 14:23:54,298 p=3763 u=root |  Wednesday 02 May 2018  14:23:54 +0800 (0:00:00.430)       0:14:42.923 ********* 
2018-05-02 14:23:54,299 p=3763 u=root |  =============================================================================== 
2018-05-02 14:23:54,299 p=3763 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 590.28s
2018-05-02 14:23:54,299 p=3763 u=root |  Environment : expect the mysql_secure_installation.exp ----------------- 80.76s
2018-05-02 14:23:54,299 p=3763 u=root |  Environment : install chrony ------------------------------------------- 54.49s
2018-05-02 14:23:54,299 p=3763 u=root |  Environment : install sql ---------------------------------------------- 47.72s
2018-05-02 14:23:54,299 p=3763 u=root |  Identity : install depends --------------------------------------------- 33.98s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : install rabbitmq ----------------------------------------- 23.62s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : restart mariadb ------------------------------------------ 12.34s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : set hostname --------------------------------------------- 11.08s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : install expect -------------------------------------------- 5.25s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : install Memcached ----------------------------------------- 5.18s
2018-05-02 14:23:54,300 p=3763 u=root |  Environment : start rabbitmq-server ------------------------------------- 3.81s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : install centos-release-openstack-newton ------------------- 3.29s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : useradd openstack ----------------------------------------- 2.19s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : useradd openstack ----------------------------------------- 1.85s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : change the /etc/chrony.conf file -------------------------- 1.24s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : restart NTP ----------------------------------------------- 1.15s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 0.97s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : restart memcached ----------------------------------------- 0.71s
2018-05-02 14:23:54,301 p=3763 u=root |  Environment : copy file ------------------------------------------------- 0.61s
2018-05-02 14:23:54,302 p=3763 u=root |  Environment : chmod ----------------------------------------------------- 0.59s
2018-05-02 14:24:29,750 p=3975 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:24:29,809 p=3975 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 14:24:29,809 p=3975 u=root |  Wednesday 02 May 2018  14:24:29 +0800 (0:00:00.063)       0:00:00.063 ********* 
2018-05-02 14:24:30,867 p=3975 u=root |  ok: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 14:24:30,872 p=3975 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 14:24:30,873 p=3975 u=root |  Wednesday 02 May 2018  14:24:30 +0800 (0:00:01.063)       0:00:01.127 ********* 
2018-05-02 14:24:31,957 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:31,961 p=3975 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 14:24:31,961 p=3975 u=root |  Wednesday 02 May 2018  14:24:31 +0800 (0:00:01.088)       0:00:02.215 ********* 
2018-05-02 14:24:32,752 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:32,756 p=3975 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 14:24:32,757 p=3975 u=root |  Wednesday 02 May 2018  14:24:32 +0800 (0:00:00.795)       0:00:03.010 ********* 
2018-05-02 14:24:33,649 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:33,653 p=3975 u=root |  TASK [Environment : chmod] *****************************************************
2018-05-02 14:24:33,653 p=3975 u=root |  Wednesday 02 May 2018  14:24:33 +0800 (0:00:00.896)       0:00:03.907 ********* 
2018-05-02 14:24:33,950 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:33,954 p=3975 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 14:24:33,955 p=3975 u=root |  Wednesday 02 May 2018  14:24:33 +0800 (0:00:00.301)       0:00:04.209 ********* 
2018-05-02 14:24:34,671 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:34,674 p=3975 u=root |  TASK [Environment : restart mariadb] *******************************************
2018-05-02 14:24:34,674 p=3975 u=root |  Wednesday 02 May 2018  14:24:34 +0800 (0:00:00.719)       0:00:04.928 ********* 
2018-05-02 14:24:35,781 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:35,782 p=3975 u=root |  TASK [Environment : del mysql_secure_installation.exp] *************************
2018-05-02 14:24:35,783 p=3975 u=root |  Wednesday 02 May 2018  14:24:35 +0800 (0:00:01.108)       0:00:06.037 ********* 
2018-05-02 14:24:36,059 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:36,061 p=3975 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 14:24:36,062 p=3975 u=root |  Wednesday 02 May 2018  14:24:36 +0800 (0:00:00.278)       0:00:06.316 ********* 
2018-05-02 14:24:36,852 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:36,854 p=3975 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-05-02 14:24:36,854 p=3975 u=root |  Wednesday 02 May 2018  14:24:36 +0800 (0:00:00.792)       0:00:07.108 ********* 
2018-05-02 14:24:37,569 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:37,573 p=3975 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 14:24:37,573 p=3975 u=root |  Wednesday 02 May 2018  14:24:37 +0800 (0:00:00.718)       0:00:07.827 ********* 
2018-05-02 14:24:39,698 p=3975 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["rabbitmqctl", "add_user", "openstack", "123456"], "delta": "0:00:01.810461", "end": "2018-05-02 14:24:40.658398", "failed": true, "rc": 2, "start": "2018-05-02 14:24:38.847937", "stderr": "Error: user_already_exists: openstack", "stdout": "Creating user \"openstack\" ...", "stdout_lines": ["Creating user \"openstack\" ..."], "warnings": []}
2018-05-02 14:24:39,698 p=3975 u=root |  ...ignoring
2018-05-02 14:24:39,700 p=3975 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 14:24:39,700 p=3975 u=root |  Wednesday 02 May 2018  14:24:39 +0800 (0:00:02.126)       0:00:09.954 ********* 
2018-05-02 14:24:41,591 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:41,595 p=3975 u=root |  TASK [Environment : install Memcached] *****************************************
2018-05-02 14:24:41,595 p=3975 u=root |  Wednesday 02 May 2018  14:24:41 +0800 (0:00:01.894)       0:00:11.849 ********* 
2018-05-02 14:24:42,463 p=3975 u=root |  ok: [controller] => (item=[u'memcached', u'python-memcached'])
2018-05-02 14:24:42,467 p=3975 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-05-02 14:24:42,468 p=3975 u=root |  Wednesday 02 May 2018  14:24:42 +0800 (0:00:00.872)       0:00:12.722 ********* 
2018-05-02 14:24:43,086 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:43,090 p=3975 u=root |  TASK [Environment : restart memcached] *****************************************
2018-05-02 14:24:43,090 p=3975 u=root |  Wednesday 02 May 2018  14:24:43 +0800 (0:00:00.622)       0:00:13.344 ********* 
2018-05-02 14:24:43,782 p=3975 u=root |  ok: [controller]
2018-05-02 14:24:43,785 p=3975 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:24:43,785 p=3975 u=root |  Wednesday 02 May 2018  14:24:43 +0800 (0:00:00.694)       0:00:14.039 ********* 
2018-05-02 14:24:44,354 p=3975 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:24:44,356 p=3975 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 14:24:44,356 p=3975 u=root |  Wednesday 02 May 2018  14:24:44 +0800 (0:00:00.570)       0:00:14.610 ********* 
2018-05-02 14:24:44,782 p=3975 u=root |  changed: [controller]
2018-05-02 14:24:44,784 p=3975 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-05-02 14:24:44,784 p=3975 u=root |  Wednesday 02 May 2018  14:24:44 +0800 (0:00:00.428)       0:00:15.038 ********* 
2018-05-02 14:24:45,226 p=3975 u=root |  changed: [controller] => (item=localhost)
2018-05-02 14:24:45,482 p=3975 u=root |  changed: [controller] => (item=%)
2018-05-02 14:24:45,484 p=3975 u=root |  TASK [Identity : Install packages] *********************************************
2018-05-02 14:24:45,484 p=3975 u=root |  Wednesday 02 May 2018  14:24:45 +0800 (0:00:00.700)       0:00:15.738 ********* 
2018-05-02 14:25:17,973 p=3975 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-02 14:25:17,977 p=3975 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-05-02 14:25:17,977 p=3975 u=root |  Wednesday 02 May 2018  14:25:17 +0800 (0:00:32.492)       0:00:48.231 ********* 
2018-05-02 14:25:18,256 p=3975 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-05-02 14:25:18,494 p=3975 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-05-02 14:25:18,498 p=3975 u=root |  TASK [Identity : populate the identity service] ********************************
2018-05-02 14:25:18,498 p=3975 u=root |  Wednesday 02 May 2018  14:25:18 +0800 (0:00:00.520)       0:00:48.752 ********* 
2018-05-02 14:25:23,699 p=3975 u=root |  changed: [controller]
2018-05-02 14:25:23,701 p=3975 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-02 14:25:23,703 p=3975 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:25:23,703 p=3975 u=root |  Wednesday 02 May 2018  14:25:23 +0800 (0:00:05.204)       0:00:53.957 ********* 
2018-05-02 14:25:25,014 p=3975 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["keystone-manage", "fernet_setup", "--keystone-user", "keystone", "--keystone-group", "keystone", "keystone-manage", "credential_setup", "--keystone-user", "keystone", "--keystone-group", "keystone"], "delta": "0:00:01.066051", "end": "2018-05-02 14:25:25.986392", "failed": true, "rc": 2, "start": "2018-05-02 14:25:24.920341", "stderr": "usage: keystone-manage [bootstrap|credential_migrate|credential_rotate|credential_setup|db_sync|db_version|doctor|domain_config_upload|fernet_rotate|fernet_setup|mapping_populate|mapping_purge|mapping_engine|pki_setup|saml_idp_metadata|token_flush]\nkeystone-manage: error: unrecognized arguments: keystone-manage credential_setup", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:25:25,016 p=3975 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:25:25,016 p=3975 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:25:25,017 p=3975 u=root |  controller                 : ok=21   changed=11   unreachable=0    failed=1   
2018-05-02 14:25:25,017 p=3975 u=root |  Wednesday 02 May 2018  14:25:25 +0800 (0:00:01.314)       0:00:55.271 ********* 
2018-05-02 14:25:25,017 p=3975 u=root |  =============================================================================== 
2018-05-02 14:25:25,017 p=3975 u=root |  Identity : Install packages -------------------------------------------- 32.49s
2018-05-02 14:25:25,018 p=3975 u=root |  Identity : populate the identity service -------------------------------- 5.20s
2018-05-02 14:25:25,018 p=3975 u=root |  Environment : useradd openstack ----------------------------------------- 2.13s
2018-05-02 14:25:25,018 p=3975 u=root |  Environment : useradd openstack ----------------------------------------- 1.90s
2018-05-02 14:25:25,018 p=3975 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.31s
2018-05-02 14:25:25,018 p=3975 u=root |  Environment : restart mariadb ------------------------------------------- 1.11s
2018-05-02 14:25:25,018 p=3975 u=root |  Environment : add mariadb_openstack.cnf file ---------------------------- 1.09s
2018-05-02 14:25:25,018 p=3975 u=root |  Environment : install sql ----------------------------------------------- 1.06s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : copy file ------------------------------------------------- 0.90s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : install Memcached ----------------------------------------- 0.87s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : install expect -------------------------------------------- 0.80s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : install rabbitmq ------------------------------------------ 0.79s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : start rabbitmq-server ------------------------------------- 0.72s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : expect the mysql_secure_installation.exp ------------------ 0.72s
2018-05-02 14:25:25,019 p=3975 u=root |  Identity : Grant access to the DB for keystone -------------------------- 0.70s
2018-05-02 14:25:25,019 p=3975 u=root |  Environment : restart memcached ----------------------------------------- 0.69s
2018-05-02 14:25:25,020 p=3975 u=root |  Environment : modify the /etc/sysconfig/memcached file ------------------ 0.62s
2018-05-02 14:25:25,020 p=3975 u=root |  Identity : install depends ---------------------------------------------- 0.57s
2018-05-02 14:25:25,020 p=3975 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 0.52s
2018-05-02 14:25:25,020 p=3975 u=root |  Identity : create keystone database ------------------------------------- 0.43s
2018-05-02 14:28:42,217 p=4206 u=root |   [WARNING]: While constructing a mapping from /root/openstack/openstack-
ansible/playbooks/roles/Identity/tasks/sql.yml, line 38, column 3, found a duplicate dict key
(command). Using last defined value only.

2018-05-02 14:28:42,253 p=4206 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:28:42,339 p=4206 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:28:42,339 p=4206 u=root |  Wednesday 02 May 2018  14:28:42 +0800 (0:00:00.091)       0:00:00.091 ********* 
2018-05-02 14:28:53,560 p=4206 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:28:53,562 p=4206 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:28:53,562 p=4206 u=root |  Wednesday 02 May 2018  14:28:53 +0800 (0:00:11.222)       0:00:11.313 ********* 
2018-05-02 14:28:55,370 p=4206 u=root |  changed: [controller]
2018-05-02 14:28:55,372 p=4206 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 14:28:55,373 p=4206 u=root |  Wednesday 02 May 2018  14:28:55 +0800 (0:00:01.810)       0:00:13.124 ********* 
2018-05-02 14:28:57,445 p=4206 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["keystone-manage", "bootstrap", "--bootstrap-password", "123456", "--bootstrap-admin-url", "http://controller:35357/v3/", "--bootstrap-internal-url", "http://controller:35357/v3/", "--bootstrap-public-url", "http://controller:5000/v3/", "--bootstrap-region-id", "RegionOne"], "delta": "0:00:01.827001", "end": "2018-05-02 14:28:58.429779", "failed": true, "rc": 1, "start": "2018-05-02 14:28:56.602778", "stderr": "/etc/keystone/fernet-keys/ does not exist", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:28:57,447 p=4206 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:28:57,447 p=4206 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:28:57,447 p=4206 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-02 14:28:57,448 p=4206 u=root |  Wednesday 02 May 2018  14:28:57 +0800 (0:00:02.075)       0:00:15.199 ********* 
2018-05-02 14:28:57,448 p=4206 u=root |  =============================================================================== 
2018-05-02 14:28:57,448 p=4206 u=root |  Identity : install depends --------------------------------------------- 11.22s
2018-05-02 14:28:57,448 p=4206 u=root |  Identity : Bootstrap the Identity service ------------------------------- 2.08s
2018-05-02 14:28:57,448 p=4206 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.81s
2018-05-02 14:31:31,317 p=4268 u=root |   [WARNING]: While constructing a mapping from /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml, line 38, column 3, found a duplicate dict key (command). Using last defined value only.

2018-05-02 14:31:31,327 p=4268 u=root |   [WARNING]: While constructing a mapping from /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml, line 7, column 3, found a duplicate dict key (command). Using last defined value only.

2018-05-02 14:31:31,351 p=4268 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:31:31,399 p=4268 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:31:31,399 p=4268 u=root |  Wednesday 02 May 2018  14:31:31 +0800 (0:00:00.052)       0:00:00.052 ********* 
2018-05-02 14:31:42,585 p=4268 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:31:42,589 p=4268 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:31:42,590 p=4268 u=root |  Wednesday 02 May 2018  14:31:42 +0800 (0:00:11.190)       0:00:11.243 ********* 
2018-05-02 14:31:44,234 p=4268 u=root |  changed: [controller]
2018-05-02 14:31:44,238 p=4268 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 14:31:44,239 p=4268 u=root |  Wednesday 02 May 2018  14:31:44 +0800 (0:00:01.648)       0:00:12.891 ********* 
2018-05-02 14:31:46,698 p=4268 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["keystone-manage", "bootstrap", "--bootstrap-password", "123456", "--bootstrap-admin-url", "http://controller:35357/v3/", "--bootstrap-internal-url", "http://controller:35357/v3/", "--bootstrap-public-url", "http://controller:5000/v3/", "--bootstrap-region-id", "RegionOne"], "delta": "0:00:02.218393", "end": "2018-05-02 14:31:47.684726", "failed": true, "rc": 1, "start": "2018-05-02 14:31:45.466333", "stderr": "/etc/keystone/fernet-keys/ does not exist", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:31:46,701 p=4268 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:31:46,701 p=4268 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:31:46,701 p=4268 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-02 14:31:46,701 p=4268 u=root |  Wednesday 02 May 2018  14:31:46 +0800 (0:00:02.462)       0:00:15.354 ********* 
2018-05-02 14:31:46,701 p=4268 u=root |  =============================================================================== 
2018-05-02 14:31:46,702 p=4268 u=root |  Identity : install depends --------------------------------------------- 11.19s
2018-05-02 14:31:46,702 p=4268 u=root |  Identity : Bootstrap the Identity service ------------------------------- 2.46s
2018-05-02 14:31:46,702 p=4268 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.65s
2018-05-02 14:37:51,279 p=4321 u=root |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml': line 46, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

--bootstrap-admin-url http://controller:35357/v3/
--bootstrap-internal-url http://controller:35357/v3/
^ here

2018-05-02 14:39:33,755 p=4368 u=root |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/sql.yml': line 46, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

-bootstrap-admin-url http://controller:35357/v3/ -
-bootstrap-internal-url http://controller:35357/v3/ -
^ here

2018-05-02 14:40:55,193 p=4391 u=root |   [WARNING]: While constructing a mapping from /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml, line 7, column 3, found
a duplicate dict key (command). Using last defined value only.

2018-05-02 14:40:55,219 p=4391 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:40:55,271 p=4391 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:40:55,271 p=4391 u=root |  Wednesday 02 May 2018  14:40:55 +0800 (0:00:00.057)       0:00:00.057 ********* 
2018-05-02 14:41:06,156 p=4391 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:41:06,159 p=4391 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 14:41:06,159 p=4391 u=root |  Wednesday 02 May 2018  14:41:06 +0800 (0:00:10.887)       0:00:10.945 ********* 
2018-05-02 14:41:06,551 p=4391 u=root |  ok: [controller]
2018-05-02 14:41:06,553 p=4391 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-05-02 14:41:06,553 p=4391 u=root |  Wednesday 02 May 2018  14:41:06 +0800 (0:00:00.394)       0:00:11.339 ********* 
2018-05-02 14:41:06,957 p=4391 u=root |  ok: [controller] => (item=localhost)
2018-05-02 14:41:07,157 p=4391 u=root |  ok: [controller] => (item=%)
2018-05-02 14:41:07,159 p=4391 u=root |  TASK [Identity : Install packages] *********************************************
2018-05-02 14:41:07,159 p=4391 u=root |  Wednesday 02 May 2018  14:41:07 +0800 (0:00:00.605)       0:00:11.945 ********* 
2018-05-02 14:41:07,660 p=4391 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-02 14:41:07,664 p=4391 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-05-02 14:41:07,665 p=4391 u=root |  Wednesday 02 May 2018  14:41:07 +0800 (0:00:00.505)       0:00:12.451 ********* 
2018-05-02 14:41:08,140 p=4391 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-05-02 14:41:08,434 p=4391 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-05-02 14:41:08,437 p=4391 u=root |  TASK [Identity : populate the identity service] ********************************
2018-05-02 14:41:08,437 p=4391 u=root |  Wednesday 02 May 2018  14:41:08 +0800 (0:00:00.772)       0:00:13.223 ********* 
2018-05-02 14:41:11,098 p=4391 u=root |  changed: [controller]
2018-05-02 14:41:11,098 p=4391 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-02 14:41:11,100 p=4391 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:41:11,100 p=4391 u=root |  Wednesday 02 May 2018  14:41:11 +0800 (0:00:02.663)       0:00:15.886 ********* 
2018-05-02 14:41:12,755 p=4391 u=root |  changed: [controller]
2018-05-02 14:41:12,759 p=4391 u=root |  TASK [Identity : and] **********************************************************
2018-05-02 14:41:12,759 p=4391 u=root |  Wednesday 02 May 2018  14:41:12 +0800 (0:00:01.658)       0:00:17.545 ********* 
2018-05-02 14:41:14,171 p=4391 u=root |  changed: [controller]
2018-05-02 14:41:14,173 p=4391 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 14:41:14,174 p=4391 u=root |  Wednesday 02 May 2018  14:41:14 +0800 (0:00:01.414)       0:00:18.960 ********* 
2018-05-02 14:41:16,163 p=4391 u=root |  changed: [controller]
2018-05-02 14:41:16,165 p=4391 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] *******************
2018-05-02 14:41:16,165 p=4391 u=root |  Wednesday 02 May 2018  14:41:16 +0800 (0:00:01.991)       0:00:20.951 ********* 
2018-05-02 14:41:16,431 p=4391 u=root |  changed: [controller]
2018-05-02 14:41:16,434 p=4391 u=root |  TASK [Identity : create link file] *********************************************
2018-05-02 14:41:16,435 p=4391 u=root |  Wednesday 02 May 2018  14:41:16 +0800 (0:00:00.269)       0:00:21.221 ********* 
2018-05-02 14:41:16,801 p=4391 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "gid": 0, "group": "root", "mode": "0755", "msg": "refusing to convert between directory and link for /etc/httpd/conf.d/", "owner": "root", "path": "/etc/httpd/conf.d/", "size": 78, "state": "directory", "uid": 0}
2018-05-02 14:41:16,804 p=4391 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:41:16,804 p=4391 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:41:16,804 p=4391 u=root |  controller                 : ok=10   changed=6    unreachable=0    failed=1   
2018-05-02 14:41:16,804 p=4391 u=root |  Wednesday 02 May 2018  14:41:16 +0800 (0:00:00.369)       0:00:21.591 ********* 
2018-05-02 14:41:16,805 p=4391 u=root |  =============================================================================== 
2018-05-02 14:41:16,805 p=4391 u=root |  Identity : install depends --------------------------------------------- 10.89s
2018-05-02 14:41:16,805 p=4391 u=root |  Identity : populate the identity service -------------------------------- 2.66s
2018-05-02 14:41:16,805 p=4391 u=root |  Identity : Bootstrap the Identity service ------------------------------- 1.99s
2018-05-02 14:41:16,805 p=4391 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.66s
2018-05-02 14:41:16,805 p=4391 u=root |  Identity : and ---------------------------------------------------------- 1.41s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 0.77s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : Grant access to the DB for keystone -------------------------- 0.61s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : Install packages --------------------------------------------- 0.51s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : create keystone database ------------------------------------- 0.39s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : create link file --------------------------------------------- 0.37s
2018-05-02 14:41:16,806 p=4391 u=root |  Identity : modify the /etc/httpd/conf/httpd.conf file ------------------- 0.27s
2018-05-02 14:43:46,616 p=4509 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:43:46,666 p=4509 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:43:46,666 p=4509 u=root |  Wednesday 02 May 2018  14:43:46 +0800 (0:00:00.055)       0:00:00.055 ********* 
2018-05-02 14:43:57,913 p=4509 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:43:57,917 p=4509 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 14:43:57,917 p=4509 u=root |  Wednesday 02 May 2018  14:43:57 +0800 (0:00:11.250)       0:00:11.306 ********* 
2018-05-02 14:43:58,582 p=4509 u=root |  ok: [controller]
2018-05-02 14:43:58,586 p=4509 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-05-02 14:43:58,586 p=4509 u=root |  Wednesday 02 May 2018  14:43:58 +0800 (0:00:00.669)       0:00:11.975 ********* 
2018-05-02 14:43:59,250 p=4509 u=root |  ok: [controller] => (item=localhost)
2018-05-02 14:43:59,514 p=4509 u=root |  ok: [controller] => (item=%)
2018-05-02 14:43:59,516 p=4509 u=root |  TASK [Identity : Install packages] *********************************************
2018-05-02 14:43:59,516 p=4509 u=root |  Wednesday 02 May 2018  14:43:59 +0800 (0:00:00.929)       0:00:12.905 ********* 
2018-05-02 14:44:00,026 p=4509 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-02 14:44:00,028 p=4509 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-05-02 14:44:00,028 p=4509 u=root |  Wednesday 02 May 2018  14:44:00 +0800 (0:00:00.511)       0:00:13.417 ********* 
2018-05-02 14:44:00,504 p=4509 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-05-02 14:44:00,740 p=4509 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-05-02 14:44:00,744 p=4509 u=root |  TASK [Identity : populate the identity service] ********************************
2018-05-02 14:44:00,744 p=4509 u=root |  Wednesday 02 May 2018  14:44:00 +0800 (0:00:00.716)       0:00:14.133 ********* 
2018-05-02 14:44:02,603 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:02,604 p=4509 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-02 14:44:02,606 p=4509 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:44:02,606 p=4509 u=root |  Wednesday 02 May 2018  14:44:02 +0800 (0:00:01.861)       0:00:15.995 ********* 
2018-05-02 14:44:04,225 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:04,229 p=4509 u=root |  TASK [Identity : and] **********************************************************
2018-05-02 14:44:04,229 p=4509 u=root |  Wednesday 02 May 2018  14:44:04 +0800 (0:00:01.623)       0:00:17.618 ********* 
2018-05-02 14:44:05,779 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:05,786 p=4509 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 14:44:05,787 p=4509 u=root |  Wednesday 02 May 2018  14:44:05 +0800 (0:00:01.557)       0:00:19.176 ********* 
2018-05-02 14:44:08,199 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:08,201 p=4509 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] *******************
2018-05-02 14:44:08,201 p=4509 u=root |  Wednesday 02 May 2018  14:44:08 +0800 (0:00:02.413)       0:00:21.590 ********* 
2018-05-02 14:44:08,452 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:08,455 p=4509 u=root |  TASK [Identity : create link file] *********************************************
2018-05-02 14:44:08,456 p=4509 u=root |  Wednesday 02 May 2018  14:44:08 +0800 (0:00:00.254)       0:00:21.844 ********* 
2018-05-02 14:44:08,714 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:08,715 p=4509 u=root |   [WARNING]: Consider using file module with state=link rather than running ln

2018-05-02 14:44:08,717 p=4509 u=root |  TASK [Identity : start and enable http service] ********************************
2018-05-02 14:44:08,717 p=4509 u=root |  Wednesday 02 May 2018  14:44:08 +0800 (0:00:00.261)       0:00:22.106 ********* 
2018-05-02 14:44:09,811 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:09,815 p=4509 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 14:44:09,815 p=4509 u=root |  Wednesday 02 May 2018  14:44:09 +0800 (0:00:01.098)       0:00:23.204 ********* 
2018-05-02 14:44:10,751 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:10,753 p=4509 u=root |  TASK [Identity : source admin-openrc] ******************************************
2018-05-02 14:44:10,753 p=4509 u=root |  Wednesday 02 May 2018  14:44:10 +0800 (0:00:00.937)       0:00:24.142 ********* 
2018-05-02 14:44:11,018 p=4509 u=root |  changed: [controller]
2018-05-02 14:44:11,020 p=4509 u=root |  TASK [Identity : create a domain,projects,users and roles] *********************
2018-05-02 14:44:11,021 p=4509 u=root |  Wednesday 02 May 2018  14:44:11 +0800 (0:00:00.267)       0:00:24.409 ********* 
2018-05-02 14:44:12,408 p=4509 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["openstack", "project", "create", "--domain", "default", "--description", "Service Project", "service"], "delta": "0:00:01.149257", "end": "2018-05-02 14:44:13.408014", "failed": true, "rc": 1, "start": "2018-05-02 14:44:12.258757", "stderr": "Missing value auth-url required for auth plugin password", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:44:12,410 p=4509 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:44:12,410 p=4509 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:44:12,410 p=4509 u=root |  controller                 : ok=14   changed=10   unreachable=0    failed=1   
2018-05-02 14:44:12,411 p=4509 u=root |  Wednesday 02 May 2018  14:44:12 +0800 (0:00:01.390)       0:00:25.799 ********* 
2018-05-02 14:44:12,411 p=4509 u=root |  =============================================================================== 
2018-05-02 14:44:12,411 p=4509 u=root |  Identity : install depends --------------------------------------------- 11.25s
2018-05-02 14:44:12,411 p=4509 u=root |  Identity : Bootstrap the Identity service ------------------------------- 2.41s
2018-05-02 14:44:12,411 p=4509 u=root |  Identity : populate the identity service -------------------------------- 1.86s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.62s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : and ---------------------------------------------------------- 1.56s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : create a domain,projects,users and roles --------------------- 1.39s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : start and enable http service -------------------------------- 1.10s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.94s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : Grant access to the DB for keystone -------------------------- 0.93s
2018-05-02 14:44:12,412 p=4509 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 0.72s
2018-05-02 14:44:12,413 p=4509 u=root |  Identity : create keystone database ------------------------------------- 0.67s
2018-05-02 14:44:12,413 p=4509 u=root |  Identity : Install packages --------------------------------------------- 0.51s
2018-05-02 14:44:12,413 p=4509 u=root |  Identity : source admin-openrc ------------------------------------------ 0.27s
2018-05-02 14:44:12,413 p=4509 u=root |  Identity : create link file --------------------------------------------- 0.26s
2018-05-02 14:44:12,413 p=4509 u=root |  Identity : modify the /etc/httpd/conf/httpd.conf file ------------------- 0.25s
2018-05-02 14:47:22,361 p=4643 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:47:22,413 p=4643 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 14:47:22,414 p=4643 u=root |  Wednesday 02 May 2018  14:47:22 +0800 (0:00:00.058)       0:00:00.058 ********* 
2018-05-02 14:47:33,238 p=4643 u=root |  ok: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 14:47:33,248 p=4643 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 14:47:33,249 p=4643 u=root |  Wednesday 02 May 2018  14:47:33 +0800 (0:00:10.835)       0:00:10.893 ********* 
2018-05-02 14:47:33,897 p=4643 u=root |  ok: [controller]
2018-05-02 14:47:33,898 p=4643 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-05-02 14:47:33,899 p=4643 u=root |  Wednesday 02 May 2018  14:47:33 +0800 (0:00:00.649)       0:00:11.543 ********* 
2018-05-02 14:47:34,462 p=4643 u=root |  ok: [controller] => (item=localhost)
2018-05-02 14:47:34,689 p=4643 u=root |  ok: [controller] => (item=%)
2018-05-02 14:47:34,694 p=4643 u=root |  TASK [Identity : Install packages] *********************************************
2018-05-02 14:47:34,694 p=4643 u=root |  Wednesday 02 May 2018  14:47:34 +0800 (0:00:00.795)       0:00:12.338 ********* 
2018-05-02 14:47:35,289 p=4643 u=root |  ok: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-02 14:47:35,291 p=4643 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-05-02 14:47:35,291 p=4643 u=root |  Wednesday 02 May 2018  14:47:35 +0800 (0:00:00.597)       0:00:12.935 ********* 
2018-05-02 14:47:35,659 p=4643 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-05-02 14:47:35,897 p=4643 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-05-02 14:47:35,899 p=4643 u=root |  TASK [Identity : populate the identity service] ********************************
2018-05-02 14:47:35,899 p=4643 u=root |  Wednesday 02 May 2018  14:47:35 +0800 (0:00:00.607)       0:00:13.543 ********* 
2018-05-02 14:47:38,531 p=4643 u=root |  changed: [controller]
2018-05-02 14:47:38,534 p=4643 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-02 14:47:38,538 p=4643 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 14:47:38,538 p=4643 u=root |  Wednesday 02 May 2018  14:47:38 +0800 (0:00:02.638)       0:00:16.182 ********* 
2018-05-02 14:47:40,346 p=4643 u=root |  changed: [controller]
2018-05-02 14:47:40,354 p=4643 u=root |  TASK [Identity : and] **********************************************************
2018-05-02 14:47:40,355 p=4643 u=root |  Wednesday 02 May 2018  14:47:40 +0800 (0:00:01.816)       0:00:17.998 ********* 
2018-05-02 14:47:41,895 p=4643 u=root |  changed: [controller]
2018-05-02 14:47:41,897 p=4643 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 14:47:41,897 p=4643 u=root |  Wednesday 02 May 2018  14:47:41 +0800 (0:00:01.542)       0:00:19.541 ********* 
2018-05-02 14:47:44,312 p=4643 u=root |  changed: [controller]
2018-05-02 14:47:44,314 p=4643 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] *******************
2018-05-02 14:47:44,314 p=4643 u=root |  Wednesday 02 May 2018  14:47:44 +0800 (0:00:02.416)       0:00:21.958 ********* 
2018-05-02 14:47:44,608 p=4643 u=root |  changed: [controller]
2018-05-02 14:47:44,609 p=4643 u=root |  TASK [Identity : create link file] *********************************************
2018-05-02 14:47:44,610 p=4643 u=root |  Wednesday 02 May 2018  14:47:44 +0800 (0:00:00.295)       0:00:22.254 ********* 
2018-05-02 14:47:44,909 p=4643 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/", "delta": "0:00:00.009524", "end": "2018-05-02 14:47:45.901756", "failed": true, "rc": 1, "start": "2018-05-02 14:47:45.892232", "stderr": "ln: failed to create symbolic link /etc/httpd/conf.d/wsgi-keystone.conf: File exists", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with state=link rather than running ln"]}
2018-05-02 14:47:44,911 p=4643 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:47:44,911 p=4643 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:47:44,911 p=4643 u=root |  controller                 : ok=10   changed=6    unreachable=0    failed=1   
2018-05-02 14:47:44,911 p=4643 u=root |  Wednesday 02 May 2018  14:47:44 +0800 (0:00:00.301)       0:00:22.555 ********* 
2018-05-02 14:47:44,911 p=4643 u=root |  =============================================================================== 
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : install depends --------------------------------------------- 10.84s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : populate the identity service -------------------------------- 2.64s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : Bootstrap the Identity service ------------------------------- 2.42s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.82s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : and ---------------------------------------------------------- 1.54s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : Grant access to the DB for keystone -------------------------- 0.80s
2018-05-02 14:47:44,912 p=4643 u=root |  Identity : create keystone database ------------------------------------- 0.65s
2018-05-02 14:47:44,913 p=4643 u=root |  Identity : modify the /etc/keystone/keystone.conf file ------------------ 0.61s
2018-05-02 14:47:44,913 p=4643 u=root |  Identity : Install packages --------------------------------------------- 0.60s
2018-05-02 14:47:44,913 p=4643 u=root |  Identity : create link file --------------------------------------------- 0.30s
2018-05-02 14:47:44,913 p=4643 u=root |  Identity : modify the /etc/httpd/conf/httpd.conf file ------------------- 0.30s
2018-05-02 14:48:33,006 p=4747 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:48:33,050 p=4747 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 14:48:33,050 p=4747 u=root |  Wednesday 02 May 2018  14:48:33 +0800 (0:00:00.049)       0:00:00.049 ********* 
2018-05-02 14:48:33,696 p=4747 u=root |  ok: [controller]
2018-05-02 14:48:33,699 p=4747 u=root |  TASK [Identity : source admin-openrc] ******************************************
2018-05-02 14:48:33,700 p=4747 u=root |  Wednesday 02 May 2018  14:48:33 +0800 (0:00:00.649)       0:00:00.699 ********* 
2018-05-02 14:48:34,049 p=4747 u=root |  changed: [controller]
2018-05-02 14:48:34,051 p=4747 u=root |  TASK [Identity : create a domain,projects,users and roles] *********************
2018-05-02 14:48:34,051 p=4747 u=root |  Wednesday 02 May 2018  14:48:34 +0800 (0:00:00.351)       0:00:01.050 ********* 
2018-05-02 14:48:36,051 p=4747 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["openstack", "project", "create", "--domain", "default", "--description", "Service Project", "service"], "delta": "0:00:01.799130", "end": "2018-05-02 14:48:37.053164", "failed": true, "rc": 1, "start": "2018-05-02 14:48:35.254034", "stderr": "Missing value auth-url required for auth plugin password", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:48:36,053 p=4747 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:48:36,053 p=4747 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:48:36,054 p=4747 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-02 14:48:36,054 p=4747 u=root |  Wednesday 02 May 2018  14:48:36 +0800 (0:00:02.002)       0:00:03.053 ********* 
2018-05-02 14:48:36,054 p=4747 u=root |  =============================================================================== 
2018-05-02 14:48:36,054 p=4747 u=root |  Identity : create a domain,projects,users and roles --------------------- 2.00s
2018-05-02 14:48:36,054 p=4747 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.65s
2018-05-02 14:48:36,055 p=4747 u=root |  Identity : source admin-openrc ------------------------------------------ 0.35s
2018-05-02 14:48:40,219 p=4774 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 14:48:40,263 p=4774 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 14:48:40,264 p=4774 u=root |  Wednesday 02 May 2018  14:48:40 +0800 (0:00:00.049)       0:00:00.049 ********* 
2018-05-02 14:48:40,992 p=4774 u=root |  ok: [controller]
2018-05-02 14:48:40,994 p=4774 u=root |  TASK [Identity : source admin-openrc] ******************************************
2018-05-02 14:48:40,994 p=4774 u=root |  Wednesday 02 May 2018  14:48:40 +0800 (0:00:00.730)       0:00:00.779 ********* 
2018-05-02 14:48:41,349 p=4774 u=root |  changed: [controller]
2018-05-02 14:48:41,353 p=4774 u=root |  TASK [Identity : create a domain,projects,users and roles] *********************
2018-05-02 14:48:41,354 p=4774 u=root |  Wednesday 02 May 2018  14:48:41 +0800 (0:00:00.359)       0:00:01.139 ********* 
2018-05-02 14:48:43,263 p=4774 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["openstack", "project", "create", "--domain", "default", "--description", "Service Project", "service"], "delta": "0:00:01.674808", "end": "2018-05-02 14:48:44.268054", "failed": true, "rc": 1, "start": "2018-05-02 14:48:42.593246", "stderr": "Missing value auth-url required for auth plugin password", "stdout": "", "stdout_lines": [], "warnings": []}
2018-05-02 14:48:43,264 p=4774 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 14:48:43,265 p=4774 u=root |  PLAY RECAP *********************************************************************
2018-05-02 14:48:43,265 p=4774 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-02 14:48:43,265 p=4774 u=root |  Wednesday 02 May 2018  14:48:43 +0800 (0:00:01.911)       0:00:03.050 ********* 
2018-05-02 14:48:43,265 p=4774 u=root |  =============================================================================== 
2018-05-02 14:48:43,265 p=4774 u=root |  Identity : create a domain,projects,users and roles --------------------- 1.91s
2018-05-02 14:48:43,266 p=4774 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.73s
2018-05-02 14:48:43,266 p=4774 u=root |  Identity : source admin-openrc ------------------------------------------ 0.36s
2018-05-02 15:16:08,812 p=4864 u=root |  ERROR! Missing target hosts
2018-05-02 15:16:29,345 p=4878 u=root |  ERROR! Missing target hosts
2018-05-02 17:39:30,362 p=5305 u=root |  ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.

The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Create a service project
  ^ here


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Create a service project
  ^ here

2018-05-02 17:41:39,917 p=5338 u=root |  ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.

The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 5, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Create a service project
- keystone:
  ^ here


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 5, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Create a service project
- keystone:
  ^ here

2018-05-02 17:49:15,011 p=5363 u=root |  ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.

The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Create a service project
- keystone:
  ^ here


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Create a service project
- keystone:
  ^ here

2018-05-02 18:02:25,945 p=5538 u=root |  ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.

The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#Create a service project
- keystone:
  ^ here


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#Create a service project
- keystone:
  ^ here

2018-05-02 18:40:11,248 p=5771 u=root |  ERROR! no action detected in task. This often indicates a misspelled module name, or incorrect module path.

The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#Create a service project
- keystone:
  ^ here


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

#Create a service project
- keystone:
  ^ here

2018-05-02 18:41:10,820 p=5851 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 18:41:10,892 p=5851 u=root |  TASK [Environment : set hostname] **********************************************
2018-05-02 18:41:10,892 p=5851 u=root |  Wednesday 02 May 2018  18:41:10 +0800 (0:00:00.077)       0:00:00.077 ********* 
2018-05-02 18:41:26,749 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:26,753 p=5851 u=root |  TASK [Environment : add host file] *********************************************
2018-05-02 18:41:26,754 p=5851 u=root |  Wednesday 02 May 2018  18:41:26 +0800 (0:00:15.861)       0:00:15.938 ********* 
2018-05-02 18:41:27,331 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:27,335 p=5851 u=root |  TASK [Environment : install chrony] ********************************************
2018-05-02 18:41:27,335 p=5851 u=root |  Wednesday 02 May 2018  18:41:27 +0800 (0:00:00.581)       0:00:16.519 ********* 
2018-05-02 18:41:31,171 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:31,173 p=5851 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 18:41:31,173 p=5851 u=root |  Wednesday 02 May 2018  18:41:31 +0800 (0:00:03.837)       0:00:20.357 ********* 
2018-05-02 18:41:31,471 p=5851 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 18:41:31,704 p=5851 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 18:41:31,882 p=5851 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 18:41:32,147 p=5851 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-02 18:41:32,149 p=5851 u=root |  TASK [Environment : change the /etc/chrony.conf file] **************************
2018-05-02 18:41:32,149 p=5851 u=root |  Wednesday 02 May 2018  18:41:32 +0800 (0:00:00.976)       0:00:21.334 ********* 
2018-05-02 18:41:32,436 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:32,439 p=5851 u=root |  TASK [Environment : restart NTP] ***********************************************
2018-05-02 18:41:32,439 p=5851 u=root |  Wednesday 02 May 2018  18:41:32 +0800 (0:00:00.289)       0:00:21.623 ********* 
2018-05-02 18:41:33,634 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:33,636 p=5851 u=root |  TASK [Environment : install centos-release-openstack-newton] *******************
2018-05-02 18:41:33,636 p=5851 u=root |  Wednesday 02 May 2018  18:41:33 +0800 (0:00:01.197)       0:00:22.820 ********* 
2018-05-02 18:41:42,073 p=5851 u=root |  changed: [controller]
2018-05-02 18:41:42,075 p=5851 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ***
2018-05-02 18:41:42,075 p=5851 u=root |  Wednesday 02 May 2018  18:41:42 +0800 (0:00:08.438)       0:00:31.259 ********* 
2018-05-02 18:50:37,943 p=5851 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-02 18:50:37,947 p=5851 u=root |  TASK [Environment : install sql] ***********************************************
2018-05-02 18:50:37,948 p=5851 u=root |  Wednesday 02 May 2018  18:50:37 +0800 (0:08:55.872)       0:09:27.132 ********* 
2018-05-02 18:51:09,146 p=5851 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-02 18:51:09,150 p=5851 u=root |  TASK [Environment : add mariadb_openstack.cnf file] ****************************
2018-05-02 18:51:09,150 p=5851 u=root |  Wednesday 02 May 2018  18:51:09 +0800 (0:00:31.202)       0:09:58.334 ********* 
2018-05-02 18:51:09,959 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:09,963 p=5851 u=root |  TASK [Environment : install expect] ********************************************
2018-05-02 18:51:09,964 p=5851 u=root |  Wednesday 02 May 2018  18:51:09 +0800 (0:00:00.813)       0:09:59.148 ********* 
2018-05-02 18:51:13,516 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:13,518 p=5851 u=root |  TASK [Environment : copy file] *************************************************
2018-05-02 18:51:13,519 p=5851 u=root |  Wednesday 02 May 2018  18:51:13 +0800 (0:00:03.554)       0:10:02.703 ********* 
2018-05-02 18:51:14,173 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:14,175 p=5851 u=root |  TASK [Environment : chmod] *****************************************************
2018-05-02 18:51:14,175 p=5851 u=root |  Wednesday 02 May 2018  18:51:14 +0800 (0:00:00.656)       0:10:03.359 ********* 
2018-05-02 18:51:14,606 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:14,608 p=5851 u=root |  TASK [Environment : start mariadb] *********************************************
2018-05-02 18:51:14,608 p=5851 u=root |  Wednesday 02 May 2018  18:51:14 +0800 (0:00:00.432)       0:10:03.792 ********* 
2018-05-02 18:51:26,758 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:26,763 p=5851 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ******************
2018-05-02 18:51:26,763 p=5851 u=root |  Wednesday 02 May 2018  18:51:26 +0800 (0:00:12.154)       0:10:15.947 ********* 
2018-05-02 18:51:27,428 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:27,432 p=5851 u=root |  TASK [Environment : del mysql_secure_installation.exp] *************************
2018-05-02 18:51:27,432 p=5851 u=root |  Wednesday 02 May 2018  18:51:27 +0800 (0:00:00.669)       0:10:16.616 ********* 
2018-05-02 18:51:27,759 p=5851 u=root |  changed: [controller]
2018-05-02 18:51:27,764 p=5851 u=root |  TASK [Environment : install rabbitmq] ******************************************
2018-05-02 18:51:27,764 p=5851 u=root |  Wednesday 02 May 2018  18:51:27 +0800 (0:00:00.331)       0:10:16.948 ********* 
2018-05-02 18:52:40,465 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:40,468 p=5851 u=root |  TASK [Environment : start rabbitmq-server] *************************************
2018-05-02 18:52:40,468 p=5851 u=root |  Wednesday 02 May 2018  18:52:40 +0800 (0:01:12.703)       0:11:29.652 ********* 
2018-05-02 18:52:44,241 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:44,243 p=5851 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 18:52:44,243 p=5851 u=root |  Wednesday 02 May 2018  18:52:44 +0800 (0:00:03.774)       0:11:33.427 ********* 
2018-05-02 18:52:46,630 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:46,632 p=5851 u=root |  TASK [Environment : useradd openstack] *****************************************
2018-05-02 18:52:46,632 p=5851 u=root |  Wednesday 02 May 2018  18:52:46 +0800 (0:00:02.389)       0:11:35.816 ********* 
2018-05-02 18:52:48,746 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:48,748 p=5851 u=root |  TASK [Environment : install Memcached] *****************************************
2018-05-02 18:52:48,748 p=5851 u=root |  Wednesday 02 May 2018  18:52:48 +0800 (0:00:02.115)       0:11:37.932 ********* 
2018-05-02 18:52:53,256 p=5851 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-05-02 18:52:53,258 p=5851 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ******************
2018-05-02 18:52:53,258 p=5851 u=root |  Wednesday 02 May 2018  18:52:53 +0800 (0:00:04.509)       0:11:42.442 ********* 
2018-05-02 18:52:53,468 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:53,471 p=5851 u=root |  TASK [Environment : restart memcached] *****************************************
2018-05-02 18:52:53,471 p=5851 u=root |  Wednesday 02 May 2018  18:52:53 +0800 (0:00:00.212)       0:11:42.655 ********* 
2018-05-02 18:52:54,085 p=5851 u=root |  changed: [controller]
2018-05-02 18:52:54,087 p=5851 u=root |  TASK [Identity : install depends] **********************************************
2018-05-02 18:52:54,087 p=5851 u=root |  Wednesday 02 May 2018  18:52:54 +0800 (0:00:00.616)       0:11:43.271 ********* 
2018-05-02 18:53:07,299 p=5851 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-02 18:53:07,302 p=5851 u=root |  TASK [Identity : create keystone database] *************************************
2018-05-02 18:53:07,302 p=5851 u=root |  Wednesday 02 May 2018  18:53:07 +0800 (0:00:13.215)       0:11:56.486 ********* 
2018-05-02 18:53:07,866 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:07,870 p=5851 u=root |  TASK [Identity : Grant access to the DB for keystone] **************************
2018-05-02 18:53:07,871 p=5851 u=root |  Wednesday 02 May 2018  18:53:07 +0800 (0:00:00.568)       0:11:57.055 ********* 
2018-05-02 18:53:08,609 p=5851 u=root |  changed: [controller] => (item=localhost)
2018-05-02 18:53:08,894 p=5851 u=root |  changed: [controller] => (item=%)
2018-05-02 18:53:08,901 p=5851 u=root |  TASK [Identity : Install packages] *********************************************
2018-05-02 18:53:08,901 p=5851 u=root |  Wednesday 02 May 2018  18:53:08 +0800 (0:00:01.030)       0:11:58.085 ********* 
2018-05-02 18:53:29,922 p=5851 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-02 18:53:29,927 p=5851 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ******************
2018-05-02 18:53:29,927 p=5851 u=root |  Wednesday 02 May 2018  18:53:29 +0800 (0:00:21.025)       0:12:19.111 ********* 
2018-05-02 18:53:30,221 p=5851 u=root |  changed: [controller] => (item={u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone', u'key': u'^#connection ='})
2018-05-02 18:53:30,433 p=5851 u=root |  changed: [controller] => (item={u'value': u'provider = fernet', u'key': u'^#provider = uuid'})
2018-05-02 18:53:30,437 p=5851 u=root |  TASK [Identity : populate the identity service] ********************************
2018-05-02 18:53:30,437 p=5851 u=root |  Wednesday 02 May 2018  18:53:30 +0800 (0:00:00.509)       0:12:19.621 ********* 
2018-05-02 18:53:34,828 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:34,829 p=5851 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than
running su

2018-05-02 18:53:34,831 p=5851 u=root |  TASK [Identity : Initialize Fernet key repositories] ***************************
2018-05-02 18:53:34,831 p=5851 u=root |  Wednesday 02 May 2018  18:53:34 +0800 (0:00:04.393)       0:12:24.015 ********* 
2018-05-02 18:53:36,112 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:36,114 p=5851 u=root |  TASK [Identity : and] **********************************************************
2018-05-02 18:53:36,114 p=5851 u=root |  Wednesday 02 May 2018  18:53:36 +0800 (0:00:01.282)       0:12:25.298 ********* 
2018-05-02 18:53:37,449 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:37,451 p=5851 u=root |  TASK [Identity : Bootstrap the Identity service] *******************************
2018-05-02 18:53:37,452 p=5851 u=root |  Wednesday 02 May 2018  18:53:37 +0800 (0:00:01.337)       0:12:26.636 ********* 
2018-05-02 18:53:40,114 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:40,116 p=5851 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] *******************
2018-05-02 18:53:40,116 p=5851 u=root |  Wednesday 02 May 2018  18:53:40 +0800 (0:00:02.664)       0:12:29.300 ********* 
2018-05-02 18:53:40,331 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:40,333 p=5851 u=root |  TASK [Identity : create link file] *********************************************
2018-05-02 18:53:40,333 p=5851 u=root |  Wednesday 02 May 2018  18:53:40 +0800 (0:00:00.216)       0:12:29.517 ********* 
2018-05-02 18:53:40,592 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:40,593 p=5851 u=root |   [WARNING]: Consider using file module with state=link rather than running ln

2018-05-02 18:53:40,597 p=5851 u=root |  TASK [Identity : start and enable http service] ********************************
2018-05-02 18:53:40,598 p=5851 u=root |  Wednesday 02 May 2018  18:53:40 +0800 (0:00:00.264)       0:12:29.782 ********* 
2018-05-02 18:53:41,400 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:41,402 p=5851 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 18:53:41,403 p=5851 u=root |  Wednesday 02 May 2018  18:53:41 +0800 (0:00:00.804)       0:12:30.587 ********* 
2018-05-02 18:53:41,881 p=5851 u=root |  changed: [controller]
2018-05-02 18:53:41,885 p=5851 u=root |  TASK [Identity : Install python-keystoneclient] ********************************
2018-05-02 18:53:41,886 p=5851 u=root |  Wednesday 02 May 2018  18:53:41 +0800 (0:00:00.483)       0:12:31.070 ********* 
2018-05-02 18:53:42,983 p=5851 u=root |  ok: [controller]
2018-05-02 18:53:42,985 p=5851 u=root |  TASK [Identity : keystone] *****************************************************
2018-05-02 18:53:42,985 p=5851 u=root |  Wednesday 02 May 2018  18:53:42 +0800 (0:00:01.099)       0:12:32.169 ********* 
2018-05-02 18:53:44,409 p=5851 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "missing required arguments: endpoint"}
2018-05-02 18:53:44,412 p=5851 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 18:53:44,412 p=5851 u=root |  PLAY RECAP *********************************************************************
2018-05-02 18:53:44,412 p=5851 u=root |  controller                 : ok=37   changed=36   unreachable=0    failed=1   
2018-05-02 18:53:44,412 p=5851 u=root |  Wednesday 02 May 2018  18:53:44 +0800 (0:00:01.427)       0:12:33.596 ********* 
2018-05-02 18:53:44,412 p=5851 u=root |  =============================================================================== 
2018-05-02 18:53:44,413 p=5851 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux - 535.87s
2018-05-02 18:53:44,413 p=5851 u=root |  Environment : install rabbitmq ----------------------------------------- 72.70s
2018-05-02 18:53:44,413 p=5851 u=root |  Environment : install sql ---------------------------------------------- 31.20s
2018-05-02 18:53:44,413 p=5851 u=root |  Identity : Install packages -------------------------------------------- 21.03s
2018-05-02 18:53:44,413 p=5851 u=root |  Environment : set hostname --------------------------------------------- 15.86s
2018-05-02 18:53:44,413 p=5851 u=root |  Identity : install depends --------------------------------------------- 13.22s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : start mariadb -------------------------------------------- 12.16s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : install centos-release-openstack-newton ------------------- 8.44s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : install Memcached ----------------------------------------- 4.51s
2018-05-02 18:53:44,414 p=5851 u=root |  Identity : populate the identity service -------------------------------- 4.39s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : install chrony -------------------------------------------- 3.84s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : start rabbitmq-server ------------------------------------- 3.78s
2018-05-02 18:53:44,414 p=5851 u=root |  Environment : install expect -------------------------------------------- 3.55s
2018-05-02 18:53:44,415 p=5851 u=root |  Identity : Bootstrap the Identity service ------------------------------- 2.66s
2018-05-02 18:53:44,415 p=5851 u=root |  Environment : useradd openstack ----------------------------------------- 2.39s
2018-05-02 18:53:44,415 p=5851 u=root |  Environment : useradd openstack ----------------------------------------- 2.12s
2018-05-02 18:53:44,415 p=5851 u=root |  Identity : keystone ----------------------------------------------------- 1.43s
2018-05-02 18:53:44,415 p=5851 u=root |  Identity : and ---------------------------------------------------------- 1.34s
2018-05-02 18:53:44,415 p=5851 u=root |  Identity : Initialize Fernet key repositories --------------------------- 1.28s
2018-05-02 18:53:44,416 p=5851 u=root |  Environment : restart NTP ----------------------------------------------- 1.20s
2018-05-02 18:58:05,699 p=6268 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 18:58:05,745 p=6268 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 18:58:05,745 p=6268 u=root |  Wednesday 02 May 2018  18:58:05 +0800 (0:00:00.050)       0:00:00.050 ********* 
2018-05-02 18:58:16,671 p=6268 u=root |  ok: [controller]
2018-05-02 18:58:16,676 p=6268 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 18:58:16,677 p=6268 u=root |  Wednesday 02 May 2018  18:58:16 +0800 (0:00:10.931)       0:00:10.982 ********* 
2018-05-02 18:58:18,822 p=6268 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "missing required arguments: endpoint"}
2018-05-02 18:58:18,824 p=6268 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 18:58:18,824 p=6268 u=root |  PLAY RECAP *********************************************************************
2018-05-02 18:58:18,824 p=6268 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 18:58:18,825 p=6268 u=root |  Wednesday 02 May 2018  18:58:18 +0800 (0:00:02.147)       0:00:13.130 ********* 
2018-05-02 18:58:18,825 p=6268 u=root |  =============================================================================== 
2018-05-02 18:58:18,825 p=6268 u=root |  Identity : add admin-openrc file --------------------------------------- 10.93s
2018-05-02 18:58:18,825 p=6268 u=root |  Identity : Create a service project ------------------------------------- 2.15s
2018-05-02 19:07:03,524 p=6408 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:07:03,570 p=6408 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:07:03,571 p=6408 u=root |  Wednesday 02 May 2018  19:07:03 +0800 (0:00:00.050)       0:00:00.050 ********* 
2018-05-02 19:07:14,557 p=6408 u=root |  ok: [controller]
2018-05-02 19:07:14,561 p=6408 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:07:14,562 p=6408 u=root |  Wednesday 02 May 2018  19:07:14 +0800 (0:00:10.991)       0:00:11.041 ********* 
2018-05-02 19:07:16,765 p=6408 u=root |  fatal: [controller]: FAILED! => {"changed": false, "err": "Missing Project Name", "failed": true, "msg": "If you do not specify a token you must use a project name for authentication. Try adding [ login_project_name ] to the task", "rc": 2}
2018-05-02 19:07:16,767 p=6408 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:07:16,768 p=6408 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:07:16,768 p=6408 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:07:16,768 p=6408 u=root |  Wednesday 02 May 2018  19:07:16 +0800 (0:00:02.206)       0:00:13.248 ********* 
2018-05-02 19:07:16,768 p=6408 u=root |  =============================================================================== 
2018-05-02 19:07:16,768 p=6408 u=root |  Identity : add admin-openrc file --------------------------------------- 10.99s
2018-05-02 19:07:16,769 p=6408 u=root |  Identity : Create a service project ------------------------------------- 2.21s
2018-05-02 19:08:55,878 p=6478 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:08:55,922 p=6478 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:08:55,922 p=6478 u=root |  Wednesday 02 May 2018  19:08:55 +0800 (0:00:00.048)       0:00:00.048 ********* 
2018-05-02 19:09:07,002 p=6478 u=root |  ok: [controller]
2018-05-02 19:09:07,006 p=6478 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:09:07,006 p=6478 u=root |  Wednesday 02 May 2018  19:09:07 +0800 (0:00:11.083)       0:00:11.131 ********* 
2018-05-02 19:09:11,792 p=6478 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.http.Unauthorized: The request you have made requires authentication. (HTTP 401) (Request-ID: req-52f94915-d106-4155-ba9b-f36495bb16a7)
2018-05-02 19:09:11,793 p=6478 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 1346, in <module>\n    main()\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 1340, in main\n    km.command_router()\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 472, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 670, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 600, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_eu9f8J/ansible_module_keystone.py\", line 607, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 444, in request\n    raise exceptions.from_response(resp, method, url)\nkeystoneauth1.exceptions.http.Unauthorized: The request you have made requires authentication. (HTTP 401) (Request-ID: req-52f94915-d106-4155-ba9b-f36495bb16a7)\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:09:11,795 p=6478 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:09:11,795 p=6478 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:09:11,795 p=6478 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:09:11,795 p=6478 u=root |  Wednesday 02 May 2018  19:09:11 +0800 (0:00:04.789)       0:00:15.921 ********* 
2018-05-02 19:09:11,796 p=6478 u=root |  =============================================================================== 
2018-05-02 19:09:11,796 p=6478 u=root |  Identity : add admin-openrc file --------------------------------------- 11.08s
2018-05-02 19:09:11,796 p=6478 u=root |  Identity : Create a service project ------------------------------------- 4.79s
2018-05-02 19:17:20,612 p=6553 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:17:20,656 p=6553 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:17:20,657 p=6553 u=root |  Wednesday 02 May 2018  19:17:20 +0800 (0:00:00.049)       0:00:00.049 ********* 
2018-05-02 19:17:31,327 p=6553 u=root |  ok: [controller]
2018-05-02 19:17:31,329 p=6553 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:17:31,329 p=6553 u=root |  Wednesday 02 May 2018  19:17:31 +0800 (0:00:10.672)       0:00:10.721 ********* 
2018-05-02 19:17:34,626 p=6553 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 19:17:34,627 p=6553 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_jEtW2z/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:17:34,629 p=6553 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:17:34,629 p=6553 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:17:34,630 p=6553 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:17:34,630 p=6553 u=root |  Wednesday 02 May 2018  19:17:34 +0800 (0:00:03.300)       0:00:14.022 ********* 
2018-05-02 19:17:34,630 p=6553 u=root |  =============================================================================== 
2018-05-02 19:17:34,630 p=6553 u=root |  Identity : add admin-openrc file --------------------------------------- 10.67s
2018-05-02 19:17:34,630 p=6553 u=root |  Identity : Create a service project ------------------------------------- 3.30s
2018-05-02 19:24:33,988 p=6614 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:24:34,033 p=6614 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:24:34,034 p=6614 u=root |  Wednesday 02 May 2018  19:24:34 +0800 (0:00:00.050)       0:00:00.050 ********* 
2018-05-02 19:24:44,942 p=6614 u=root |  ok: [controller]
2018-05-02 19:24:44,945 p=6614 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:24:44,946 p=6614 u=root |  Wednesday 02 May 2018  19:24:44 +0800 (0:00:10.911)       0:00:10.962 ********* 
2018-05-02 19:24:48,962 p=6614 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 19:24:48,963 p=6614 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_xIDASJ/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:24:48,965 p=6614 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:24:48,965 p=6614 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:24:48,965 p=6614 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:24:48,966 p=6614 u=root |  Wednesday 02 May 2018  19:24:48 +0800 (0:00:04.019)       0:00:14.982 ********* 
2018-05-02 19:24:48,966 p=6614 u=root |  =============================================================================== 
2018-05-02 19:24:48,966 p=6614 u=root |  Identity : add admin-openrc file --------------------------------------- 10.91s
2018-05-02 19:24:48,966 p=6614 u=root |  Identity : Create a service project ------------------------------------- 4.02s
2018-05-02 19:39:45,949 p=6651 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:39:45,993 p=6651 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:39:45,994 p=6651 u=root |  Wednesday 02 May 2018  19:39:45 +0800 (0:00:00.049)       0:00:00.049 ********* 
2018-05-02 19:39:56,876 p=6651 u=root |  ok: [controller]
2018-05-02 19:39:56,878 p=6651 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:39:56,878 p=6651 u=root |  Wednesday 02 May 2018  19:39:56 +0800 (0:00:10.884)       0:00:10.933 ********* 
2018-05-02 19:40:00,841 p=6651 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 19:40:00,843 p=6651 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_mpCk1I/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:40:00,847 p=6651 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:40:00,847 p=6651 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:40:00,848 p=6651 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:40:00,848 p=6651 u=root |  Wednesday 02 May 2018  19:40:00 +0800 (0:00:03.969)       0:00:14.903 ********* 
2018-05-02 19:40:00,848 p=6651 u=root |  =============================================================================== 
2018-05-02 19:40:00,849 p=6651 u=root |  Identity : add admin-openrc file --------------------------------------- 10.88s
2018-05-02 19:40:00,849 p=6651 u=root |  Identity : Create a service project ------------------------------------- 3.97s
2018-05-02 19:44:57,637 p=6709 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:44:57,684 p=6709 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:44:57,685 p=6709 u=root |  Wednesday 02 May 2018  19:44:57 +0800 (0:00:00.051)       0:00:00.051 ********* 
2018-05-02 19:45:08,618 p=6709 u=root |  ok: [controller]
2018-05-02 19:45:08,622 p=6709 u=root |  TASK [Identity : source] *******************************************************
2018-05-02 19:45:08,622 p=6709 u=root |  Wednesday 02 May 2018  19:45:08 +0800 (0:00:10.937)       0:00:10.988 ********* 
2018-05-02 19:45:09,150 p=6709 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "source admin-openrc", "failed": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-05-02 19:45:09,154 p=6709 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:45:09,155 p=6709 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:45:09,155 p=6709 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:45:09,156 p=6709 u=root |  Wednesday 02 May 2018  19:45:09 +0800 (0:00:00.533)       0:00:11.522 ********* 
2018-05-02 19:45:09,156 p=6709 u=root |  =============================================================================== 
2018-05-02 19:45:09,157 p=6709 u=root |  Identity : add admin-openrc file --------------------------------------- 10.94s
2018-05-02 19:45:09,157 p=6709 u=root |  Identity : source ------------------------------------------------------- 0.53s
2018-05-02 19:45:45,690 p=6749 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:45:45,737 p=6749 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:45:45,737 p=6749 u=root |  Wednesday 02 May 2018  19:45:45 +0800 (0:00:00.050)       0:00:00.051 ********* 
2018-05-02 19:45:46,497 p=6749 u=root |  ok: [controller]
2018-05-02 19:45:46,500 p=6749 u=root |  TASK [Identity : source] *******************************************************
2018-05-02 19:45:46,500 p=6749 u=root |  Wednesday 02 May 2018  19:45:46 +0800 (0:00:00.763)       0:00:00.814 ********* 
2018-05-02 19:45:46,862 p=6749 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "source /root/admin-openrc", "failed": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-05-02 19:45:46,864 p=6749 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:45:46,864 p=6749 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:45:46,864 p=6749 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:45:46,865 p=6749 u=root |  Wednesday 02 May 2018  19:45:46 +0800 (0:00:00.364)       0:00:01.178 ********* 
2018-05-02 19:45:46,865 p=6749 u=root |  =============================================================================== 
2018-05-02 19:45:46,865 p=6749 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.76s
2018-05-02 19:45:46,865 p=6749 u=root |  Identity : source ------------------------------------------------------- 0.36s
2018-05-02 19:47:25,485 p=6786 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:47:25,577 p=6786 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:47:25,578 p=6786 u=root |  Wednesday 02 May 2018  19:47:25 +0800 (0:00:00.101)       0:00:00.101 ********* 
2018-05-02 19:47:26,790 p=6786 u=root |  ok: [controller]
2018-05-02 19:47:26,794 p=6786 u=root |  TASK [Identity : source] *******************************************************
2018-05-02 19:47:26,795 p=6786 u=root |  Wednesday 02 May 2018  19:47:26 +0800 (0:00:01.216)       0:00:01.318 ********* 
2018-05-02 19:47:27,357 p=6786 u=root |  changed: [controller]
2018-05-02 19:47:27,359 p=6786 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:47:27,359 p=6786 u=root |  Wednesday 02 May 2018  19:47:27 +0800 (0:00:00.564)       0:00:01.882 ********* 
2018-05-02 19:47:29,624 p=6786 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 19:47:29,624 p=6786 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_19Yt7p/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:47:29,626 p=6786 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:47:29,627 p=6786 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:47:29,627 p=6786 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-02 19:47:29,627 p=6786 u=root |  Wednesday 02 May 2018  19:47:29 +0800 (0:00:02.267)       0:00:04.150 ********* 
2018-05-02 19:47:29,627 p=6786 u=root |  =============================================================================== 
2018-05-02 19:47:29,627 p=6786 u=root |  Identity : Create a service project ------------------------------------- 2.27s
2018-05-02 19:47:29,627 p=6786 u=root |  Identity : add admin-openrc file ---------------------------------------- 1.22s
2018-05-02 19:47:29,628 p=6786 u=root |  Identity : source ------------------------------------------------------- 0.56s
2018-05-02 19:51:04,602 p=6835 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:51:04,648 p=6835 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:51:04,648 p=6835 u=root |  Wednesday 02 May 2018  19:51:04 +0800 (0:00:00.049)       0:00:00.049 ********* 
2018-05-02 19:51:05,506 p=6835 u=root |  ok: [controller]
2018-05-02 19:51:05,508 p=6835 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:51:05,508 p=6835 u=root |  Wednesday 02 May 2018  19:51:05 +0800 (0:00:00.860)       0:00:00.910 ********* 
2018-05-02 19:51:07,141 p=6835 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "missing required arguments: endpoint"}
2018-05-02 19:51:07,145 p=6835 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:51:07,146 p=6835 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:51:07,146 p=6835 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:51:07,147 p=6835 u=root |  Wednesday 02 May 2018  19:51:07 +0800 (0:00:01.638)       0:00:02.548 ********* 
2018-05-02 19:51:07,148 p=6835 u=root |  =============================================================================== 
2018-05-02 19:51:07,148 p=6835 u=root |  Identity : Create a service project ------------------------------------- 1.64s
2018-05-02 19:51:07,148 p=6835 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.86s
2018-05-02 19:53:59,594 p=6892 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:53:59,641 p=6892 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:53:59,641 p=6892 u=root |  Wednesday 02 May 2018  19:53:59 +0800 (0:00:00.052)       0:00:00.052 ********* 
2018-05-02 19:54:00,472 p=6892 u=root |  ok: [controller]
2018-05-02 19:54:00,474 p=6892 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:54:00,474 p=6892 u=root |  Wednesday 02 May 2018  19:54:00 +0800 (0:00:00.832)       0:00:00.885 ********* 
2018-05-02 19:54:02,587 p=6892 u=root |  fatal: [controller]: FAILED! => {"changed": false, "err": "Missing Project Name", "failed": true, "msg": "If you do not specify a token you must use a project name for authentication. Try adding [ login_project_name ] to the task", "rc": 2}
2018-05-02 19:54:02,591 p=6892 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:54:02,591 p=6892 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:54:02,592 p=6892 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:54:02,592 p=6892 u=root |  Wednesday 02 May 2018  19:54:02 +0800 (0:00:02.117)       0:00:03.002 ********* 
2018-05-02 19:54:02,593 p=6892 u=root |  =============================================================================== 
2018-05-02 19:54:02,593 p=6892 u=root |  Identity : Create a service project ------------------------------------- 2.12s
2018-05-02 19:54:02,593 p=6892 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.83s
2018-05-02 19:55:06,859 p=6932 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 19:55:06,904 p=6932 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 19:55:06,904 p=6932 u=root |  Wednesday 02 May 2018  19:55:06 +0800 (0:00:00.048)       0:00:00.048 ********* 
2018-05-02 19:55:07,833 p=6932 u=root |  ok: [controller]
2018-05-02 19:55:07,835 p=6932 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 19:55:07,835 p=6932 u=root |  Wednesday 02 May 2018  19:55:07 +0800 (0:00:00.930)       0:00:00.979 ********* 
2018-05-02 19:55:11,906 p=6932 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 19:55:11,908 p=6932 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_aqyRJy/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 19:55:11,911 p=6932 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 19:55:11,912 p=6932 u=root |  PLAY RECAP *********************************************************************
2018-05-02 19:55:11,912 p=6932 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 19:55:11,913 p=6932 u=root |  Wednesday 02 May 2018  19:55:11 +0800 (0:00:04.077)       0:00:05.057 ********* 
2018-05-02 19:55:11,913 p=6932 u=root |  =============================================================================== 
2018-05-02 19:55:11,913 p=6932 u=root |  Identity : Create a service project ------------------------------------- 4.08s
2018-05-02 19:55:11,914 p=6932 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.93s
2018-05-02 20:01:14,731 p=6992 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 20:01:14,779 p=6992 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 20:01:14,779 p=6992 u=root |  Wednesday 02 May 2018  20:01:14 +0800 (0:00:00.052)       0:00:00.052 ********* 
2018-05-02 20:01:15,879 p=6992 u=root |  ok: [controller]
2018-05-02 20:01:15,883 p=6992 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 20:01:15,884 p=6992 u=root |  Wednesday 02 May 2018  20:01:15 +0800 (0:00:01.104)       0:00:01.157 ********* 
2018-05-02 20:01:18,348 p=6992 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 20:01:18,349 p=6992 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_sL3Y5X/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 20:01:18,354 p=6992 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 20:01:18,354 p=6992 u=root |  PLAY RECAP *********************************************************************
2018-05-02 20:01:18,354 p=6992 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 20:01:18,355 p=6992 u=root |  Wednesday 02 May 2018  20:01:18 +0800 (0:00:02.471)       0:00:03.628 ********* 
2018-05-02 20:01:18,355 p=6992 u=root |  =============================================================================== 
2018-05-02 20:01:18,356 p=6992 u=root |  Identity : Create a service project ------------------------------------- 2.47s
2018-05-02 20:01:18,356 p=6992 u=root |  Identity : add admin-openrc file ---------------------------------------- 1.10s
2018-05-02 20:07:43,062 p=7034 u=root |  PLAY [install openstack] *******************************************************
2018-05-02 20:07:43,111 p=7034 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-02 20:07:43,111 p=7034 u=root |  Wednesday 02 May 2018  20:07:43 +0800 (0:00:00.053)       0:00:00.053 ********* 
2018-05-02 20:07:43,993 p=7034 u=root |  ok: [controller]
2018-05-02 20:07:43,995 p=7034 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-02 20:07:43,995 p=7034 u=root |  Wednesday 02 May 2018  20:07:43 +0800 (0:00:00.883)       0:00:00.937 ********* 
2018-05-02 20:07:48,703 p=7034 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-02 20:07:48,704 p=7034 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_1GXsSB/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-02 20:07:48,709 p=7034 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-02 20:07:48,709 p=7034 u=root |  PLAY RECAP *********************************************************************
2018-05-02 20:07:48,710 p=7034 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-02 20:07:48,711 p=7034 u=root |  Wednesday 02 May 2018  20:07:48 +0800 (0:00:04.715)       0:00:05.653 ********* 
2018-05-02 20:07:48,711 p=7034 u=root |  =============================================================================== 
2018-05-02 20:07:48,712 p=7034 u=root |  Identity : Create a service project ------------------------------------- 4.72s
2018-05-02 20:07:48,713 p=7034 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.88s
2018-05-03 14:07:38,911 p=7976 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:07:38,959 p=7976 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:07:38,960 p=7976 u=root |  Thursday 03 May 2018  14:07:38 +0800 (0:00:00.053)       0:00:00.053 ********** 
2018-05-03 14:07:49,914 p=7976 u=root |  ok: [controller]
2018-05-03 14:07:49,915 p=7976 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:07:49,916 p=7976 u=root |  Thursday 03 May 2018  14:07:49 +0800 (0:00:10.956)       0:00:11.009 ********** 
2018-05-03 14:07:55,405 p=7976 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": "pip install openstackclient", "delta": "0:00:05.089962", "end": "2018-05-03 14:07:58.008400", "failed": true, "rc": 1, "start": "2018-05-03 14:07:52.918438", "stderr": "  Could not find a version that satisfies the requirement openstackclient (from versions: )\nNo matching distribution found for openstackclient\nYou are using pip version 8.1.2, however version 10.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.", "stdout": "Collecting openstackclient", "stdout_lines": ["Collecting openstackclient"], "warnings": []}
2018-05-03 14:07:55,410 p=7976 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:07:55,411 p=7976 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:07:55,411 p=7976 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 14:07:55,412 p=7976 u=root |  Thursday 03 May 2018  14:07:55 +0800 (0:00:05.495)       0:00:16.505 ********** 
2018-05-03 14:07:55,412 p=7976 u=root |  =============================================================================== 
2018-05-03 14:07:55,412 p=7976 u=root |  Identity : add admin-openrc file --------------------------------------- 10.96s
2018-05-03 14:07:55,413 p=7976 u=root |  Identity : Install OpenStackClient -------------------------------------- 5.50s
2018-05-03 14:09:05,743 p=8016 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:09:05,788 p=8016 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:09:05,788 p=8016 u=root |  Thursday 03 May 2018  14:09:05 +0800 (0:00:00.049)       0:00:00.049 ********** 
2018-05-03 14:09:16,669 p=8016 u=root |  ok: [controller]
2018-05-03 14:09:16,673 p=8016 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:09:16,673 p=8016 u=root |  Thursday 03 May 2018  14:09:16 +0800 (0:00:10.885)       0:00:10.934 ********** 
2018-05-03 14:09:18,149 p=8016 u=root |  changed: [controller]
2018-05-03 14:09:18,151 p=8016 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 14:09:18,151 p=8016 u=root |  Thursday 03 May 2018  14:09:18 +0800 (0:00:01.477)       0:00:12.412 ********** 
2018-05-03 14:09:21,631 p=8016 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 14:09:21,632 p=8016 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_nZ7ltv/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 14:09:21,634 p=8016 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:09:21,634 p=8016 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:09:21,634 p=8016 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 14:09:21,635 p=8016 u=root |  Thursday 03 May 2018  14:09:21 +0800 (0:00:03.483)       0:00:15.896 ********** 
2018-05-03 14:09:21,635 p=8016 u=root |  =============================================================================== 
2018-05-03 14:09:21,635 p=8016 u=root |  Identity : add admin-openrc file --------------------------------------- 10.89s
2018-05-03 14:09:21,635 p=8016 u=root |  Identity : Create a service project ------------------------------------- 3.48s
2018-05-03 14:09:21,635 p=8016 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.48s
2018-05-03 14:13:22,046 p=8063 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:13:22,099 p=8063 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:13:22,099 p=8063 u=root |  Thursday 03 May 2018  14:13:22 +0800 (0:00:00.057)       0:00:00.057 ********** 
2018-05-03 14:13:32,967 p=8063 u=root |  ok: [controller]
2018-05-03 14:13:32,969 p=8063 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:13:32,969 p=8063 u=root |  Thursday 03 May 2018  14:13:32 +0800 (0:00:10.870)       0:00:10.927 ********** 
2018-05-03 14:13:34,267 p=8063 u=root |  changed: [controller]
2018-05-03 14:13:34,269 p=8063 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 14:13:34,269 p=8063 u=root |  Thursday 03 May 2018  14:13:34 +0800 (0:00:01.299)       0:00:12.227 ********** 
2018-05-03 14:13:36,344 p=8063 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "missing required arguments: endpoint"}
2018-05-03 14:13:36,346 p=8063 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:13:36,347 p=8063 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:13:36,347 p=8063 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 14:13:36,347 p=8063 u=root |  Thursday 03 May 2018  14:13:36 +0800 (0:00:02.077)       0:00:14.305 ********** 
2018-05-03 14:13:36,347 p=8063 u=root |  =============================================================================== 
2018-05-03 14:13:36,347 p=8063 u=root |  Identity : add admin-openrc file --------------------------------------- 10.87s
2018-05-03 14:13:36,348 p=8063 u=root |  Identity : Create a service project ------------------------------------- 2.08s
2018-05-03 14:13:36,348 p=8063 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.30s
2018-05-03 14:17:43,880 p=8094 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:17:43,926 p=8094 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:17:43,926 p=8094 u=root |  Thursday 03 May 2018  14:17:43 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 14:17:54,934 p=8094 u=root |  ok: [controller]
2018-05-03 14:17:54,938 p=8094 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:17:54,938 p=8094 u=root |  Thursday 03 May 2018  14:17:54 +0800 (0:00:11.011)       0:00:11.062 ********** 
2018-05-03 14:17:56,786 p=8094 u=root |  changed: [controller]
2018-05-03 14:17:56,788 p=8094 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 14:17:56,788 p=8094 u=root |  Thursday 03 May 2018  14:17:56 +0800 (0:00:01.849)       0:00:12.912 ********** 
2018-05-03 14:17:58,846 p=8094 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "msg": "missing required arguments: endpoint"}
2018-05-03 14:17:58,851 p=8094 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:17:58,851 p=8094 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:17:58,852 p=8094 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 14:17:58,852 p=8094 u=root |  Thursday 03 May 2018  14:17:58 +0800 (0:00:02.063)       0:00:14.976 ********** 
2018-05-03 14:17:58,852 p=8094 u=root |  =============================================================================== 
2018-05-03 14:17:58,853 p=8094 u=root |  Identity : add admin-openrc file --------------------------------------- 11.01s
2018-05-03 14:17:58,853 p=8094 u=root |  Identity : Create a service project ------------------------------------- 2.06s
2018-05-03 14:17:58,854 p=8094 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.85s
2018-05-03 14:21:22,198 p=8140 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:21:22,247 p=8140 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:21:22,247 p=8140 u=root |  Thursday 03 May 2018  14:21:22 +0800 (0:00:00.053)       0:00:00.053 ********** 
2018-05-03 14:21:33,139 p=8140 u=root |  ok: [controller]
2018-05-03 14:21:33,142 p=8140 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:21:33,142 p=8140 u=root |  Thursday 03 May 2018  14:21:33 +0800 (0:00:10.894)       0:00:10.948 ********** 
2018-05-03 14:21:34,745 p=8140 u=root |  changed: [controller]
2018-05-03 14:21:34,747 p=8140 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 14:21:34,747 p=8140 u=root |  Thursday 03 May 2018  14:21:34 +0800 (0:00:01.605)       0:00:12.553 ********** 
2018-05-03 14:21:36,364 p=8140 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 14:21:36,365 p=8140 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_clM_ic/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 14:21:36,367 p=8140 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:21:36,367 p=8140 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:21:36,367 p=8140 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 14:21:36,368 p=8140 u=root |  Thursday 03 May 2018  14:21:36 +0800 (0:00:01.620)       0:00:14.174 ********** 
2018-05-03 14:21:36,368 p=8140 u=root |  =============================================================================== 
2018-05-03 14:21:36,368 p=8140 u=root |  Identity : add admin-openrc file --------------------------------------- 10.90s
2018-05-03 14:21:36,368 p=8140 u=root |  Identity : Create a service project ------------------------------------- 1.62s
2018-05-03 14:21:36,368 p=8140 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.61s
2018-05-03 14:22:24,716 p=8170 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-03 14:22:24,794 p=8170 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-03 14:22:24,819 p=8170 u=root |  PLAYBOOK: openstack.yml ********************************************************
2018-05-03 14:22:24,819 p=8170 u=root |  1 plays in openstack.yml
2018-05-03 14:22:24,822 p=8170 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 14:22:24,868 p=8170 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 14:22:24,868 p=8170 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-03 14:22:24,869 p=8170 u=root |  Thursday 03 May 2018  14:22:24 +0800 (0:00:00.051)       0:00:00.051 ********** 
2018-05-03 14:22:25,038 p=8170 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/stat.py
2018-05-03 14:22:25,345 p=8170 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/file.py
2018-05-03 14:22:25,531 p=8170 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": null, 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-03 14:22:25,533 p=8170 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 14:22:25,534 p=8170 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-03 14:22:25,534 p=8170 u=root |  Thursday 03 May 2018  14:22:25 +0800 (0:00:00.665)       0:00:00.717 ********** 
2018-05-03 14:22:25,690 p=8170 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/commands/command.py
2018-05-03 14:22:26,753 p=8170 u=root |  changed: [controller] => {
    "changed": true, 
    "cmd": [
        "pip", 
        "install", 
        "python-openstackclient"
    ], 
    "delta": "0:00:00.876081", 
    "end": "2018-05-03 14:22:29.393170", 
    "invocation": {
        "module_args": {
            "_raw_params": "pip install python-openstackclient", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "warn": true
        }, 
        "module_name": "command"
    }, 
    "rc": 0, 
    "start": "2018-05-03 14:22:28.517089", 
    "stderr": "You are using pip version 8.1.2, however version 10.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.", 
    "stdout": "Requirement already satisfied (use --upgrade to upgrade): python-openstackclient in /usr/lib/python2.7/site-packages", 
    "stdout_lines": [
        "Requirement already satisfied (use --upgrade to upgrade): python-openstackclient in /usr/lib/python2.7/site-packages"
    ], 
    "warnings": []
}
2018-05-03 14:22:26,755 p=8170 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 14:22:26,755 p=8170 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7
2018-05-03 14:22:26,755 p=8170 u=root |  Thursday 03 May 2018  14:22:26 +0800 (0:00:01.221)       0:00:01.938 ********** 
2018-05-03 14:22:26,913 p=8170 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-03 14:22:30,436 p=8170 u=root |  An exception occurred during task execution. The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_1RcxmF/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-03 14:22:30,437 p=8170 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "failed": true, 
    "invocation": {
        "module_name": "keystone"
    }, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_1RcxmF/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE"
}
2018-05-03 14:22:30,442 p=8170 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 14:22:30,443 p=8170 u=root |  PLAY RECAP *********************************************************************
2018-05-03 14:22:30,443 p=8170 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 14:22:30,444 p=8170 u=root |  Thursday 03 May 2018  14:22:30 +0800 (0:00:03.688)       0:00:05.626 ********** 
2018-05-03 14:22:30,444 p=8170 u=root |  =============================================================================== 
2018-05-03 14:22:30,444 p=8170 u=root |  Identity : Create a service project ------------------------------------- 3.69s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7 
2018-05-03 14:22:30,445 p=8170 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.22s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 
2018-05-03 14:22:30,445 p=8170 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.67s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 
2018-05-03 17:00:35,594 p=8269 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:00:35,639 p=8269 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:00:35,640 p=8269 u=root |  Thursday 03 May 2018  17:00:35 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:00:46,476 p=8269 u=root |  ok: [controller]
2018-05-03 17:00:46,478 p=8269 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 17:00:46,478 p=8269 u=root |  Thursday 03 May 2018  17:00:46 +0800 (0:00:10.838)       0:00:10.888 ********** 
2018-05-03 17:00:47,757 p=8269 u=root |  changed: [controller]
2018-05-03 17:00:47,759 p=8269 u=root |  TASK [Identity : keystone] *****************************************************
2018-05-03 17:00:47,759 p=8269 u=root |  Thursday 03 May 2018  17:00:47 +0800 (0:00:01.281)       0:00:12.169 ********** 
2018-05-03 17:00:49,704 p=8269 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:00:49,705 p=8269 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_CoNnv_/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:00:49,708 p=8269 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:00:49,708 p=8269 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:00:49,708 p=8269 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 17:00:49,709 p=8269 u=root |  Thursday 03 May 2018  17:00:49 +0800 (0:00:01.949)       0:00:14.119 ********** 
2018-05-03 17:00:49,709 p=8269 u=root |  =============================================================================== 
2018-05-03 17:00:49,709 p=8269 u=root |  Identity : add admin-openrc file --------------------------------------- 10.84s
2018-05-03 17:00:49,709 p=8269 u=root |  Identity : keystone ----------------------------------------------------- 1.95s
2018-05-03 17:00:49,709 p=8269 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.28s
2018-05-03 17:11:03,519 p=8339 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:11:03,566 p=8339 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:11:03,567 p=8339 u=root |  Thursday 03 May 2018  17:11:03 +0800 (0:00:00.051)       0:00:00.051 ********** 
2018-05-03 17:11:14,328 p=8339 u=root |  ok: [controller]
2018-05-03 17:11:14,330 p=8339 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 17:11:14,330 p=8339 u=root |  Thursday 03 May 2018  17:11:14 +0800 (0:00:10.763)       0:00:10.814 ********** 
2018-05-03 17:11:15,551 p=8339 u=root |  changed: [controller]
2018-05-03 17:11:15,557 p=8339 u=root |  TASK [Identity : source] *******************************************************
2018-05-03 17:11:15,557 p=8339 u=root |  Thursday 03 May 2018  17:11:15 +0800 (0:00:01.227)       0:00:12.042 ********** 
2018-05-03 17:11:15,774 p=8339 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "source /root/admin-openrc", "failed": true, "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-05-03 17:11:15,778 p=8339 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:11:15,779 p=8339 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:11:15,779 p=8339 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 17:11:15,780 p=8339 u=root |  Thursday 03 May 2018  17:11:15 +0800 (0:00:00.222)       0:00:12.264 ********** 
2018-05-03 17:11:15,780 p=8339 u=root |  =============================================================================== 
2018-05-03 17:11:15,780 p=8339 u=root |  Identity : add admin-openrc file --------------------------------------- 10.76s
2018-05-03 17:11:15,781 p=8339 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.23s
2018-05-03 17:11:15,781 p=8339 u=root |  Identity : source ------------------------------------------------------- 0.22s
2018-05-03 17:13:27,462 p=8384 u=root |  ERROR! Syntax Error while loading YAML.


The error appears to have been in '/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml': line 8, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name: source
command: chmod 777 /root/admin-openrc && ./admin-openrc
^ here

2018-05-03 17:13:40,847 p=8407 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:13:40,893 p=8407 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:13:40,893 p=8407 u=root |  Thursday 03 May 2018  17:13:40 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:13:51,774 p=8407 u=root |  ok: [controller]
2018-05-03 17:13:51,775 p=8407 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 17:13:51,776 p=8407 u=root |  Thursday 03 May 2018  17:13:51 +0800 (0:00:10.882)       0:00:10.932 ********** 
2018-05-03 17:13:52,811 p=8407 u=root |  changed: [controller]
2018-05-03 17:13:52,813 p=8407 u=root |  TASK [Identity : source] *******************************************************
2018-05-03 17:13:52,813 p=8407 u=root |  Thursday 03 May 2018  17:13:52 +0800 (0:00:01.037)       0:00:11.970 ********** 
2018-05-03 17:13:53,063 p=8407 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["chmod", "777", "/root/admin-openrc", "&&", "./admin-openrc"], "delta": "0:00:00.004380", "end": "2018-05-03 17:13:55.899739", "failed": true, "rc": 1, "start": "2018-05-03 17:13:55.895359", "stderr": "chmod: cannot access &&: No such file or directory", "stdout": "", "stdout_lines": [], "warnings": ["Consider using file module with mode rather than running chmod"]}
2018-05-03 17:13:53,065 p=8407 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:13:53,065 p=8407 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:13:53,066 p=8407 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 17:13:53,066 p=8407 u=root |  Thursday 03 May 2018  17:13:53 +0800 (0:00:00.252)       0:00:12.222 ********** 
2018-05-03 17:13:53,066 p=8407 u=root |  =============================================================================== 
2018-05-03 17:13:53,066 p=8407 u=root |  Identity : add admin-openrc file --------------------------------------- 10.88s
2018-05-03 17:13:53,066 p=8407 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.04s
2018-05-03 17:13:53,067 p=8407 u=root |  Identity : source ------------------------------------------------------- 0.25s
2018-05-03 17:15:29,412 p=8453 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:15:29,456 p=8453 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:15:29,457 p=8453 u=root |  Thursday 03 May 2018  17:15:29 +0800 (0:00:00.048)       0:00:00.048 ********** 
2018-05-03 17:15:40,426 p=8453 u=root |  ok: [controller]
2018-05-03 17:15:40,428 p=8453 u=root |  TASK [Identity : Install OpenStackClient] **************************************
2018-05-03 17:15:40,428 p=8453 u=root |  Thursday 03 May 2018  17:15:40 +0800 (0:00:10.971)       0:00:11.020 ********** 
2018-05-03 17:15:42,193 p=8453 u=root |  changed: [controller]
2018-05-03 17:15:42,195 p=8453 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:15:42,196 p=8453 u=root |  Thursday 03 May 2018  17:15:42 +0800 (0:00:01.767)       0:00:12.787 ********** 
2018-05-03 17:15:44,624 p=8453 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:15:44,624 p=8453 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_aG2f54/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:15:44,626 p=8453 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:15:44,626 p=8453 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:15:44,626 p=8453 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-03 17:15:44,627 p=8453 u=root |  Thursday 03 May 2018  17:15:44 +0800 (0:00:02.431)       0:00:15.218 ********** 
2018-05-03 17:15:44,627 p=8453 u=root |  =============================================================================== 
2018-05-03 17:15:44,627 p=8453 u=root |  Identity : add admin-openrc file --------------------------------------- 10.97s
2018-05-03 17:15:44,627 p=8453 u=root |  Identity : Create a service project ------------------------------------- 2.43s
2018-05-03 17:15:44,627 p=8453 u=root |  Identity : Install OpenStackClient -------------------------------------- 1.77s
2018-05-03 17:28:22,633 p=8612 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:28:22,681 p=8612 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:28:22,681 p=8612 u=root |  Thursday 03 May 2018  17:28:22 +0800 (0:00:00.051)       0:00:00.051 ********** 
2018-05-03 17:28:33,608 p=8612 u=root |  ok: [controller]
2018-05-03 17:28:33,610 p=8612 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:28:33,610 p=8612 u=root |  Thursday 03 May 2018  17:28:33 +0800 (0:00:10.929)       0:00:10.981 ********** 
2018-05-03 17:28:38,361 p=8612 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: AttributeError: Unknown Attribute: domains
2018-05-03 17:28:38,361 p=8612 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_0wChes/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/httpclient.py\", line 891, in __getattr__\n    raise AttributeError(_(\"Unknown Attribute: %s\") % name)\nAttributeError: Unknown Attribute: domains\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:28:38,363 p=8612 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:28:38,363 p=8612 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:28:38,364 p=8612 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:28:38,364 p=8612 u=root |  Thursday 03 May 2018  17:28:38 +0800 (0:00:04.753)       0:00:15.734 ********** 
2018-05-03 17:28:38,364 p=8612 u=root |  =============================================================================== 
2018-05-03 17:28:38,364 p=8612 u=root |  Identity : add admin-openrc file --------------------------------------- 10.93s
2018-05-03 17:28:38,364 p=8612 u=root |  Identity : Create a service project ------------------------------------- 4.75s
2018-05-03 17:29:10,054 p=8652 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:29:10,100 p=8652 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:29:10,100 p=8652 u=root |  Thursday 03 May 2018  17:29:10 +0800 (0:00:00.051)       0:00:00.051 ********** 
2018-05-03 17:29:10,919 p=8652 u=root |  ok: [controller]
2018-05-03 17:29:10,921 p=8652 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:29:10,922 p=8652 u=root |  Thursday 03 May 2018  17:29:10 +0800 (0:00:00.821)       0:00:00.872 ********** 
2018-05-03 17:29:14,914 p=8652 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:29:14,914 p=8652 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_gBRWRA/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:29:14,916 p=8652 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:29:14,916 p=8652 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:29:14,917 p=8652 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:29:14,917 p=8652 u=root |  Thursday 03 May 2018  17:29:14 +0800 (0:00:03.995)       0:00:04.867 ********** 
2018-05-03 17:29:14,917 p=8652 u=root |  =============================================================================== 
2018-05-03 17:29:14,917 p=8652 u=root |  Identity : Create a service project ------------------------------------- 4.00s
2018-05-03 17:29:14,917 p=8652 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.82s
2018-05-03 17:30:52,023 p=8690 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:30:52,067 p=8690 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:30:52,068 p=8690 u=root |  Thursday 03 May 2018  17:30:52 +0800 (0:00:00.048)       0:00:00.048 ********** 
2018-05-03 17:30:52,808 p=8690 u=root |  ok: [controller]
2018-05-03 17:30:52,810 p=8690 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:30:52,811 p=8690 u=root |  Thursday 03 May 2018  17:30:52 +0800 (0:00:00.743)       0:00:00.791 ********** 
2018-05-03 17:30:54,236 p=8690 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.http.NotFound: The resource could not be found. (HTTP 404)
2018-05-03 17:30:54,237 p=8690 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_UMyrqD/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_UMyrqD/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_UMyrqD/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_UMyrqD/ansible_module_keystone.py\", line 687, in ensure_project\n    self._authenticate()\n  File \"/tmp/ansible_UMyrqD/ansible_module_keystone.py\", line 594, in _authenticate\n    token=token\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/client.py\", line 62, in Client\n    d = discover.Discover(session=session, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/discover.py\", line 185, in __init__\n    authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/_discover.py\", line 147, in __init__\n    authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/_discover.py\", line 41, in get_version_data\n    resp = session.get(url, headers=headers, authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 536, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 444, in request\n    raise exceptions.from_response(resp, method, url)\nkeystoneauth1.exceptions.http.NotFound: The resource could not be found. (HTTP 404)\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:30:54,238 p=8690 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:30:54,239 p=8690 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:30:54,239 p=8690 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:30:54,239 p=8690 u=root |  Thursday 03 May 2018  17:30:54 +0800 (0:00:01.428)       0:00:02.220 ********** 
2018-05-03 17:30:54,239 p=8690 u=root |  =============================================================================== 
2018-05-03 17:30:54,240 p=8690 u=root |  Identity : Create a service project ------------------------------------- 1.43s
2018-05-03 17:30:54,240 p=8690 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.74s
2018-05-03 17:31:42,635 p=8730 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:31:42,682 p=8730 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:31:42,682 p=8730 u=root |  Thursday 03 May 2018  17:31:42 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:31:43,329 p=8730 u=root |  ok: [controller]
2018-05-03 17:31:43,331 p=8730 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:31:43,332 p=8730 u=root |  Thursday 03 May 2018  17:31:43 +0800 (0:00:00.649)       0:00:00.700 ********** 
2018-05-03 17:31:45,150 p=8730 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.http.NotFound: The resource could not be found. (HTTP 404)
2018-05-03 17:31:45,151 p=8730 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_j3FiLr/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_j3FiLr/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_j3FiLr/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_j3FiLr/ansible_module_keystone.py\", line 687, in ensure_project\n    self._authenticate()\n  File \"/tmp/ansible_j3FiLr/ansible_module_keystone.py\", line 594, in _authenticate\n    token=token\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/client.py\", line 62, in Client\n    d = discover.Discover(session=session, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/discover.py\", line 185, in __init__\n    authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/_discover.py\", line 147, in __init__\n    authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/_discover.py\", line 41, in get_version_data\n    resp = session.get(url, headers=headers, authenticated=authenticated)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 536, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 444, in request\n    raise exceptions.from_response(resp, method, url)\nkeystoneauth1.exceptions.http.NotFound: The resource could not be found. (HTTP 404)\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:31:45,153 p=8730 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:31:45,153 p=8730 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:31:45,153 p=8730 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:31:45,153 p=8730 u=root |  Thursday 03 May 2018  17:31:45 +0800 (0:00:01.821)       0:00:02.522 ********** 
2018-05-03 17:31:45,153 p=8730 u=root |  =============================================================================== 
2018-05-03 17:31:45,154 p=8730 u=root |  Identity : Create a service project ------------------------------------- 1.82s
2018-05-03 17:31:45,154 p=8730 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.65s
2018-05-03 17:32:05,406 p=8767 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:32:05,451 p=8767 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:32:05,452 p=8767 u=root |  Thursday 03 May 2018  17:32:05 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:32:06,339 p=8767 u=root |  ok: [controller]
2018-05-03 17:32:06,343 p=8767 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:32:06,343 p=8767 u=root |  Thursday 03 May 2018  17:32:06 +0800 (0:00:00.891)       0:00:00.941 ********** 
2018-05-03 17:32:07,988 p=8767 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:32:07,990 p=8767 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_VWGOzB/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:32:07,993 p=8767 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:32:07,993 p=8767 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:32:07,993 p=8767 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:32:07,994 p=8767 u=root |  Thursday 03 May 2018  17:32:07 +0800 (0:00:01.650)       0:00:02.592 ********** 
2018-05-03 17:32:07,994 p=8767 u=root |  =============================================================================== 
2018-05-03 17:32:07,994 p=8767 u=root |  Identity : Create a service project ------------------------------------- 1.65s
2018-05-03 17:32:07,995 p=8767 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.89s
2018-05-03 17:32:24,731 p=8804 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:32:24,775 p=8804 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:32:24,775 p=8804 u=root |  Thursday 03 May 2018  17:32:24 +0800 (0:00:00.048)       0:00:00.048 ********** 
2018-05-03 17:32:25,490 p=8804 u=root |  ok: [controller]
2018-05-03 17:32:25,492 p=8804 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:32:25,492 p=8804 u=root |  Thursday 03 May 2018  17:32:25 +0800 (0:00:00.717)       0:00:00.766 ********** 
2018-05-03 17:32:27,578 p=8804 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:32:27,579 p=8804 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_piK_s8/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:32:27,583 p=8804 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:32:27,584 p=8804 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:32:27,584 p=8804 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:32:27,585 p=8804 u=root |  Thursday 03 May 2018  17:32:27 +0800 (0:00:02.092)       0:00:02.858 ********** 
2018-05-03 17:32:27,585 p=8804 u=root |  =============================================================================== 
2018-05-03 17:32:27,585 p=8804 u=root |  Identity : Create a service project ------------------------------------- 2.09s
2018-05-03 17:32:27,586 p=8804 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.72s
2018-05-03 17:38:18,320 p=8843 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:38:18,366 p=8843 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:38:18,367 p=8843 u=root |  Thursday 03 May 2018  17:38:18 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:38:19,174 p=8843 u=root |  ok: [controller]
2018-05-03 17:38:19,176 p=8843 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:38:19,176 p=8843 u=root |  Thursday 03 May 2018  17:38:19 +0800 (0:00:00.809)       0:00:00.860 ********** 
2018-05-03 17:38:20,577 p=8843 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:38:20,578 p=8843 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_GNHHWe/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:38:20,580 p=8843 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:38:20,580 p=8843 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:38:20,580 p=8843 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:38:20,580 p=8843 u=root |  Thursday 03 May 2018  17:38:20 +0800 (0:00:01.404)       0:00:02.264 ********** 
2018-05-03 17:38:20,580 p=8843 u=root |  =============================================================================== 
2018-05-03 17:38:20,581 p=8843 u=root |  Identity : Create a service project ------------------------------------- 1.40s
2018-05-03 17:38:20,581 p=8843 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.81s
2018-05-03 17:50:22,502 p=8885 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:50:22,551 p=8885 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:50:22,551 p=8885 u=root |  Thursday 03 May 2018  17:50:22 +0800 (0:00:00.053)       0:00:00.053 ********** 
2018-05-03 17:50:23,306 p=8885 u=root |  ok: [controller]
2018-05-03 17:50:23,308 p=8885 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:50:23,308 p=8885 u=root |  Thursday 03 May 2018  17:50:23 +0800 (0:00:00.756)       0:00:00.810 ********** 
2018-05-03 17:50:24,729 p=8885 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 17:50:24,730 p=8885 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_vScDEj/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 17:50:24,732 p=8885 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:50:24,732 p=8885 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:50:24,732 p=8885 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:50:24,732 p=8885 u=root |  Thursday 03 May 2018  17:50:24 +0800 (0:00:01.423)       0:00:02.234 ********** 
2018-05-03 17:50:24,732 p=8885 u=root |  =============================================================================== 
2018-05-03 17:50:24,733 p=8885 u=root |  Identity : Create a service project ------------------------------------- 1.42s
2018-05-03 17:50:24,733 p=8885 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.76s
2018-05-03 17:53:35,860 p=8924 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-03 17:53:35,939 p=8924 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-03 17:53:35,963 p=8924 u=root |  PLAYBOOK: openstack.yml ********************************************************
2018-05-03 17:53:35,963 p=8924 u=root |  1 plays in openstack.yml
2018-05-03 17:53:35,965 p=8924 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:53:36,010 p=8924 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:53:36,010 p=8924 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-03 17:53:36,011 p=8924 u=root |  Thursday 03 May 2018  17:53:36 +0800 (0:00:00.050)       0:00:00.050 ********** 
2018-05-03 17:53:36,177 p=8924 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/stat.py
2018-05-03 17:53:36,530 p=8924 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/file.py
2018-05-03 17:53:36,695 p=8924 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": null, 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0777", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-03 17:53:36,699 p=8924 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:53:36,700 p=8924 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-03 17:53:36,700 p=8924 u=root |  Thursday 03 May 2018  17:53:36 +0800 (0:00:00.689)       0:00:00.739 ********** 
2018-05-03 17:53:37,179 p=8924 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-03 17:53:38,410 p=8924 u=root |  An exception occurred during task execution. The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_uNnYad/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-03 17:53:38,412 p=8924 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "failed": true, 
    "invocation": {
        "module_name": "keystone"
    }, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_uNnYad/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE"
}
2018-05-03 17:53:38,416 p=8924 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:53:38,416 p=8924 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:53:38,417 p=8924 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:53:38,417 p=8924 u=root |  Thursday 03 May 2018  17:53:38 +0800 (0:00:01.717)       0:00:02.457 ********** 
2018-05-03 17:53:38,418 p=8924 u=root |  =============================================================================== 
2018-05-03 17:53:38,418 p=8924 u=root |  Identity : Create a service project ------------------------------------- 1.72s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 
2018-05-03 17:53:38,418 p=8924 u=root |  Identity : add admin-openrc file ---------------------------------------- 0.69s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 
2018-05-03 17:56:43,604 p=8951 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-03 17:56:43,677 p=8951 u=root |  statically included: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-03 17:56:43,699 p=8951 u=root |  PLAYBOOK: openstack.yml ********************************************************
2018-05-03 17:56:43,699 p=8951 u=root |  1 plays in openstack.yml
2018-05-03 17:56:43,701 p=8951 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 17:56:43,745 p=8951 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 17:56:43,745 p=8951 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-03 17:56:43,745 p=8951 u=root |  Thursday 03 May 2018  17:56:43 +0800 (0:00:00.048)       0:00:00.048 ********** 
2018-05-03 17:56:43,903 p=8951 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/stat.py
2018-05-03 17:56:44,554 p=8951 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/core/files/file.py
2018-05-03 17:56:44,809 p=8951 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": null, 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0777", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-03 17:56:44,813 p=8951 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 17:56:44,814 p=8951 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-03 17:56:44,814 p=8951 u=root |  Thursday 03 May 2018  17:56:44 +0800 (0:00:01.069)       0:00:01.117 ********** 
2018-05-03 17:56:45,183 p=8951 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-03 17:56:46,427 p=8951 u=root |  An exception occurred during task execution. The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_tQERGF/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-03 17:56:46,428 p=8951 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "failed": true, 
    "invocation": {
        "module_name": "keystone"
    }, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_tQERGF/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE"
}
2018-05-03 17:56:46,433 p=8951 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 17:56:46,433 p=8951 u=root |  PLAY RECAP *********************************************************************
2018-05-03 17:56:46,433 p=8951 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 17:56:46,434 p=8951 u=root |  Thursday 03 May 2018  17:56:46 +0800 (0:00:01.619)       0:00:02.737 ********** 
2018-05-03 17:56:46,434 p=8951 u=root |  =============================================================================== 
2018-05-03 17:56:46,435 p=8951 u=root |  Identity : Create a service project ------------------------------------- 1.62s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 
2018-05-03 17:56:46,435 p=8951 u=root |  Identity : add admin-openrc file ---------------------------------------- 1.07s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 
2018-05-03 18:02:03,920 p=9053 u=root |  PLAY [install openstack] *******************************************************
2018-05-03 18:02:03,966 p=9053 u=root |  TASK [Identity : add admin-openrc file] ****************************************
2018-05-03 18:02:03,967 p=9053 u=root |  Thursday 03 May 2018  18:02:03 +0800 (0:00:00.051)       0:00:00.051 ********** 
2018-05-03 18:02:04,958 p=9053 u=root |  ok: [controller]
2018-05-03 18:02:04,962 p=9053 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-03 18:02:04,962 p=9053 u=root |  Thursday 03 May 2018  18:02:04 +0800 (0:00:00.995)       0:00:01.046 ********** 
2018-05-03 18:02:07,389 p=9053 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 18:02:07,390 p=9053 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible__LsVRj/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-03 18:02:07,393 p=9053 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 18:02:07,393 p=9053 u=root |  PLAY RECAP *********************************************************************
2018-05-03 18:02:07,393 p=9053 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 18:02:07,393 p=9053 u=root |  Thursday 03 May 2018  18:02:07 +0800 (0:00:02.431)       0:00:03.477 ********** 
2018-05-03 18:02:07,394 p=9053 u=root |  =============================================================================== 
2018-05-03 18:02:07,394 p=9053 u=root |  Identity : Create a service project ------------------------------------- 2.43s
2018-05-03 18:02:07,394 p=9053 u=root |  Identity : add admin-openrc file ---------------------------------------- 1.00s
2018-05-03 18:03:25,100 p=9117 u=root |  PLAY [install openstack] ************************************************************************************
2018-05-03 18:03:25,121 p=9117 u=root |  TASK [Identity : add admin-openrc file] *********************************************************************
2018-05-03 18:03:25,121 p=9117 u=root |  Thursday 03 May 2018  18:03:25 +0800 (0:00:00.087)       0:00:00.087 ********** 
2018-05-03 18:03:27,470 p=9117 u=root |  ok: [controller]
2018-05-03 18:03:27,484 p=9117 u=root |  TASK [Identity : Create a service project] ******************************************************************
2018-05-03 18:03:27,485 p=9117 u=root |  Thursday 03 May 2018  18:03:27 +0800 (0:00:02.363)       0:00:02.450 ********** 
2018-05-03 18:03:29,640 p=9117 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-03 18:03:29,641 p=9117 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_GStUeo/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-03 18:03:29,645 p=9117 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-03 18:03:29,645 p=9117 u=root |  PLAY RECAP **************************************************************************************************
2018-05-03 18:03:29,645 p=9117 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-03 18:03:29,646 p=9117 u=root |  Thursday 03 May 2018  18:03:29 +0800 (0:00:02.161)       0:00:04.611 ********** 
2018-05-03 18:03:29,646 p=9117 u=root |  =============================================================================== 
2018-05-03 18:03:29,647 p=9117 u=root |  Identity : add admin-openrc file --------------------------------------------------------------------- 2.36s
2018-05-03 18:03:29,647 p=9117 u=root |  Identity : Create a service project ------------------------------------------------------------------ 2.16s
2018-05-04 12:36:51,557 p=10157 u=root |  ERROR! the playbook: openstack. could not be found
2018-05-04 12:36:54,826 p=10166 u=root |  PLAY [install openstack] ***************************************************************************************************************************
2018-05-04 12:36:54,865 p=10166 u=root |  TASK [Identity : Create a service project] *********************************************************************************************************
2018-05-04 12:36:54,865 p=10166 u=root |  Friday 04 May 2018  12:36:54 +0800 (0:00:00.150)       0:00:00.150 ************ 
2018-05-04 12:37:08,664 p=10166 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-04 12:37:08,665 p=10166 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_ztivMT/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-04 12:37:08,667 p=10166 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-04 12:37:08,667 p=10166 u=root |  PLAY RECAP *****************************************************************************************************************************************
2018-05-04 12:37:08,668 p=10166 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-04 12:37:08,668 p=10166 u=root |  Friday 04 May 2018  12:37:08 +0800 (0:00:13.802)       0:00:13.952 ************ 
2018-05-04 12:37:08,668 p=10166 u=root |  =============================================================================== 
2018-05-04 12:37:08,668 p=10166 u=root |  Identity : Create a service project -------------------------------------------------------------------------------------------------------- 13.80s
2018-05-04 12:37:48,239 p=10184 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-04 12:37:48,656 p=10184 u=root |  PLAY [install openstack] ***************************************************************************************************************************
2018-05-04 12:37:48,675 p=10184 u=root |  TASK [Identity : Create a service project] *********************************************************************************************************
2018-05-04 12:37:48,675 p=10184 u=root |  Friday 04 May 2018  12:37:48 +0800 (0:00:00.082)       0:00:00.082 ************ 
2018-05-04 12:37:51,110 p=10184 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-04 12:37:51,111 p=10184 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_2mJVJ0/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-04 12:37:51,113 p=10184 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-04 12:37:51,113 p=10184 u=root |  PLAY RECAP *****************************************************************************************************************************************
2018-05-04 12:37:51,113 p=10184 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-04 12:37:51,114 p=10184 u=root |  Friday 04 May 2018  12:37:51 +0800 (0:00:02.438)       0:00:02.520 ************ 
2018-05-04 12:37:51,114 p=10184 u=root |  =============================================================================== 
2018-05-04 12:37:51,114 p=10184 u=root |  Identity : Create a service project --------------------------------------------------------------------------------------------------------- 2.44s
2018-05-04 12:37:59,447 p=10199 u=root |  ansible-playbook 2.5.2
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-04 12:37:59,447 p=10199 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-04 12:37:59,467 p=10199 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-04 12:37:59,665 p=10199 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-04 12:37:59,781 p=10199 u=root |  PLAYBOOK: openstack.yml ****************************************************************************************************************************
2018-05-04 12:37:59,782 p=10199 u=root |  1 plays in openstack.yml
2018-05-04 12:37:59,819 p=10199 u=root |  PLAY [install openstack] ***************************************************************************************************************************
2018-05-04 12:37:59,832 p=10199 u=root |  META: ran handlers
2018-05-04 12:37:59,837 p=10199 u=root |  TASK [Identity : Create a service project] *********************************************************************************************************
2018-05-04 12:37:59,838 p=10199 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-04 12:37:59,838 p=10199 u=root |  Friday 04 May 2018  12:37:59 +0800 (0:00:00.083)       0:00:00.083 ************ 
2018-05-04 12:38:00,089 p=10199 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-04 12:38:01,340 p=10199 u=root |  The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_sbcyxe/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-04 12:38:01,341 p=10199 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_sbcyxe/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE", 
    "rc": 1
}
2018-05-04 12:38:01,344 p=10199 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-04 12:38:01,345 p=10199 u=root |  PLAY RECAP *****************************************************************************************************************************************
2018-05-04 12:38:01,345 p=10199 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-04 12:38:01,345 p=10199 u=root |  Friday 04 May 2018  12:38:01 +0800 (0:00:01.507)       0:00:01.590 ************ 
2018-05-04 12:38:01,345 p=10199 u=root |  =============================================================================== 
2018-05-04 12:38:01,345 p=10199 u=root |  Identity : Create a service project --------------------------------------------------------------------------------------------------------- 1.51s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 ----------------------------------------------------------------
2018-05-07 09:50:29,824 p=12981 u=root |  PLAY [install openstack] ***************************************************************************************************
2018-05-07 09:50:29,843 p=12981 u=root |  TASK [Identity : Create a service project] *********************************************************************************
2018-05-07 09:50:29,844 p=12981 u=root |  Monday 07 May 2018  09:50:29 +0800 (0:00:00.088)       0:00:00.088 ************ 
2018-05-07 09:50:45,638 p=12981 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 09:50:45,639 p=12981 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_gSH_R_/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 09:50:45,643 p=12981 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 09:50:45,643 p=12981 u=root |  PLAY RECAP *****************************************************************************************************************
2018-05-07 09:50:45,644 p=12981 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 09:50:45,645 p=12981 u=root |  Monday 07 May 2018  09:50:45 +0800 (0:00:15.800)       0:00:15.888 ************ 
2018-05-07 09:50:45,645 p=12981 u=root |  =============================================================================== 
2018-05-07 09:50:45,645 p=12981 u=root |  Identity : Create a service project -------------------------------------------------------------------------------- 15.80s
2018-05-07 10:00:33,585 p=13052 u=root |  PLAY [install openstack] ***************************************************************************************************
2018-05-07 10:00:33,603 p=13052 u=root |  TASK [Identity : Create a service project] *********************************************************************************
2018-05-07 10:00:33,604 p=13052 u=root |  Monday 07 May 2018  10:00:33 +0800 (0:00:00.081)       0:00:00.081 ************ 
2018-05-07 10:00:46,459 p=13052 u=root |  fatal: [controller]: FAILED! => {"changed": false, "msg": "missing required arguments: endpoint"}
2018-05-07 10:00:46,461 p=13052 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:00:46,461 p=13052 u=root |  PLAY RECAP *****************************************************************************************************************
2018-05-07 10:00:46,461 p=13052 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:00:46,461 p=13052 u=root |  Monday 07 May 2018  10:00:46 +0800 (0:00:12.857)       0:00:12.939 ************ 
2018-05-07 10:00:46,462 p=13052 u=root |  =============================================================================== 
2018-05-07 10:00:46,462 p=13052 u=root |  Identity : Create a service project -------------------------------------------------------------------------------- 12.86s
2018-05-07 10:01:16,700 p=13103 u=root |  PLAY [install openstack] ***************************************************************************************************
2018-05-07 10:01:16,717 p=13103 u=root |  TASK [Identity : Create a service project] *********************************************************************************
2018-05-07 10:01:16,718 p=13103 u=root |  Monday 07 May 2018  10:01:16 +0800 (0:00:00.080)       0:00:00.080 ************ 
2018-05-07 10:01:18,187 p=13103 u=root |  fatal: [controller]: FAILED! => {"changed": false, "err": "Missing Project Name", "msg": "If you do not specify a token you must use a project name for authentication. Try adding [ login_project_name ] to the task", "rc": 2}
2018-05-07 10:01:18,190 p=13103 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:01:18,190 p=13103 u=root |  PLAY RECAP *****************************************************************************************************************
2018-05-07 10:01:18,190 p=13103 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:01:18,191 p=13103 u=root |  Monday 07 May 2018  10:01:18 +0800 (0:00:01.472)       0:00:01.553 ************ 
2018-05-07 10:01:18,191 p=13103 u=root |  =============================================================================== 
2018-05-07 10:01:18,191 p=13103 u=root |  Identity : Create a service project --------------------------------------------------------------------------------- 1.47s
2018-05-07 10:03:38,546 p=13135 u=root |  PLAY [install openstack] ***************************************************************************************************
2018-05-07 10:03:38,565 p=13135 u=root |  TASK [Identity : Create a service project] *********************************************************************************
2018-05-07 10:03:38,566 p=13135 u=root |  Monday 07 May 2018  10:03:38 +0800 (0:00:00.084)       0:00:00.084 ************ 
2018-05-07 10:03:53,617 p=13135 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 10:03:53,617 p=13135 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_czvGA6/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 10:03:53,619 p=13135 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:03:53,619 p=13135 u=root |  PLAY RECAP *****************************************************************************************************************
2018-05-07 10:03:53,620 p=13135 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:03:53,620 p=13135 u=root |  Monday 07 May 2018  10:03:53 +0800 (0:00:15.054)       0:00:15.138 ************ 
2018-05-07 10:03:53,620 p=13135 u=root |  =============================================================================== 
2018-05-07 10:03:53,620 p=13135 u=root |  Identity : Create a service project -------------------------------------------------------------------------------- 15.05s
2018-05-07 10:11:35,185 p=13201 u=root |  PLAY [install openstack] *******************************************************
2018-05-07 10:11:35,204 p=13201 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-07 10:11:35,204 p=13201 u=root |  Monday 07 May 2018  10:11:35 +0800 (0:00:00.086)       0:00:00.086 ************ 
2018-05-07 10:11:50,503 p=13201 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 10:11:50,504 p=13201 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_y8y7hS/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 10:11:50,506 p=13201 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:11:50,506 p=13201 u=root |  PLAY RECAP *********************************************************************
2018-05-07 10:11:50,507 p=13201 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:11:50,507 p=13201 u=root |  Monday 07 May 2018  10:11:50 +0800 (0:00:15.302)       0:00:15.389 ************ 
2018-05-07 10:11:50,507 p=13201 u=root |  =============================================================================== 
2018-05-07 10:11:50,507 p=13201 u=root |  Identity : Create a service project ------------------------------------ 15.30s
2018-05-07 10:13:25,788 p=13235 u=root |  PLAY [install openstack] **********************************************************************************************************************
2018-05-07 10:13:25,807 p=13235 u=root |  TASK [Identity : Create a service project] ****************************************************************************************************
2018-05-07 10:13:25,807 p=13235 u=root |  Monday 07 May 2018  10:13:25 +0800 (0:00:00.083)       0:00:00.083 ************ 
2018-05-07 10:13:38,744 p=13235 u=root |  fatal: [controller]: FAILED! => {"changed": false, "msg": "missing required arguments: endpoint"}
2018-05-07 10:13:38,748 p=13235 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:13:38,748 p=13235 u=root |  PLAY RECAP ************************************************************************************************************************************
2018-05-07 10:13:38,749 p=13235 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:13:38,749 p=13235 u=root |  Monday 07 May 2018  10:13:38 +0800 (0:00:12.941)       0:00:13.025 ************ 
2018-05-07 10:13:38,750 p=13235 u=root |  =============================================================================== 
2018-05-07 10:13:38,750 p=13235 u=root |  Identity : Create a service project --------------------------------------------------------------------------------------------------- 12.94s
2018-05-07 10:13:57,911 p=13269 u=root |  PLAY [install openstack] **********************************************************************************************************************
2018-05-07 10:13:57,929 p=13269 u=root |  TASK [Identity : Create a service project] ****************************************************************************************************
2018-05-07 10:13:57,929 p=13269 u=root |  Monday 07 May 2018  10:13:57 +0800 (0:00:00.080)       0:00:00.080 ************ 
2018-05-07 10:14:01,443 p=13269 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 10:14:01,444 p=13269 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_cTSTo6/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 10:14:01,447 p=13269 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 10:14:01,448 p=13269 u=root |  PLAY RECAP ************************************************************************************************************************************
2018-05-07 10:14:01,448 p=13269 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 10:14:01,449 p=13269 u=root |  Monday 07 May 2018  10:14:01 +0800 (0:00:03.519)       0:00:03.600 ************ 
2018-05-07 10:14:01,449 p=13269 u=root |  =============================================================================== 
2018-05-07 10:14:01,449 p=13269 u=root |  Identity : Create a service project ---------------------------------------------------------------------------------------------------- 3.52s
2018-05-07 13:51:38,624 p=13842 u=root |  PLAY [install openstack] **********************************************************************************************************************
2018-05-07 13:51:38,657 p=13842 u=root |  TASK [Environment : set hostname] *************************************************************************************************************
2018-05-07 13:51:38,657 p=13842 u=root |  Monday 07 May 2018  13:51:38 +0800 (0:00:00.101)       0:00:00.101 ************ 
2018-05-07 13:51:55,862 p=13842 u=root |  changed: [controller]
2018-05-07 13:51:55,875 p=13842 u=root |  TASK [Environment : add host file] ************************************************************************************************************
2018-05-07 13:51:55,875 p=13842 u=root |  Monday 07 May 2018  13:51:55 +0800 (0:00:17.217)       0:00:17.319 ************ 
2018-05-07 13:51:56,735 p=13842 u=root |  changed: [controller]
2018-05-07 13:51:56,746 p=13842 u=root |  TASK [Environment : install chrony] ***********************************************************************************************************
2018-05-07 13:51:56,747 p=13842 u=root |  Monday 07 May 2018  13:51:56 +0800 (0:00:00.871)       0:00:18.190 ************ 
2018-05-07 13:52:13,860 p=13842 u=root |  changed: [controller]
2018-05-07 13:52:13,867 p=13842 u=root |  TASK [Environment : change the /etc/chrony.conf file] *****************************************************************************************
2018-05-07 13:52:13,867 p=13842 u=root |  Monday 07 May 2018  13:52:13 +0800 (0:00:17.120)       0:00:35.311 ************ 
2018-05-07 13:52:14,229 p=13842 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 13:52:14,527 p=13842 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 13:52:14,832 p=13842 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 13:52:15,137 p=13842 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 13:52:15,146 p=13842 u=root |  TASK [Environment : change the /etc/chrony.conf file] *****************************************************************************************
2018-05-07 13:52:15,146 p=13842 u=root |  Monday 07 May 2018  13:52:15 +0800 (0:00:01.278)       0:00:36.590 ************ 
2018-05-07 13:52:15,451 p=13842 u=root |  changed: [controller]
2018-05-07 13:52:15,458 p=13842 u=root |  TASK [Environment : restart NTP] **************************************************************************************************************
2018-05-07 13:52:15,459 p=13842 u=root |  Monday 07 May 2018  13:52:15 +0800 (0:00:00.312)       0:00:36.902 ************ 
2018-05-07 13:52:16,745 p=13842 u=root |  changed: [controller]
2018-05-07 13:52:16,754 p=13842 u=root |  TASK [Environment : install centos-release-openstack-newton] **********************************************************************************
2018-05-07 13:52:16,754 p=13842 u=root |  Monday 07 May 2018  13:52:16 +0800 (0:00:01.295)       0:00:38.198 ************ 
2018-05-07 13:52:19,396 p=13842 u=root |  changed: [controller]
2018-05-07 13:52:19,402 p=13842 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ************************************************
2018-05-07 13:52:19,402 p=13842 u=root |  Monday 07 May 2018  13:52:19 +0800 (0:00:02.648)       0:00:40.846 ************ 
2018-05-07 13:57:05,175 p=13842 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-07 13:57:05,194 p=13842 u=root |  TASK [Environment : install sql] **************************************************************************************************************
2018-05-07 13:57:05,195 p=13842 u=root |  Monday 07 May 2018  13:57:05 +0800 (0:04:45.792)       0:05:26.639 ************ 
2018-05-07 13:57:45,533 p=13842 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-07 13:57:45,542 p=13842 u=root |  TASK [Environment : add mariadb_openstack.cnf file] *******************************************************************************************
2018-05-07 13:57:45,542 p=13842 u=root |  Monday 07 May 2018  13:57:45 +0800 (0:00:40.346)       0:06:06.986 ************ 
2018-05-07 13:57:46,708 p=13842 u=root |  changed: [controller]
2018-05-07 13:57:46,722 p=13842 u=root |  TASK [Environment : install expect] ***********************************************************************************************************
2018-05-07 13:57:46,723 p=13842 u=root |  Monday 07 May 2018  13:57:46 +0800 (0:00:01.180)       0:06:08.166 ************ 
2018-05-07 13:57:51,439 p=13842 u=root |  changed: [controller]
2018-05-07 13:57:51,445 p=13842 u=root |  TASK [Environment : copy file] ****************************************************************************************************************
2018-05-07 13:57:51,446 p=13842 u=root |  Monday 07 May 2018  13:57:51 +0800 (0:00:04.723)       0:06:12.889 ************ 
2018-05-07 13:57:52,278 p=13842 u=root |  changed: [controller]
2018-05-07 13:57:52,285 p=13842 u=root |  TASK [Environment : chmod] ********************************************************************************************************************
2018-05-07 13:57:52,285 p=13842 u=root |  Monday 07 May 2018  13:57:52 +0800 (0:00:00.839)       0:06:13.729 ************ 
2018-05-07 13:57:52,819 p=13842 u=root |  changed: [controller]
2018-05-07 13:57:52,826 p=13842 u=root |  TASK [Environment : start mariadb] ************************************************************************************************************
2018-05-07 13:57:52,826 p=13842 u=root |  Monday 07 May 2018  13:57:52 +0800 (0:00:00.541)       0:06:14.270 ************ 
2018-05-07 13:58:05,485 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:05,502 p=13842 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] *********************************************************************************
2018-05-07 13:58:05,503 p=13842 u=root |  Monday 07 May 2018  13:58:05 +0800 (0:00:12.676)       0:06:26.947 ************ 
2018-05-07 13:58:06,440 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:06,454 p=13842 u=root |  TASK [Environment : del mysql_secure_installation.exp] ****************************************************************************************
2018-05-07 13:58:06,455 p=13842 u=root |  Monday 07 May 2018  13:58:06 +0800 (0:00:00.951)       0:06:27.898 ************ 
2018-05-07 13:58:06,872 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:06,885 p=13842 u=root |  TASK [Environment : install rabbitmq] *********************************************************************************************************
2018-05-07 13:58:06,886 p=13842 u=root |  Monday 07 May 2018  13:58:06 +0800 (0:00:00.430)       0:06:28.329 ************ 
2018-05-07 13:58:37,505 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:37,518 p=13842 u=root |  TASK [Environment : start rabbitmq-server] ****************************************************************************************************
2018-05-07 13:58:37,518 p=13842 u=root |  Monday 07 May 2018  13:58:37 +0800 (0:00:30.632)       0:06:58.962 ************ 
2018-05-07 13:58:42,199 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:42,207 p=13842 u=root |  TASK [Environment : useradd openstack] ********************************************************************************************************
2018-05-07 13:58:42,207 p=13842 u=root |  Monday 07 May 2018  13:58:42 +0800 (0:00:04.689)       0:07:03.651 ************ 
2018-05-07 13:58:44,155 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:44,162 p=13842 u=root |  TASK [Environment : useradd openstack] ********************************************************************************************************
2018-05-07 13:58:44,162 p=13842 u=root |  Monday 07 May 2018  13:58:44 +0800 (0:00:01.954)       0:07:05.606 ************ 
2018-05-07 13:58:46,456 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:46,463 p=13842 u=root |  TASK [Environment : install Memcached] ********************************************************************************************************
2018-05-07 13:58:46,463 p=13842 u=root |  Monday 07 May 2018  13:58:46 +0800 (0:00:02.300)       0:07:07.907 ************ 
2018-05-07 13:58:50,282 p=13842 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-05-07 13:58:50,289 p=13842 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] *********************************************************************************
2018-05-07 13:58:50,289 p=13842 u=root |  Monday 07 May 2018  13:58:50 +0800 (0:00:03.825)       0:07:11.733 ************ 
2018-05-07 13:58:50,658 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:50,667 p=13842 u=root |  TASK [Environment : restart memcached] ********************************************************************************************************
2018-05-07 13:58:50,667 p=13842 u=root |  Monday 07 May 2018  13:58:50 +0800 (0:00:00.377)       0:07:12.110 ************ 
2018-05-07 13:58:51,709 p=13842 u=root |  changed: [controller]
2018-05-07 13:58:51,716 p=13842 u=root |  TASK [Identity : install depends] *************************************************************************************************************
2018-05-07 13:58:51,716 p=13842 u=root |  Monday 07 May 2018  13:58:51 +0800 (0:00:01.049)       0:07:13.160 ************ 
2018-05-07 13:59:15,402 p=13842 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-07 13:59:15,415 p=13842 u=root |  TASK [Identity : create keystone database] ****************************************************************************************************
2018-05-07 13:59:15,416 p=13842 u=root |  Monday 07 May 2018  13:59:15 +0800 (0:00:23.699)       0:07:36.860 ************ 
2018-05-07 13:59:15,972 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:15,978 p=13842 u=root |  TASK [Identity : Grant access to the DB for keystone] *****************************************************************************************
2018-05-07 13:59:15,978 p=13842 u=root |  Monday 07 May 2018  13:59:15 +0800 (0:00:00.562)       0:07:37.422 ************ 
2018-05-07 13:59:16,519 p=13842 u=root |  changed: [controller] => (item=localhost)
2018-05-07 13:59:16,803 p=13842 u=root |  changed: [controller] => (item=%)
2018-05-07 13:59:16,812 p=13842 u=root |  TASK [Identity : Install packages] ************************************************************************************************************
2018-05-07 13:59:16,813 p=13842 u=root |  Monday 07 May 2018  13:59:16 +0800 (0:00:00.833)       0:07:38.256 ************ 
2018-05-07 13:59:46,382 p=13842 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-07 13:59:46,390 p=13842 u=root |  TASK [Identity : Install OpenStackClient] *****************************************************************************************************
2018-05-07 13:59:46,391 p=13842 u=root |  Monday 07 May 2018  13:59:46 +0800 (0:00:29.578)       0:08:07.834 ************ 
2018-05-07 13:59:49,186 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:49,193 p=13842 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] *********************************************************************************
2018-05-07 13:59:49,193 p=13842 u=root |  Monday 07 May 2018  13:59:49 +0800 (0:00:02.802)       0:08:10.637 ************ 
2018-05-07 13:59:49,521 p=13842 u=root |  changed: [controller] => (item={u'key': u'^#connection =', u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone'})
2018-05-07 13:59:49,779 p=13842 u=root |  changed: [controller] => (item={u'key': u'^#provider = uuid', u'value': u'provider = fernet'})
2018-05-07 13:59:49,789 p=13842 u=root |  TASK [Identity : populate the identity service] ***********************************************************************************************
2018-05-07 13:59:49,789 p=13842 u=root |  Monday 07 May 2018  13:59:49 +0800 (0:00:00.595)       0:08:11.233 ************ 
2018-05-07 13:59:53,347 p=13842 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-07 13:59:53,347 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:53,354 p=13842 u=root |  TASK [Identity : Initialize Fernet key repositories] ******************************************************************************************
2018-05-07 13:59:53,355 p=13842 u=root |  Monday 07 May 2018  13:59:53 +0800 (0:00:03.565)       0:08:14.798 ************ 
2018-05-07 13:59:54,611 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:54,618 p=13842 u=root |  TASK [Identity : and] *************************************************************************************************************************
2018-05-07 13:59:54,618 p=13842 u=root |  Monday 07 May 2018  13:59:54 +0800 (0:00:01.263)       0:08:16.062 ************ 
2018-05-07 13:59:56,254 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:56,262 p=13842 u=root |  TASK [Identity : Bootstrap the Identity service] **********************************************************************************************
2018-05-07 13:59:56,262 p=13842 u=root |  Monday 07 May 2018  13:59:56 +0800 (0:00:01.644)       0:08:17.706 ************ 
2018-05-07 13:59:58,832 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:58,838 p=13842 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] **********************************************************************************
2018-05-07 13:59:58,839 p=13842 u=root |  Monday 07 May 2018  13:59:58 +0800 (0:00:02.576)       0:08:20.282 ************ 
2018-05-07 13:59:59,135 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:59,142 p=13842 u=root |  TASK [Identity : create link file] ************************************************************************************************************
2018-05-07 13:59:59,142 p=13842 u=root |  Monday 07 May 2018  13:59:59 +0800 (0:00:00.303)       0:08:20.586 ************ 
2018-05-07 13:59:59,488 p=13842 u=root |   [WARNING]: Consider using the file module with state=link rather than running ln.  If you need to use command because file is insufficient
you can add warn=False to this command task or set command_warnings=False in ansible.cfg to get rid of this message.

2018-05-07 13:59:59,488 p=13842 u=root |  changed: [controller]
2018-05-07 13:59:59,494 p=13842 u=root |  TASK [Identity : start and enable http service] ***********************************************************************************************
2018-05-07 13:59:59,495 p=13842 u=root |  Monday 07 May 2018  13:59:59 +0800 (0:00:00.352)       0:08:20.938 ************ 
2018-05-07 14:00:00,381 p=13842 u=root |  changed: [controller]
2018-05-07 14:00:00,395 p=13842 u=root |  TASK [Identity : Create a service project] ****************************************************************************************************
2018-05-07 14:00:00,396 p=13842 u=root |  Monday 07 May 2018  14:00:00 +0800 (0:00:00.901)       0:08:21.840 ************ 
2018-05-07 14:00:04,050 p=13842 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 14:00:04,051 p=13842 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_hhCk3W/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 14:00:04,056 p=13842 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 14:00:04,056 p=13842 u=root |  PLAY RECAP ************************************************************************************************************************************
2018-05-07 14:00:04,057 p=13842 u=root |  controller                 : ok=36   changed=36   unreachable=0    failed=1   
2018-05-07 14:00:04,057 p=13842 u=root |  Monday 07 May 2018  14:00:04 +0800 (0:00:03.661)       0:08:25.501 ************ 
2018-05-07 14:00:04,058 p=13842 u=root |  =============================================================================== 
2018-05-07 14:00:04,058 p=13842 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux ---------------------------------------------- 285.79s
2018-05-07 14:00:04,059 p=13842 u=root |  Environment : install sql ------------------------------------------------------------------------------------------------------------- 40.35s
2018-05-07 14:00:04,059 p=13842 u=root |  Environment : install rabbitmq -------------------------------------------------------------------------------------------------------- 30.63s
2018-05-07 14:00:04,059 p=13842 u=root |  Identity : Install packages ----------------------------------------------------------------------------------------------------------- 29.58s
2018-05-07 14:00:04,060 p=13842 u=root |  Identity : install depends ------------------------------------------------------------------------------------------------------------ 23.70s
2018-05-07 14:00:04,060 p=13842 u=root |  Environment : set hostname ------------------------------------------------------------------------------------------------------------ 17.22s
2018-05-07 14:00:04,061 p=13842 u=root |  Environment : install chrony ---------------------------------------------------------------------------------------------------------- 17.12s
2018-05-07 14:00:04,061 p=13842 u=root |  Environment : start mariadb ----------------------------------------------------------------------------------------------------------- 12.68s
2018-05-07 14:00:04,061 p=13842 u=root |  Environment : install expect ----------------------------------------------------------------------------------------------------------- 4.72s
2018-05-07 14:00:04,062 p=13842 u=root |  Environment : start rabbitmq-server ---------------------------------------------------------------------------------------------------- 4.69s
2018-05-07 14:00:04,062 p=13842 u=root |  Environment : install Memcached -------------------------------------------------------------------------------------------------------- 3.83s
2018-05-07 14:00:04,062 p=13842 u=root |  Identity : Create a service project ---------------------------------------------------------------------------------------------------- 3.66s
2018-05-07 14:00:04,063 p=13842 u=root |  Identity : populate the identity service ----------------------------------------------------------------------------------------------- 3.57s
2018-05-07 14:00:04,063 p=13842 u=root |  Identity : Install OpenStackClient ----------------------------------------------------------------------------------------------------- 2.80s
2018-05-07 14:00:04,063 p=13842 u=root |  Environment : install centos-release-openstack-newton ---------------------------------------------------------------------------------- 2.65s
2018-05-07 14:00:04,064 p=13842 u=root |  Identity : Bootstrap the Identity service ---------------------------------------------------------------------------------------------- 2.58s
2018-05-07 14:00:04,064 p=13842 u=root |  Environment : useradd openstack -------------------------------------------------------------------------------------------------------- 2.30s
2018-05-07 14:00:04,064 p=13842 u=root |  Environment : useradd openstack -------------------------------------------------------------------------------------------------------- 1.95s
2018-05-07 14:00:04,065 p=13842 u=root |  Identity : and ------------------------------------------------------------------------------------------------------------------------- 1.64s
2018-05-07 14:00:04,065 p=13842 u=root |  Environment : restart NTP -------------------------------------------------------------------------------------------------------------- 1.30s
2018-05-07 14:05:47,857 p=14264 u=root |  PLAY [install openstack] ***********************************************************************************************
2018-05-07 14:05:47,878 p=14264 u=root |  TASK [Identity : copy file] ********************************************************************************************
2018-05-07 14:05:47,878 p=14264 u=root |  Monday 07 May 2018  14:05:47 +0800 (0:00:00.093)       0:00:00.093 ************ 
2018-05-07 14:06:00,199 p=14264 u=root |  changed: [controller]
2018-05-07 14:06:00,211 p=14264 u=root |  TASK [Identity : source] ***********************************************************************************************
2018-05-07 14:06:00,211 p=14264 u=root |  Monday 07 May 2018  14:06:00 +0800 (0:00:12.332)       0:00:12.426 ************ 
2018-05-07 14:06:00,668 p=14264 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "source /root/admin-openrc", "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-05-07 14:06:00,670 p=14264 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 14:06:00,670 p=14264 u=root |  PLAY RECAP *************************************************************************************************************
2018-05-07 14:06:00,670 p=14264 u=root |  controller                 : ok=1    changed=1    unreachable=0    failed=1   
2018-05-07 14:06:00,671 p=14264 u=root |  Monday 07 May 2018  14:06:00 +0800 (0:00:00.459)       0:00:12.886 ************ 
2018-05-07 14:06:00,671 p=14264 u=root |  =============================================================================== 
2018-05-07 14:06:00,671 p=14264 u=root |  Identity : copy file ------------------------------------------------------------------------------------------- 12.33s
2018-05-07 14:06:00,671 p=14264 u=root |  Identity : source ----------------------------------------------------------------------------------------------- 0.46s
2018-05-07 14:16:18,960 p=14318 u=root |  PLAY [install openstack] ***********************************************************************************************
2018-05-07 14:16:18,978 p=14318 u=root |  TASK [Identity : copy file] ********************************************************************************************
2018-05-07 14:16:18,979 p=14318 u=root |  Monday 07 May 2018  14:16:18 +0800 (0:00:00.083)       0:00:00.083 ************ 
2018-05-07 14:16:31,105 p=14318 u=root |  ok: [controller]
2018-05-07 14:16:31,111 p=14318 u=root |  TASK [Identity : chmod] ************************************************************************************************
2018-05-07 14:16:31,111 p=14318 u=root |  Monday 07 May 2018  14:16:31 +0800 (0:00:12.132)       0:00:12.216 ************ 
2018-05-07 14:16:31,560 p=14318 u=root |   [WARNING]: Consider using the file module with mode rather than running chmod.  If you need to use command because
file is insufficient you can add warn=False to this command task or set command_warnings=False in ansible.cfg to get
rid of this message.

2018-05-07 14:16:31,560 p=14318 u=root |  changed: [controller]
2018-05-07 14:16:31,567 p=14318 u=root |  TASK [Identity : source] ***********************************************************************************************
2018-05-07 14:16:31,567 p=14318 u=root |  Monday 07 May 2018  14:16:31 +0800 (0:00:00.455)       0:00:12.671 ************ 
2018-05-07 14:16:31,864 p=14318 u=root |  changed: [controller]
2018-05-07 14:16:31,871 p=14318 u=root |  TASK [Identity : Create a service project] *****************************************************************************
2018-05-07 14:16:31,871 p=14318 u=root |  Monday 07 May 2018  14:16:31 +0800 (0:00:00.303)       0:00:12.975 ************ 
2018-05-07 14:16:33,981 p=14318 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 14:16:33,981 p=14318 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_79M0uE/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 14:16:33,984 p=14318 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 14:16:33,984 p=14318 u=root |  PLAY RECAP *************************************************************************************************************
2018-05-07 14:16:33,984 p=14318 u=root |  controller                 : ok=3    changed=2    unreachable=0    failed=1   
2018-05-07 14:16:33,984 p=14318 u=root |  Monday 07 May 2018  14:16:33 +0800 (0:00:02.113)       0:00:15.089 ************ 
2018-05-07 14:16:33,985 p=14318 u=root |  =============================================================================== 
2018-05-07 14:16:33,985 p=14318 u=root |  Identity : copy file ------------------------------------------------------------------------------------------- 12.13s
2018-05-07 14:16:33,985 p=14318 u=root |  Identity : Create a service project ----------------------------------------------------------------------------- 2.11s
2018-05-07 14:16:33,985 p=14318 u=root |  Identity : chmod ------------------------------------------------------------------------------------------------ 0.46s
2018-05-07 14:16:33,985 p=14318 u=root |  Identity : source ----------------------------------------------------------------------------------------------- 0.30s
2018-05-07 14:21:07,450 p=14377 u=root |  PLAY [install openstack] ***********************************************************************************************
2018-05-07 14:21:07,469 p=14377 u=root |  TASK [Identity : copy file] ********************************************************************************************
2018-05-07 14:21:07,469 p=14377 u=root |  Monday 07 May 2018  14:21:07 +0800 (0:00:00.087)       0:00:00.087 ************ 
2018-05-07 14:21:19,702 p=14377 u=root |  ok: [controller]
2018-05-07 14:21:19,708 p=14377 u=root |  TASK [Identity : chmod] ************************************************************************************************
2018-05-07 14:21:19,709 p=14377 u=root |  Monday 07 May 2018  14:21:19 +0800 (0:00:12.239)       0:00:12.327 ************ 
2018-05-07 14:21:20,212 p=14377 u=root |   [WARNING]: Consider using the file module with mode rather than running chmod.  If you need to use command because
file is insufficient you can add warn=False to this command task or set command_warnings=False in ansible.cfg to get
rid of this message.

2018-05-07 14:21:20,213 p=14377 u=root |  changed: [controller]
2018-05-07 14:21:20,219 p=14377 u=root |  TASK [Identity : source] ***********************************************************************************************
2018-05-07 14:21:20,220 p=14377 u=root |  Monday 07 May 2018  14:21:20 +0800 (0:00:00.510)       0:00:12.838 ************ 
2018-05-07 14:21:20,569 p=14377 u=root |  changed: [controller]
2018-05-07 14:21:20,575 p=14377 u=root |  TASK [Identity : Create the service project] ***************************************************************************
2018-05-07 14:21:20,576 p=14377 u=root |  Monday 07 May 2018  14:21:20 +0800 (0:00:00.356)       0:00:13.194 ************ 
2018-05-07 14:21:22,666 p=14377 u=root |  fatal: [controller]: FAILED! => {"changed": true, "cmd": ["openstack", "project", "create", "--domain", "default", "--description", "Service Project", "service", ">/dev/null", "2>&1", "&"], "delta": "0:00:01.753364", "end": "2018-05-07 14:21:31.966550", "msg": "non-zero return code", "rc": 1, "start": "2018-05-07 14:21:30.213186", "stderr": "Missing value auth-url required for auth plugin password", "stderr_lines": ["Missing value auth-url required for auth plugin password"], "stdout": "", "stdout_lines": []}
2018-05-07 14:21:22,671 p=14377 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 14:21:22,672 p=14377 u=root |  PLAY RECAP *************************************************************************************************************
2018-05-07 14:21:22,672 p=14377 u=root |  controller                 : ok=3    changed=2    unreachable=0    failed=1   
2018-05-07 14:21:22,673 p=14377 u=root |  Monday 07 May 2018  14:21:22 +0800 (0:00:02.097)       0:00:15.291 ************ 
2018-05-07 14:21:22,673 p=14377 u=root |  =============================================================================== 
2018-05-07 14:21:22,674 p=14377 u=root |  Identity : copy file ------------------------------------------------------------------------------------------- 12.24s
2018-05-07 14:21:22,674 p=14377 u=root |  Identity : Create the service project --------------------------------------------------------------------------- 2.10s
2018-05-07 14:21:22,674 p=14377 u=root |  Identity : chmod ------------------------------------------------------------------------------------------------ 0.51s
2018-05-07 14:21:22,675 p=14377 u=root |  Identity : source ----------------------------------------------------------------------------------------------- 0.36s
2018-05-07 14:28:49,173 p=14458 u=root |  PLAY [install openstack] ***********************************************************************************************
2018-05-07 14:28:49,193 p=14458 u=root |  TASK [Identity : x] ****************************************************************************************************
2018-05-07 14:28:49,193 p=14458 u=root |  Monday 07 May 2018  14:28:49 +0800 (0:00:00.086)       0:00:00.086 ************ 
2018-05-07 14:29:00,836 p=14458 u=root |  fatal: [controller]: FAILED! => {"changed": false, "cmd": "export OS_USERNAME=admin", "msg": "[Errno 2] No such file or directory", "rc": 2}
2018-05-07 14:29:00,838 p=14458 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 14:29:00,838 p=14458 u=root |  PLAY RECAP *************************************************************************************************************
2018-05-07 14:29:00,838 p=14458 u=root |  controller                 : ok=0    changed=0    unreachable=0    failed=1   
2018-05-07 14:29:00,838 p=14458 u=root |  Monday 07 May 2018  14:29:00 +0800 (0:00:11.645)       0:00:11.732 ************ 
2018-05-07 14:29:00,839 p=14458 u=root |  =============================================================================== 
2018-05-07 14:29:00,839 p=14458 u=root |  Identity : x --------------------------------------------------------------------------------------------------- 11.65s
2018-05-07 15:32:15,851 p=2228 u=root |  PLAY [install openstack] *******************************************************
2018-05-07 15:32:15,941 p=2228 u=root |  TASK [Identity : copy file] ****************************************************
2018-05-07 15:32:15,941 p=2228 u=root |  Monday 07 May 2018  15:32:15 +0800 (0:00:00.094)       0:00:00.094 ************ 
2018-05-07 15:32:26,893 p=2228 u=root |  ok: [controller]
2018-05-07 15:32:26,895 p=2228 u=root |  TASK [Identity : Create a service project] *************************************
2018-05-07 15:32:26,895 p=2228 u=root |  Monday 07 May 2018  15:32:26 +0800 (0:00:10.953)       0:00:11.048 ************ 
2018-05-07 15:32:29,344 p=2228 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 15:32:29,344 p=2228 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_FRQlHL/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE"}
2018-05-07 15:32:29,347 p=2228 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 15:32:29,347 p=2228 u=root |  PLAY RECAP *********************************************************************
2018-05-07 15:32:29,347 p=2228 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 15:32:29,348 p=2228 u=root |  Monday 07 May 2018  15:32:29 +0800 (0:00:02.452)       0:00:13.501 ************ 
2018-05-07 15:32:29,348 p=2228 u=root |  =============================================================================== 
2018-05-07 15:32:29,348 p=2228 u=root |  Identity : copy file --------------------------------------------------- 10.95s
2018-05-07 15:32:29,348 p=2228 u=root |  Identity : Create a service project ------------------------------------- 2.45s
2018-05-07 15:34:00,444 p=2286 u=root |  PLAY [install openstack] *******************************************************************************************
2018-05-07 15:34:00,463 p=2286 u=root |  TASK [Identity : copy file] ****************************************************************************************
2018-05-07 15:34:00,464 p=2286 u=root |  Monday 07 May 2018  15:34:00 +0800 (0:00:00.091)       0:00:00.091 ************ 
2018-05-07 15:34:12,690 p=2286 u=root |  ok: [controller]
2018-05-07 15:34:12,696 p=2286 u=root |  TASK [Identity : Create a service project] *************************************************************************
2018-05-07 15:34:12,696 p=2286 u=root |  Monday 07 May 2018  15:34:12 +0800 (0:00:12.232)       0:00:12.324 ************ 
2018-05-07 15:34:14,424 p=2286 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 15:34:14,426 p=2286 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_p9VRc7/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 15:34:14,431 p=2286 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 15:34:14,432 p=2286 u=root |  PLAY RECAP *********************************************************************************************************
2018-05-07 15:34:14,432 p=2286 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 15:34:14,433 p=2286 u=root |  Monday 07 May 2018  15:34:14 +0800 (0:00:01.736)       0:00:14.060 ************ 
2018-05-07 15:34:14,433 p=2286 u=root |  =============================================================================== 
2018-05-07 15:34:14,434 p=2286 u=root |  Identity : copy file --------------------------------------------------------------------------------------- 12.23s
2018-05-07 15:34:14,434 p=2286 u=root |  Identity : Create a service project ------------------------------------------------------------------------- 1.74s
2018-05-07 15:54:50,489 p=2386 u=root |  PLAY [install openstack] ************************************************************************
2018-05-07 15:54:50,508 p=2386 u=root |  TASK [Identity : copy file] *********************************************************************
2018-05-07 15:54:50,508 p=2386 u=root |  Monday 07 May 2018  15:54:50 +0800 (0:00:00.084)       0:00:00.084 ************ 
2018-05-07 15:55:02,867 p=2386 u=root |  ok: [controller]
2018-05-07 15:55:02,873 p=2386 u=root |  TASK [Identity : Create a service project] ******************************************************
2018-05-07 15:55:02,874 p=2386 u=root |  Monday 07 May 2018  15:55:02 +0800 (0:00:12.365)       0:00:12.450 ************ 
2018-05-07 15:55:05,468 p=2386 u=root |  fatal: [controller]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (keystone) module: url Supported parameters include: command, description, domain_enabled, domain_name, email, endpoint, endpoint_list, group_name, idp_enabled, idp_name, idp_remote_ids, ignore_catalog, insecure, login_password, login_project_domain_name, login_project_name, login_tenant_name, login_user, login_user_domain_name, mapping_name, mapping_rules, password, project_name, protocol_name, region_name, return_code, role_name, service_name, service_type, sp_auth_url, sp_enabled, sp_name, sp_url, state, tenant_name, token, user_name"}
2018-05-07 15:55:05,471 p=2386 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 15:55:05,471 p=2386 u=root |  PLAY RECAP **************************************************************************************
2018-05-07 15:55:05,471 p=2386 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 15:55:05,472 p=2386 u=root |  Monday 07 May 2018  15:55:05 +0800 (0:00:02.597)       0:00:15.048 ************ 
2018-05-07 15:55:05,472 p=2386 u=root |  =============================================================================== 
2018-05-07 15:55:05,472 p=2386 u=root |  Identity : copy file -------------------------------------------------------------------- 12.37s
2018-05-07 15:55:05,472 p=2386 u=root |  Identity : Create a service project ------------------------------------------------------ 2.60s
2018-05-07 18:05:02,147 p=2767 u=root |  PLAY [install openstack] ****************************************************************************************************
2018-05-07 18:05:02,184 p=2767 u=root |  TASK [Environment : set hostname] *******************************************************************************************
2018-05-07 18:05:02,184 p=2767 u=root |  Monday 07 May 2018  18:05:02 +0800 (0:00:00.108)       0:00:00.108 ************ 
2018-05-07 18:05:14,496 p=2767 u=root |  changed: [controller]
2018-05-07 18:05:14,502 p=2767 u=root |  TASK [Environment : add host file] ******************************************************************************************
2018-05-07 18:05:14,502 p=2767 u=root |  Monday 07 May 2018  18:05:14 +0800 (0:00:12.317)       0:00:12.426 ************ 
2018-05-07 18:05:15,001 p=2767 u=root |  changed: [controller]
2018-05-07 18:05:15,009 p=2767 u=root |  TASK [Environment : install chrony] *****************************************************************************************
2018-05-07 18:05:15,009 p=2767 u=root |  Monday 07 May 2018  18:05:15 +0800 (0:00:00.506)       0:00:12.932 ************ 
2018-05-07 18:07:36,659 p=2767 u=root |  changed: [controller]
2018-05-07 18:07:36,666 p=2767 u=root |  TASK [Environment : change the /etc/chrony.conf file] ***********************************************************************
2018-05-07 18:07:36,666 p=2767 u=root |  Monday 07 May 2018  18:07:36 +0800 (0:02:21.657)       0:02:34.590 ************ 
2018-05-07 18:07:37,071 p=2767 u=root |  changed: [controller] => (item={u'regexp': u'server 0.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 18:07:37,366 p=2767 u=root |  changed: [controller] => (item={u'regexp': u'server 1.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 18:07:37,657 p=2767 u=root |  changed: [controller] => (item={u'regexp': u'server 2.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 18:07:37,961 p=2767 u=root |  changed: [controller] => (item={u'regexp': u'server 3.centos.pool.ntp.org iburst', u'line': u'server cn.pool.ntp.org'})
2018-05-07 18:07:37,971 p=2767 u=root |  TASK [Environment : change the /etc/chrony.conf file] ***********************************************************************
2018-05-07 18:07:37,971 p=2767 u=root |  Monday 07 May 2018  18:07:37 +0800 (0:00:01.304)       0:02:35.895 ************ 
2018-05-07 18:07:38,321 p=2767 u=root |  changed: [controller]
2018-05-07 18:07:38,327 p=2767 u=root |  TASK [Environment : restart NTP] ********************************************************************************************
2018-05-07 18:07:38,328 p=2767 u=root |  Monday 07 May 2018  18:07:38 +0800 (0:00:00.356)       0:02:36.251 ************ 
2018-05-07 18:07:39,805 p=2767 u=root |  changed: [controller]
2018-05-07 18:07:39,812 p=2767 u=root |  TASK [Environment : install centos-release-openstack-newton] ****************************************************************
2018-05-07 18:07:39,813 p=2767 u=root |  Monday 07 May 2018  18:07:39 +0800 (0:00:01.485)       0:02:37.736 ************ 
2018-05-07 18:07:48,281 p=2767 u=root |  changed: [controller]
2018-05-07 18:07:48,288 p=2767 u=root |  TASK [Environment : start openstack storehouse and install openstack client,openstack-selinux] ******************************
2018-05-07 18:07:48,289 p=2767 u=root |  Monday 07 May 2018  18:07:48 +0800 (0:00:08.475)       0:02:46.212 ************ 
2018-05-07 18:15:00,149 p=2767 u=root |  changed: [controller] => (item=[u'python-openstackclient', u'openstack-selinux'])
2018-05-07 18:15:00,167 p=2767 u=root |  TASK [Environment : install sql] ********************************************************************************************
2018-05-07 18:15:00,167 p=2767 u=root |  Monday 07 May 2018  18:15:00 +0800 (0:07:11.878)       0:09:58.091 ************ 
2018-05-07 18:18:30,263 p=2767 u=root |  changed: [controller] => (item=[u'mariadb', u'mariadb-server', u'python2-PyMySQL'])
2018-05-07 18:18:30,283 p=2767 u=root |  TASK [Environment : add mariadb_openstack.cnf file] *************************************************************************
2018-05-07 18:18:30,284 p=2767 u=root |  Monday 07 May 2018  18:18:30 +0800 (0:03:30.116)       0:13:28.207 ************ 
2018-05-07 18:18:31,733 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:31,740 p=2767 u=root |  TASK [Environment : install expect] *****************************************************************************************
2018-05-07 18:18:31,741 p=2767 u=root |  Monday 07 May 2018  18:18:31 +0800 (0:00:01.456)       0:13:29.664 ************ 
2018-05-07 18:18:41,619 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:41,625 p=2767 u=root |  TASK [Environment : copy file] **********************************************************************************************
2018-05-07 18:18:41,626 p=2767 u=root |  Monday 07 May 2018  18:18:41 +0800 (0:00:09.884)       0:13:39.549 ************ 
2018-05-07 18:18:42,478 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:42,484 p=2767 u=root |  TASK [Environment : chmod] **************************************************************************************************
2018-05-07 18:18:42,485 p=2767 u=root |  Monday 07 May 2018  18:18:42 +0800 (0:00:00.859)       0:13:40.408 ************ 
2018-05-07 18:18:43,042 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:43,049 p=2767 u=root |  TASK [Environment : start mariadb] ******************************************************************************************
2018-05-07 18:18:43,050 p=2767 u=root |  Monday 07 May 2018  18:18:43 +0800 (0:00:00.564)       0:13:40.973 ************ 
2018-05-07 18:18:55,999 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:56,006 p=2767 u=root |  TASK [Environment : expect the mysql_secure_installation.exp] ***************************************************************
2018-05-07 18:18:56,007 p=2767 u=root |  Monday 07 May 2018  18:18:56 +0800 (0:00:12.956)       0:13:53.930 ************ 
2018-05-07 18:18:56,705 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:56,712 p=2767 u=root |  TASK [Environment : del mysql_secure_installation.exp] **********************************************************************
2018-05-07 18:18:56,712 p=2767 u=root |  Monday 07 May 2018  18:18:56 +0800 (0:00:00.705)       0:13:54.636 ************ 
2018-05-07 18:18:57,061 p=2767 u=root |  changed: [controller]
2018-05-07 18:18:57,073 p=2767 u=root |  TASK [Environment : install rabbitmq] ***************************************************************************************
2018-05-07 18:18:57,073 p=2767 u=root |  Monday 07 May 2018  18:18:57 +0800 (0:00:00.360)       0:13:54.997 ************ 
2018-05-07 18:24:19,721 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:19,730 p=2767 u=root |  TASK [Environment : start rabbitmq-server] **********************************************************************************
2018-05-07 18:24:19,730 p=2767 u=root |  Monday 07 May 2018  18:24:19 +0800 (0:05:22.656)       0:19:17.654 ************ 
2018-05-07 18:24:24,416 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:24,423 p=2767 u=root |  TASK [Environment : useradd openstack] **************************************************************************************
2018-05-07 18:24:24,423 p=2767 u=root |  Monday 07 May 2018  18:24:24 +0800 (0:00:04.693)       0:19:22.347 ************ 
2018-05-07 18:24:26,986 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:26,993 p=2767 u=root |  TASK [Environment : useradd openstack] **************************************************************************************
2018-05-07 18:24:26,993 p=2767 u=root |  Monday 07 May 2018  18:24:26 +0800 (0:00:02.569)       0:19:24.917 ************ 
2018-05-07 18:24:29,615 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:29,628 p=2767 u=root |  TASK [Environment : install Memcached] **************************************************************************************
2018-05-07 18:24:29,629 p=2767 u=root |  Monday 07 May 2018  18:24:29 +0800 (0:00:02.635)       0:19:27.552 ************ 
2018-05-07 18:24:36,847 p=2767 u=root |  changed: [controller] => (item=[u'memcached', u'python-memcached'])
2018-05-07 18:24:36,854 p=2767 u=root |  TASK [Environment : modify the /etc/sysconfig/memcached file] ***************************************************************
2018-05-07 18:24:36,854 p=2767 u=root |  Monday 07 May 2018  18:24:36 +0800 (0:00:07.225)       0:19:34.778 ************ 
2018-05-07 18:24:37,232 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:37,239 p=2767 u=root |  TASK [Environment : restart memcached] **************************************************************************************
2018-05-07 18:24:37,240 p=2767 u=root |  Monday 07 May 2018  18:24:37 +0800 (0:00:00.385)       0:19:35.163 ************ 
2018-05-07 18:24:38,242 p=2767 u=root |  changed: [controller]
2018-05-07 18:24:38,250 p=2767 u=root |  TASK [Identity : install depends] *******************************************************************************************
2018-05-07 18:24:38,250 p=2767 u=root |  Monday 07 May 2018  18:24:38 +0800 (0:00:01.010)       0:19:36.174 ************ 
2018-05-07 18:25:00,805 p=2767 u=root |  changed: [controller] => (item=[u'python-pip', u'python-devel', u'MySQL-python'])
2018-05-07 18:25:00,813 p=2767 u=root |  TASK [Identity : create keystone database] **********************************************************************************
2018-05-07 18:25:00,813 p=2767 u=root |  Monday 07 May 2018  18:25:00 +0800 (0:00:22.563)       0:19:58.737 ************ 
2018-05-07 18:25:01,400 p=2767 u=root |  changed: [controller]
2018-05-07 18:25:01,406 p=2767 u=root |  TASK [Identity : Grant access to the DB for keystone] ***********************************************************************
2018-05-07 18:25:01,406 p=2767 u=root |  Monday 07 May 2018  18:25:01 +0800 (0:00:00.593)       0:19:59.330 ************ 
2018-05-07 18:25:01,993 p=2767 u=root |  changed: [controller] => (item=localhost)
2018-05-07 18:25:02,324 p=2767 u=root |  changed: [controller] => (item=%)
2018-05-07 18:25:02,333 p=2767 u=root |  TASK [Identity : Install packages] ******************************************************************************************
2018-05-07 18:25:02,333 p=2767 u=root |  Monday 07 May 2018  18:25:02 +0800 (0:00:00.926)       0:20:00.257 ************ 
2018-05-07 18:26:20,101 p=2767 u=root |  changed: [controller] => (item=[u'openstack-keystone', u'httpd', u'mod_wsgi'])
2018-05-07 18:26:20,117 p=2767 u=root |  TASK [Identity : Install OpenStackClient] ***********************************************************************************
2018-05-07 18:26:20,118 p=2767 u=root |  Monday 07 May 2018  18:26:20 +0800 (0:01:17.784)       0:21:18.041 ************ 
2018-05-07 18:26:22,996 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:23,004 p=2767 u=root |  TASK [Identity : modify the /etc/keystone/keystone.conf file] ***************************************************************
2018-05-07 18:26:23,004 p=2767 u=root |  Monday 07 May 2018  18:26:23 +0800 (0:00:02.886)       0:21:20.927 ************ 
2018-05-07 18:26:23,403 p=2767 u=root |  changed: [controller] => (item={u'key': u'^#connection =', u'value': u'connection = mysql+pymysql://keystone:123456@controller/keystone'})
2018-05-07 18:26:23,713 p=2767 u=root |  changed: [controller] => (item={u'key': u'^#provider = uuid', u'value': u'provider = fernet'})
2018-05-07 18:26:23,722 p=2767 u=root |  TASK [Identity : populate the identity service] *****************************************************************************
2018-05-07 18:26:23,722 p=2767 u=root |  Monday 07 May 2018  18:26:23 +0800 (0:00:00.718)       0:21:21.646 ************ 
2018-05-07 18:26:29,080 p=2767 u=root |   [WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running su

2018-05-07 18:26:29,080 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:29,086 p=2767 u=root |  TASK [Identity : Initialize Fernet key repositories] ************************************************************************
2018-05-07 18:26:29,087 p=2767 u=root |  Monday 07 May 2018  18:26:29 +0800 (0:00:05.364)       0:21:27.010 ************ 
2018-05-07 18:26:30,968 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:30,974 p=2767 u=root |  TASK [Identity : and] *******************************************************************************************************
2018-05-07 18:26:30,975 p=2767 u=root |  Monday 07 May 2018  18:26:30 +0800 (0:00:01.888)       0:21:28.898 ************ 
2018-05-07 18:26:32,544 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:32,551 p=2767 u=root |  TASK [Identity : x] *********************************************************************************************************
2018-05-07 18:26:32,551 p=2767 u=root |  Monday 07 May 2018  18:26:32 +0800 (0:00:01.576)       0:21:30.474 ************ 
2018-05-07 18:26:33,407 p=2767 u=root |  ok: [controller]
2018-05-07 18:26:33,415 p=2767 u=root |  TASK [Identity : x] *********************************************************************************************************
2018-05-07 18:26:33,415 p=2767 u=root |  Monday 07 May 2018  18:26:33 +0800 (0:00:00.863)       0:21:31.339 ************ 
2018-05-07 18:26:46,719 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:46,734 p=2767 u=root |  TASK [Identity : x] *********************************************************************************************************
2018-05-07 18:26:46,735 p=2767 u=root |  Monday 07 May 2018  18:26:46 +0800 (0:00:13.319)       0:21:44.658 ************ 
2018-05-07 18:26:50,438 p=2767 u=root |  ok: [controller]
2018-05-07 18:26:50,452 p=2767 u=root |  TASK [Identity : x] *********************************************************************************************************
2018-05-07 18:26:50,452 p=2767 u=root |  Monday 07 May 2018  18:26:50 +0800 (0:00:03.717)       0:21:48.376 ************ 
2018-05-07 18:26:50,704 p=2767 u=root |  changed: [controller -> localhost]
2018-05-07 18:26:50,711 p=2767 u=root |  TASK [Identity : x] *********************************************************************************************************
2018-05-07 18:26:50,711 p=2767 u=root |  Monday 07 May 2018  18:26:50 +0800 (0:00:00.258)       0:21:48.635 ************ 
2018-05-07 18:26:51,065 p=2767 u=root |  ok: [controller]
2018-05-07 18:26:51,073 p=2767 u=root |  TASK [Identity : Bootstrap the Identity service] ****************************************************************************
2018-05-07 18:26:51,073 p=2767 u=root |  Monday 07 May 2018  18:26:51 +0800 (0:00:00.361)       0:21:48.997 ************ 
2018-05-07 18:26:53,854 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:53,861 p=2767 u=root |  TASK [Identity : modify the /etc/httpd/conf/httpd.conf file] ****************************************************************
2018-05-07 18:26:53,861 p=2767 u=root |  Monday 07 May 2018  18:26:53 +0800 (0:00:02.788)       0:21:51.785 ************ 
2018-05-07 18:26:54,204 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:54,211 p=2767 u=root |  TASK [Identity : create link file] ******************************************************************************************
2018-05-07 18:26:54,211 p=2767 u=root |  Monday 07 May 2018  18:26:54 +0800 (0:00:00.349)       0:21:52.134 ************ 
2018-05-07 18:26:54,561 p=2767 u=root |   [WARNING]: Consider using the file module with state=link rather than running ln.  If you need to use command because file
is insufficient you can add warn=False to this command task or set command_warnings=False in ansible.cfg to get rid of this
message.

2018-05-07 18:26:54,561 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:54,568 p=2767 u=root |  TASK [Identity : start and enable http service] *****************************************************************************
2018-05-07 18:26:54,568 p=2767 u=root |  Monday 07 May 2018  18:26:54 +0800 (0:00:00.357)       0:21:52.492 ************ 
2018-05-07 18:26:55,624 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:55,632 p=2767 u=root |  TASK [Identity : copy file] *************************************************************************************************
2018-05-07 18:26:55,632 p=2767 u=root |  Monday 07 May 2018  18:26:55 +0800 (0:00:01.063)       0:21:53.555 ************ 
2018-05-07 18:26:56,448 p=2767 u=root |  changed: [controller]
2018-05-07 18:26:56,455 p=2767 u=root |  TASK [Identity : Create a service project] **********************************************************************************
2018-05-07 18:26:56,456 p=2767 u=root |  Monday 07 May 2018  18:26:56 +0800 (0:00:00.823)       0:21:54.379 ************ 
2018-05-07 18:27:00,765 p=2767 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 18:27:00,765 p=2767 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_Lffob1/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 18:27:00,768 p=2767 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 18:27:00,768 p=2767 u=root |  PLAY RECAP ******************************************************************************************************************
2018-05-07 18:27:00,769 p=2767 u=root |  controller                 : ok=42   changed=39   unreachable=0    failed=1   
2018-05-07 18:27:00,769 p=2767 u=root |  Monday 07 May 2018  18:27:00 +0800 (0:00:04.313)       0:21:58.693 ************ 
2018-05-07 18:27:00,769 p=2767 u=root |  =============================================================================== 
2018-05-07 18:27:00,770 p=2767 u=root |  Environment : start openstack storehouse and install openstack client,openstack-selinux ---------------------------- 431.88s
2018-05-07 18:27:00,770 p=2767 u=root |  Environment : install rabbitmq ------------------------------------------------------------------------------------- 322.66s
2018-05-07 18:27:00,770 p=2767 u=root |  Environment : install sql ------------------------------------------------------------------------------------------ 210.12s
2018-05-07 18:27:00,770 p=2767 u=root |  Environment : install chrony --------------------------------------------------------------------------------------- 141.66s
2018-05-07 18:27:00,770 p=2767 u=root |  Identity : Install packages ----------------------------------------------------------------------------------------- 77.78s
2018-05-07 18:27:00,771 p=2767 u=root |  Identity : install depends ------------------------------------------------------------------------------------------ 22.56s
2018-05-07 18:27:00,771 p=2767 u=root |  Identity : x -------------------------------------------------------------------------------------------------------- 13.32s
2018-05-07 18:27:00,771 p=2767 u=root |  Environment : start mariadb ----------------------------------------------------------------------------------------- 12.96s
2018-05-07 18:27:00,771 p=2767 u=root |  Environment : set hostname ------------------------------------------------------------------------------------------ 12.32s
2018-05-07 18:27:00,771 p=2767 u=root |  Environment : install expect ----------------------------------------------------------------------------------------- 9.89s
2018-05-07 18:27:00,771 p=2767 u=root |  Environment : install centos-release-openstack-newton ---------------------------------------------------------------- 8.48s
2018-05-07 18:27:00,772 p=2767 u=root |  Environment : install Memcached -------------------------------------------------------------------------------------- 7.23s
2018-05-07 18:27:00,772 p=2767 u=root |  Identity : populate the identity service ----------------------------------------------------------------------------- 5.36s
2018-05-07 18:27:00,772 p=2767 u=root |  Environment : start rabbitmq-server ---------------------------------------------------------------------------------- 4.69s
2018-05-07 18:27:00,772 p=2767 u=root |  Identity : Create a service project ---------------------------------------------------------------------------------- 4.31s
2018-05-07 18:27:00,772 p=2767 u=root |  Identity : x --------------------------------------------------------------------------------------------------------- 3.72s
2018-05-07 18:27:00,772 p=2767 u=root |  Identity : Install OpenStackClient ----------------------------------------------------------------------------------- 2.89s
2018-05-07 18:27:00,773 p=2767 u=root |  Identity : Bootstrap the Identity service ---------------------------------------------------------------------------- 2.79s
2018-05-07 18:27:00,773 p=2767 u=root |  Environment : useradd openstack -------------------------------------------------------------------------------------- 2.64s
2018-05-07 18:27:00,773 p=2767 u=root |  Environment : useradd openstack -------------------------------------------------------------------------------------- 2.57s
2018-05-07 18:35:06,550 p=3218 u=root |  PLAY [install openstack] ****************************************************************************************************
2018-05-07 18:35:06,612 p=3218 u=root |  TASK [Identity : copy file] *************************************************************************************************
2018-05-07 18:35:06,612 p=3218 u=root |  Monday 07 May 2018  18:35:06 +0800 (0:00:00.066)       0:00:00.066 ************ 
2018-05-07 18:35:07,625 p=3218 u=root |  ok: [controller]
2018-05-07 18:35:07,628 p=3218 u=root |  TASK [Identity : Create a service project] **********************************************************************************
2018-05-07 18:35:07,628 p=3218 u=root |  Monday 07 May 2018  18:35:07 +0800 (0:00:01.015)       0:00:01.082 ************ 
2018-05-07 18:35:12,550 p=3218 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 18:35:12,551 p=3218 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_yZ6mNo/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 18:35:12,553 p=3218 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 18:35:12,553 p=3218 u=root |  PLAY RECAP ******************************************************************************************************************
2018-05-07 18:35:12,553 p=3218 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 18:35:12,553 p=3218 u=root |  Monday 07 May 2018  18:35:12 +0800 (0:00:04.925)       0:00:06.008 ************ 
2018-05-07 18:35:12,554 p=3218 u=root |  =============================================================================== 
2018-05-07 18:35:12,554 p=3218 u=root |  Identity : Create a service project ------------------------------------- 4.93s
2018-05-07 18:35:12,554 p=3218 u=root |  Identity : copy file ---------------------------------------------------- 1.02s
2018-05-07 18:39:08,759 p=3274 u=root |  [DEPRECATION WARNING]: The use of 'include' for tasks has been deprecated. Use 'import_tasks' for static inclusions or 'include_tasks' for 
dynamic inclusions. This feature will be removed in a future release. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2018-05-07 18:39:08,830 p=3274 u=root |  [DEPRECATION WARNING]: include is kept for backwards compatibility but usage is discouraged. The module documentation details page may 
explain more about this rationale.. This feature will be removed in a future release. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2018-05-07 18:39:08,997 p=3274 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 18:39:09,023 p=3274 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 18:39:09,023 p=3274 u=root |  Monday 07 May 2018  18:39:09 +0800 (0:00:00.082)       0:00:00.082 ************ 
2018-05-07 18:39:11,402 p=3274 u=root |  ok: [controller]
2018-05-07 18:39:11,408 p=3274 u=root |  TASK [Identity : Create a service project] *************************************************************************************************
2018-05-07 18:39:11,408 p=3274 u=root |  Monday 07 May 2018  18:39:11 +0800 (0:00:02.385)       0:00:02.468 ************ 
2018-05-07 18:39:16,585 p=3274 u=root |  fatal: [controller]: FAILED! => {"changed": false, "failed": true, "module_stderr": "Shared connection to 172.16.52.17 closed.\r\n", "module_stdout": "Traceback (most recent call last):\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 1469, in <module>\r\n    main()\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 1463, in main\r\n    km.command_router()\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 487, in command_router\r\n    facts = action(variables=action_command['variables'])\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 695, in ensure_project\r\n    domain = self._get_domain_from_vars(variables_dict)\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\r\n    return self._get_domain(name=domain_name)\r\n  File \"/tmp/ansible_J0yuGK/ansible_module_keystone.py\", line 632, in _get_domain\r\n    for entry in self.keystone.domains.list():\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\r\n    return super(DomainManager, self).list(**kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\r\n    return f(*args, **new_kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\r\n    self.collection_key)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\r\n    resp, body = self.client.get(url, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\r\n    return self.request(url, 'GET', **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\r\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\r\n    return self.session.request(url, method, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\r\n    return wrapped(*args, **kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\r\n    base_url = self.get_endpoint(auth, **endpoint_filter)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\r\n    auth = self._auth_required(auth, msg)\r\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\r\n    raise exceptions.MissingAuthPlugin(msg)\r\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\r\n", "msg": "MODULE FAILURE", "rc": 0}
2018-05-07 18:39:16,587 p=3274 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 18:39:16,587 p=3274 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 18:39:16,587 p=3274 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 18:39:16,588 p=3274 u=root |  Monday 07 May 2018  18:39:16 +0800 (0:00:05.179)       0:00:07.647 ************ 
2018-05-07 18:39:16,588 p=3274 u=root |  =============================================================================== 
2018-05-07 18:39:16,588 p=3274 u=root |  Identity : Create a service project ------------------------------------------------------------------------------------------------- 5.18s
2018-05-07 18:39:16,588 p=3274 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.39s
2018-05-07 18:42:13,772 p=3352 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 18:42:13,794 p=3352 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 18:42:13,794 p=3352 u=root |  Monday 07 May 2018  18:42:13 +0800 (0:00:00.090)       0:00:00.090 ************ 
2018-05-07 18:42:16,059 p=3352 u=root |  ok: [controller]
2018-05-07 18:42:16,066 p=3352 u=root |  TASK [Identity : Create a service project] *************************************************************************************************
2018-05-07 18:42:16,066 p=3352 u=root |  Monday 07 May 2018  18:42:16 +0800 (0:00:02.271)       0:00:02.362 ************ 
2018-05-07 18:42:18,623 p=3352 u=root |  An exception occurred during task execution. To see the full traceback, use -vvv. The error was: keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL
2018-05-07 18:42:18,624 p=3352 u=root |  fatal: [controller]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_7UMbS6/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", "module_stdout": "", "msg": "MODULE FAILURE", "rc": 1}
2018-05-07 18:42:18,626 p=3352 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 18:42:18,626 p=3352 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 18:42:18,627 p=3352 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 18:42:18,627 p=3352 u=root |  Monday 07 May 2018  18:42:18 +0800 (0:00:02.560)       0:00:04.923 ************ 
2018-05-07 18:42:18,627 p=3352 u=root |  =============================================================================== 
2018-05-07 18:42:18,627 p=3352 u=root |  Identity : Create a service project ------------------------------------------------------------------------------------------------- 2.56s
2018-05-07 18:42:18,627 p=3352 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.27s
2018-05-07 18:47:31,934 p=3386 u=root |  ansible-playbook 2.5.0
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-07 18:47:31,934 p=3386 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-07 18:47:31,954 p=3386 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-07 18:47:32,097 p=3386 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-07 18:47:32,216 p=3386 u=root |  PLAYBOOK: openstack.yml ********************************************************************************************************************
2018-05-07 18:47:32,217 p=3386 u=root |  1 plays in openstack.yml
2018-05-07 18:47:32,287 p=3386 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 18:47:32,306 p=3386 u=root |  META: ran handlers
2018-05-07 18:47:32,312 p=3386 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 18:47:32,313 p=3386 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-07 18:47:32,313 p=3386 u=root |  Monday 07 May 2018  18:47:32 +0800 (0:00:00.123)       0:00:00.123 ************ 
2018-05-07 18:47:33,777 p=3386 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 18:47:34,259 p=3386 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2018-05-07 18:47:34,599 p=3386 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": "file", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-07 18:47:34,605 p=3386 u=root |  TASK [Identity : Create a service project] *************************************************************************************************
2018-05-07 18:47:34,606 p=3386 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-07 18:47:34,606 p=3386 u=root |  Monday 07 May 2018  18:47:34 +0800 (0:00:02.292)       0:00:02.416 ************ 
2018-05-07 18:47:34,884 p=3386 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-07 18:47:39,979 p=3386 u=root |  The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_IMQeT5/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-07 18:47:39,980 p=3386 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_IMQeT5/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE", 
    "rc": 1
}
2018-05-07 18:47:39,982 p=3386 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 18:47:39,982 p=3386 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 18:47:39,982 p=3386 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 18:47:39,983 p=3386 u=root |  Monday 07 May 2018  18:47:39 +0800 (0:00:05.376)       0:00:07.793 ************ 
2018-05-07 18:47:39,983 p=3386 u=root |  =============================================================================== 
2018-05-07 18:47:39,983 p=3386 u=root |  Identity : Create a service project ------------------------------------------------------------------------------------------------- 5.38s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 --------------------------------------------------------
2018-05-07 18:47:39,983 p=3386 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.29s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 --------------------------------------------------------
2018-05-07 19:00:36,776 p=3453 u=root |  ansible-playbook 2.5.0
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-07 19:00:36,777 p=3453 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-07 19:00:36,798 p=3453 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-07 19:00:36,938 p=3453 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-07 19:00:37,054 p=3453 u=root |  PLAYBOOK: openstack.yml ********************************************************************************************************************
2018-05-07 19:00:37,055 p=3453 u=root |  1 plays in openstack.yml
2018-05-07 19:00:37,094 p=3453 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 19:00:37,108 p=3453 u=root |  META: ran handlers
2018-05-07 19:00:37,114 p=3453 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 19:00:37,114 p=3453 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-07 19:00:37,114 p=3453 u=root |  Monday 07 May 2018  19:00:37 +0800 (0:00:00.085)       0:00:00.085 ************ 
2018-05-07 19:00:38,558 p=3453 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:00:38,947 p=3453 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2018-05-07 19:00:39,228 p=3453 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": "file", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-07 19:00:39,235 p=3453 u=root |  TASK [Identity : pip install python-keystoneclient] ****************************************************************************************
2018-05-07 19:00:39,236 p=3453 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-07 19:00:39,236 p=3453 u=root |  Monday 07 May 2018  19:00:39 +0800 (0:00:02.121)       0:00:02.207 ************ 
2018-05-07 19:00:39,538 p=3453 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/commands/command.py
2018-05-07 19:00:40,964 p=3453 u=root |  changed: [controller] => {
    "changed": true, 
    "cmd": [
        "pip", 
        "install", 
        "python-keystoneclient"
    ], 
    "delta": "0:00:01.211765", 
    "end": "2018-05-07 19:00:42.515078", 
    "invocation": {
        "module_args": {
            "_raw_params": "pip install python-keystoneclient", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "stdin": null, 
            "warn": true
        }
    }, 
    "rc": 0, 
    "start": "2018-05-07 19:00:41.303313", 
    "stderr": "You are using pip version 8.1.2, however version 10.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.", 
    "stderr_lines": [
        "You are using pip version 8.1.2, however version 10.0.1 is available.", 
        "You should consider upgrading via the 'pip install --upgrade pip' command."
    ], 
    "stdout": "Requirement already satisfied (use --upgrade to upgrade): python-keystoneclient in /usr/lib/python2.7/site-packages", 
    "stdout_lines": [
        "Requirement already satisfied (use --upgrade to upgrade): python-keystoneclient in /usr/lib/python2.7/site-packages"
    ]
}
2018-05-07 19:00:40,973 p=3453 u=root |  TASK [Identity : Create a service project] *************************************************************************************************
2018-05-07 19:00:40,973 p=3453 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7
2018-05-07 19:00:40,973 p=3453 u=root |  Monday 07 May 2018  19:00:40 +0800 (0:00:01.737)       0:00:03.944 ************ 
2018-05-07 19:00:41,249 p=3453 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-07 19:00:45,727 p=3453 u=root |  The full traceback is:
Traceback (most recent call last):
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 1469, in <module>
    main()
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 1463, in main
    km.command_router()
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 487, in command_router
    facts = action(variables=action_command['variables'])
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 695, in ensure_project
    domain = self._get_domain_from_vars(variables_dict)
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 625, in _get_domain_from_vars
    return self._get_domain(name=domain_name)
  File "/tmp/ansible_WSJkNC/ansible_module_keystone.py", line 632, in _get_domain
    for entry in self.keystone.domains.list():
  File "/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py", line 90, in list
    return super(DomainManager, self).list(**kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 74, in func
    return f(*args, **new_kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 386, in list
    self.collection_key)
  File "/usr/lib/python2.7/site-packages/keystoneclient/base.py", line 124, in _list
    resp, body = self.client.get(url, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 187, in get
    return self.request(url, 'GET', **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 344, in request
    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py", line 112, in request
    return self.session.request(url, method, **kwargs)
  File "/usr/lib/python2.7/site-packages/positional/__init__.py", line 101, in inner
    return wrapped(*args, **kwargs)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 365, in request
    base_url = self.get_endpoint(auth, **endpoint_filter)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 703, in get_endpoint
    auth = self._auth_required(auth, msg)
  File "/usr/lib/python2.7/site-packages/keystoneclient/session.py", line 640, in _auth_required
    raise exceptions.MissingAuthPlugin(msg)
keystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL

2018-05-07 19:00:45,729 p=3453 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "module_stderr": "Traceback (most recent call last):\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_WSJkNC/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 90, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 74, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 386, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 124, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 187, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 344, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 112, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/positional/__init__.py\", line 101, in inner\n    return wrapped(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 365, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 703, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 640, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE", 
    "rc": 1
}
2018-05-07 19:00:45,732 p=3453 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 19:00:45,733 p=3453 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 19:00:45,733 p=3453 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-07 19:00:45,734 p=3453 u=root |  Monday 07 May 2018  19:00:45 +0800 (0:00:04.760)       0:00:08.705 ************ 
2018-05-07 19:00:45,734 p=3453 u=root |  =============================================================================== 
2018-05-07 19:00:45,735 p=3453 u=root |  Identity : Create a service project ------------------------------------------------------------------------------------------------- 4.76s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7 --------------------------------------------------------
2018-05-07 19:00:45,735 p=3453 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.12s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 --------------------------------------------------------
2018-05-07 19:00:45,736 p=3453 u=root |  Identity : pip install python-keystoneclient ---------------------------------------------------------------------------------------- 1.74s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 --------------------------------------------------------
2018-05-07 19:05:28,800 p=3530 u=root |  ansible-playbook 2.5.0
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-07 19:05:28,800 p=3530 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-07 19:05:28,822 p=3530 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-07 19:05:28,965 p=3530 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-07 19:05:29,088 p=3530 u=root |  PLAYBOOK: openstack.yml ********************************************************************************************************************
2018-05-07 19:05:29,089 p=3530 u=root |  1 plays in openstack.yml
2018-05-07 19:05:29,131 p=3530 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 19:05:29,145 p=3530 u=root |  META: ran handlers
2018-05-07 19:05:29,152 p=3530 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 19:05:29,152 p=3530 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-07 19:05:29,153 p=3530 u=root |  Monday 07 May 2018  19:05:29 +0800 (0:00:00.091)       0:00:00.091 ************ 
2018-05-07 19:05:30,602 p=3530 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:05:31,300 p=3530 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2018-05-07 19:05:31,662 p=3530 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": "file", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-07 19:05:31,677 p=3530 u=root |  TASK [Identity : pip install python-keystoneclient] ****************************************************************************************
2018-05-07 19:05:31,678 p=3530 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-07 19:05:31,678 p=3530 u=root |  Monday 07 May 2018  19:05:31 +0800 (0:00:02.525)       0:00:02.616 ************ 
2018-05-07 19:05:32,221 p=3530 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/commands/command.py
2018-05-07 19:07:06,241 p=3530 u=root |  changed: [controller] => {
    "changed": true, 
    "cmd": [
        "pip", 
        "install", 
        "python-keystoneclient"
    ], 
    "delta": "0:01:33.680014", 
    "end": "2018-05-07 19:07:07.801426", 
    "invocation": {
        "module_args": {
            "_raw_params": "pip install python-keystoneclient", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "stdin": null, 
            "warn": true
        }
    }, 
    "rc": 0, 
    "start": "2018-05-07 19:05:34.121412", 
    "stderr": "    DEPRECATION: Uninstalling a distutils installed project (PyYAML) has been deprecated and will be removed in a future version. This is due to the fact that uninstalling a distutils project will only partially uninstall the project.\nYou are using pip version 8.1.2, however version 10.0.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.", 
    "stderr_lines": [
        "    DEPRECATION: Uninstalling a distutils installed project (PyYAML) has been deprecated and will be removed in a future version. This is due to the fact that uninstalling a distutils project will only partially uninstall the project.", 
        "You are using pip version 8.1.2, however version 10.0.1 is available.", 
        "You should consider upgrading via the 'pip install --upgrade pip' command."
    ], 
    "stdout": "Collecting python-keystoneclient\n  Downloading https://files.pythonhosted.org/packages/f5/26/c21d9632e6892dfc23b5315e0221dba8b05b62d15d7488489a4b3953e854/python_keystoneclient-3.16.0-py2.py3-none-any.whl (376kB)\nRequirement already satisfied (use --upgrade to upgrade): debtcollector>=1.2.0 in /usr/lib/python2.7/site-packages (from python-keystoneclient)\nCollecting pbr!=2.1.0,>=2.0.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/e1/ba/f95e3ec83f93919b1437028e989cf3fa5ff4f5cae4a1f62255f71deddb5b/pbr-4.0.2-py2.py3-none-any.whl (98kB)\nCollecting oslo.serialization!=2.19.1,>=2.18.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/ca/c8/eb2fcb6cc97ac0e652a304855db37a0e433c2a217f9445e58ca67084075b/oslo.serialization-2.25.0-py2.py3-none-any.whl\nRequirement already satisfied (use --upgrade to upgrade): six>=1.10.0 in /usr/lib/python2.7/site-packages (from python-keystoneclient)\nCollecting oslo.i18n>=3.15.3 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/41/19/6bdc09c5548fae467f00120812256c27a253fa29d07020ecf725d3a247cb/oslo.i18n-3.20.0-py2.py3-none-any.whl (42kB)\nCollecting stevedore>=1.20.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/17/6b/3b7d6d08b2ab3e5ef09e01c9f7b3b590ee135f289bb94553419e40922c25/stevedore-1.28.0-py2.py3-none-any.whl\nCollecting requests>=2.14.2 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/49/df/50aa1999ab9bde74656c2919d9c0c085fd2b3775fd3eca826012bef76d8c/requests-2.18.4-py2.py3-none-any.whl (88kB)\nCollecting keystoneauth1>=3.4.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/46/e5/f78bf0af7833ab6e326342de9c3fe62deae07b792f4c6525dd41b7743ee2/keystoneauth1-3.5.0-py2.py3-none-any.whl (282kB)\nCollecting oslo.utils>=3.33.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/af/55/3352c9b93b0fcba4e77c3c16ad55311b5a0dec958f5ac3c1803f1fe15703/oslo.utils-3.36.1-py2.py3-none-any.whl (91kB)\nCollecting oslo.config>=5.2.0 (from python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/03/31/80ffdd71158f80535641f835e9c340b3070019328132db265d3b497c5bff/oslo.config-6.2.0-py2.py3-none-any.whl (111kB)\nRequirement already satisfied (use --upgrade to upgrade): pytz>=2013.6 in /usr/lib/python2.7/site-packages (from oslo.serialization!=2.19.1,>=2.18.0->python-keystoneclient)\nCollecting msgpack>=0.4.0 (from oslo.serialization!=2.19.1,>=2.18.0->python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/ff/0d/536fd0b2808dfbc67de46168dc706b5c9f9a1f5a803d96b8bc562a6d96c2/msgpack-0.5.6-cp27-cp27mu-manylinux1_x86_64.whl (295kB)\nRequirement already satisfied (use --upgrade to upgrade): Babel!=2.4.0,>=2.3.4 in /usr/lib/python2.7/site-packages (from oslo.i18n>=3.15.3->python-keystoneclient)\nCollecting certifi>=2017.4.17 (from requests>=2.14.2->python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/7c/e6/92ad559b7192d846975fc916b65f667c7b8c3a32bea7372340bfe9a15fa5/certifi-2018.4.16-py2.py3-none-any.whl (150kB)\nCollecting chardet<3.1.0,>=3.0.2 (from requests>=2.14.2->python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)\nRequirement already satisfied (use --upgrade to upgrade): idna<2.7,>=2.5 in /usr/lib/python2.7/site-packages (from requests>=2.14.2->python-keystoneclient)\nCollecting urllib3<1.23,>=1.21.1 (from requests>=2.14.2->python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/63/cb/6965947c13a94236f6d4b8223e21beb4d576dc72e8130bd7880f600839b8/urllib3-1.22-py2.py3-none-any.whl (132kB)\nRequirement already satisfied (use --upgrade to upgrade): iso8601>=0.1.11 in /usr/lib/python2.7/site-packages (from keystoneauth1>=3.4.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): pyparsing>=2.1.0 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): funcsigs>=1.0.0; python_version == \"2.7\" or python_version == \"2.6\" in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): netifaces>=0.10.4 in /usr/lib64/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): netaddr>=0.7.18 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): monotonic>=0.6 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)\nRequirement already satisfied (use --upgrade to upgrade): enum34>=1.0.4; python_version == \"2.7\" or python_version == \"2.6\" or python_version == \"3.3\" in /usr/lib/python2.7/site-packages (from oslo.config>=5.2.0->python-keystoneclient)\nCollecting PyYAML>=3.12 (from oslo.config>=5.2.0->python-keystoneclient)\n  Downloading https://files.pythonhosted.org/packages/4a/85/db5a2df477072b2902b0eb892feb37d88ac635d36245a72a6a69b23b383a/PyYAML-3.12.tar.gz (253kB)\nRequirement already satisfied (use --upgrade to upgrade): rfc3986>=0.3.1 in /usr/lib/python2.7/site-packages (from oslo.config>=5.2.0->python-keystoneclient)\nInstalling collected packages: pbr, oslo.i18n, oslo.utils, msgpack, oslo.serialization, stevedore, certifi, chardet, urllib3, requests, keystoneauth1, PyYAML, oslo.config, python-keystoneclient\n  Found existing installation: pbr 1.10.0\n    Uninstalling pbr-1.10.0:\n      Successfully uninstalled pbr-1.10.0\n  Found existing installation: oslo.i18n 3.9.0\n    Uninstalling oslo.i18n-3.9.0:\n      Successfully uninstalled oslo.i18n-3.9.0\n  Found existing installation: oslo.utils 3.16.1\n    Uninstalling oslo.utils-3.16.1:\n      Successfully uninstalled oslo.utils-3.16.1\n  Found existing installation: oslo.serialization 2.13.2\n    Uninstalling oslo.serialization-2.13.2:\n      Successfully uninstalled oslo.serialization-2.13.2\n  Found existing installation: stevedore 1.17.1\n    Uninstalling stevedore-1.17.1:\n      Successfully uninstalled stevedore-1.17.1\n  Found existing installation: chardet 2.2.1\n    Uninstalling chardet-2.2.1:\n      Successfully uninstalled chardet-2.2.1\n  Found existing installation: urllib3 1.16\n    Uninstalling urllib3-1.16:\n      Successfully uninstalled urllib3-1.16\n  Found existing installation: requests 2.11.1\n    Uninstalling requests-2.11.1:\n      Successfully uninstalled requests-2.11.1\n  Found existing installation: keystoneauth1 2.12.2\n    Uninstalling keystoneauth1-2.12.2:\n      Successfully uninstalled keystoneauth1-2.12.2\n  Found existing installation: PyYAML 3.10\n    Uninstalling PyYAML-3.10:\n      Successfully uninstalled PyYAML-3.10\n  Running setup.py install for PyYAML: started\n    Running setup.py install for PyYAML: finished with status 'done'\n  Found existing installation: oslo.config 3.17.1\n    Uninstalling oslo.config-3.17.1:\n      Successfully uninstalled oslo.config-3.17.1\nSuccessfully installed PyYAML-3.12 certifi-2018.4.16 chardet-3.0.4 keystoneauth1-3.5.0 msgpack-0.5.6 oslo.config-6.2.0 oslo.i18n-3.20.0 oslo.serialization-2.25.0 oslo.utils-3.36.1 pbr-4.0.2 python-keystoneclient-3.16.0 requests-2.18.4 stevedore-1.28.0 urllib3-1.22", 
    "stdout_lines": [
        "Collecting python-keystoneclient", 
        "  Downloading https://files.pythonhosted.org/packages/f5/26/c21d9632e6892dfc23b5315e0221dba8b05b62d15d7488489a4b3953e854/python_keystoneclient-3.16.0-py2.py3-none-any.whl (376kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): debtcollector>=1.2.0 in /usr/lib/python2.7/site-packages (from python-keystoneclient)", 
        "Collecting pbr!=2.1.0,>=2.0.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/e1/ba/f95e3ec83f93919b1437028e989cf3fa5ff4f5cae4a1f62255f71deddb5b/pbr-4.0.2-py2.py3-none-any.whl (98kB)", 
        "Collecting oslo.serialization!=2.19.1,>=2.18.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/ca/c8/eb2fcb6cc97ac0e652a304855db37a0e433c2a217f9445e58ca67084075b/oslo.serialization-2.25.0-py2.py3-none-any.whl", 
        "Requirement already satisfied (use --upgrade to upgrade): six>=1.10.0 in /usr/lib/python2.7/site-packages (from python-keystoneclient)", 
        "Collecting oslo.i18n>=3.15.3 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/41/19/6bdc09c5548fae467f00120812256c27a253fa29d07020ecf725d3a247cb/oslo.i18n-3.20.0-py2.py3-none-any.whl (42kB)", 
        "Collecting stevedore>=1.20.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/17/6b/3b7d6d08b2ab3e5ef09e01c9f7b3b590ee135f289bb94553419e40922c25/stevedore-1.28.0-py2.py3-none-any.whl", 
        "Collecting requests>=2.14.2 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/49/df/50aa1999ab9bde74656c2919d9c0c085fd2b3775fd3eca826012bef76d8c/requests-2.18.4-py2.py3-none-any.whl (88kB)", 
        "Collecting keystoneauth1>=3.4.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/46/e5/f78bf0af7833ab6e326342de9c3fe62deae07b792f4c6525dd41b7743ee2/keystoneauth1-3.5.0-py2.py3-none-any.whl (282kB)", 
        "Collecting oslo.utils>=3.33.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/af/55/3352c9b93b0fcba4e77c3c16ad55311b5a0dec958f5ac3c1803f1fe15703/oslo.utils-3.36.1-py2.py3-none-any.whl (91kB)", 
        "Collecting oslo.config>=5.2.0 (from python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/03/31/80ffdd71158f80535641f835e9c340b3070019328132db265d3b497c5bff/oslo.config-6.2.0-py2.py3-none-any.whl (111kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): pytz>=2013.6 in /usr/lib/python2.7/site-packages (from oslo.serialization!=2.19.1,>=2.18.0->python-keystoneclient)", 
        "Collecting msgpack>=0.4.0 (from oslo.serialization!=2.19.1,>=2.18.0->python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/ff/0d/536fd0b2808dfbc67de46168dc706b5c9f9a1f5a803d96b8bc562a6d96c2/msgpack-0.5.6-cp27-cp27mu-manylinux1_x86_64.whl (295kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): Babel!=2.4.0,>=2.3.4 in /usr/lib/python2.7/site-packages (from oslo.i18n>=3.15.3->python-keystoneclient)", 
        "Collecting certifi>=2017.4.17 (from requests>=2.14.2->python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/7c/e6/92ad559b7192d846975fc916b65f667c7b8c3a32bea7372340bfe9a15fa5/certifi-2018.4.16-py2.py3-none-any.whl (150kB)", 
        "Collecting chardet<3.1.0,>=3.0.2 (from requests>=2.14.2->python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl (133kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): idna<2.7,>=2.5 in /usr/lib/python2.7/site-packages (from requests>=2.14.2->python-keystoneclient)", 
        "Collecting urllib3<1.23,>=1.21.1 (from requests>=2.14.2->python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/63/cb/6965947c13a94236f6d4b8223e21beb4d576dc72e8130bd7880f600839b8/urllib3-1.22-py2.py3-none-any.whl (132kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): iso8601>=0.1.11 in /usr/lib/python2.7/site-packages (from keystoneauth1>=3.4.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): pyparsing>=2.1.0 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): funcsigs>=1.0.0; python_version == \"2.7\" or python_version == \"2.6\" in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): netifaces>=0.10.4 in /usr/lib64/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): netaddr>=0.7.18 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): monotonic>=0.6 in /usr/lib/python2.7/site-packages (from oslo.utils>=3.33.0->python-keystoneclient)", 
        "Requirement already satisfied (use --upgrade to upgrade): enum34>=1.0.4; python_version == \"2.7\" or python_version == \"2.6\" or python_version == \"3.3\" in /usr/lib/python2.7/site-packages (from oslo.config>=5.2.0->python-keystoneclient)", 
        "Collecting PyYAML>=3.12 (from oslo.config>=5.2.0->python-keystoneclient)", 
        "  Downloading https://files.pythonhosted.org/packages/4a/85/db5a2df477072b2902b0eb892feb37d88ac635d36245a72a6a69b23b383a/PyYAML-3.12.tar.gz (253kB)", 
        "Requirement already satisfied (use --upgrade to upgrade): rfc3986>=0.3.1 in /usr/lib/python2.7/site-packages (from oslo.config>=5.2.0->python-keystoneclient)", 
        "Installing collected packages: pbr, oslo.i18n, oslo.utils, msgpack, oslo.serialization, stevedore, certifi, chardet, urllib3, requests, keystoneauth1, PyYAML, oslo.config, python-keystoneclient", 
        "  Found existing installation: pbr 1.10.0", 
        "    Uninstalling pbr-1.10.0:", 
        "      Successfully uninstalled pbr-1.10.0", 
        "  Found existing installation: oslo.i18n 3.9.0", 
        "    Uninstalling oslo.i18n-3.9.0:", 
        "      Successfully uninstalled oslo.i18n-3.9.0", 
        "  Found existing installation: oslo.utils 3.16.1", 
        "    Uninstalling oslo.utils-3.16.1:", 
        "      Successfully uninstalled oslo.utils-3.16.1", 
        "  Found existing installation: oslo.serialization 2.13.2", 
        "    Uninstalling oslo.serialization-2.13.2:", 
        "      Successfully uninstalled oslo.serialization-2.13.2", 
        "  Found existing installation: stevedore 1.17.1", 
        "    Uninstalling stevedore-1.17.1:", 
        "      Successfully uninstalled stevedore-1.17.1", 
        "  Found existing installation: chardet 2.2.1", 
        "    Uninstalling chardet-2.2.1:", 
        "      Successfully uninstalled chardet-2.2.1", 
        "  Found existing installation: urllib3 1.16", 
        "    Uninstalling urllib3-1.16:", 
        "      Successfully uninstalled urllib3-1.16", 
        "  Found existing installation: requests 2.11.1", 
        "    Uninstalling requests-2.11.1:", 
        "      Successfully uninstalled requests-2.11.1", 
        "  Found existing installation: keystoneauth1 2.12.2", 
        "    Uninstalling keystoneauth1-2.12.2:", 
        "      Successfully uninstalled keystoneauth1-2.12.2", 
        "  Found existing installation: PyYAML 3.10", 
        "    Uninstalling PyYAML-3.10:", 
        "      Successfully uninstalled PyYAML-3.10", 
        "  Running setup.py install for PyYAML: started", 
        "    Running setup.py install for PyYAML: finished with status 'done'", 
        "  Found existing installation: oslo.config 3.17.1", 
        "    Uninstalling oslo.config-3.17.1:", 
        "      Successfully uninstalled oslo.config-3.17.1", 
        "Successfully installed PyYAML-3.12 certifi-2018.4.16 chardet-3.0.4 keystoneauth1-3.5.0 msgpack-0.5.6 oslo.config-6.2.0 oslo.i18n-3.20.0 oslo.serialization-2.25.0 oslo.utils-3.36.1 pbr-4.0.2 python-keystoneclient-3.16.0 requests-2.18.4 stevedore-1.28.0 urllib3-1.22"
    ]
}
2018-05-07 19:07:06,249 p=3530 u=root |  TASK [Identity : Create a service project] *************************************************************************************************
2018-05-07 19:07:06,249 p=3530 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7
2018-05-07 19:07:06,249 p=3530 u=root |  Monday 07 May 2018  19:07:06 +0800 (0:01:34.571)       0:01:37.188 ************ 
2018-05-07 19:07:06,656 p=3530 u=root |  Using module file /root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library/keystone
2018-05-07 19:07:08,363 p=3530 u=root |  fatal: [controller]: FAILED! => {
    "changed": false, 
    "module_stderr": "/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py:179: UserWarning: Using keystoneclient sessions has been deprecated. Please update your software to use keystoneauth1.\n  warnings.warn('Using keystoneclient sessions has been deprecated. '\nTraceback (most recent call last):\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 1469, in <module>\n    main()\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 1463, in main\n    km.command_router()\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 487, in command_router\n    facts = action(variables=action_command['variables'])\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 695, in ensure_project\n    domain = self._get_domain_from_vars(variables_dict)\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 625, in _get_domain_from_vars\n    return self._get_domain(name=domain_name)\n  File \"/tmp/ansible_g8TsmO/ansible_module_keystone.py\", line 632, in _get_domain\n    for entry in self.keystone.domains.list():\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/v3/domains.py\", line 87, in list\n    return super(DomainManager, self).list(**kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 75, in func\n    return f(*args, **new_kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 397, in list\n    self.collection_key)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/base.py\", line 125, in _list\n    resp, body = self.client.get(url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 304, in get\n    return self.request(url, 'GET', **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 463, in request\n    resp = super(LegacyJsonAdapter, self).request(*args, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneauth1/adapter.py\", line 189, in request\n    return self.session.request(url, method, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 364, in request\n    base_url = self.get_endpoint(auth, **endpoint_filter)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 702, in get_endpoint\n    auth = self._auth_required(auth, msg)\n  File \"/usr/lib/python2.7/site-packages/keystoneclient/session.py\", line 639, in _auth_required\n    raise exceptions.MissingAuthPlugin(msg)\nkeystoneauth1.exceptions.auth_plugins.MissingAuthPlugin: An auth plugin is required to determine endpoint URL\n", 
    "module_stdout": "", 
    "msg": "MODULE FAILURE", 
    "rc": 1
}
2018-05-07 19:07:08,368 p=3530 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 19:07:08,368 p=3530 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 19:07:08,368 p=3530 u=root |  controller                 : ok=2    changed=1    unreachable=0    failed=1   
2018-05-07 19:07:08,369 p=3530 u=root |  Monday 07 May 2018  19:07:08 +0800 (0:00:02.119)       0:01:39.307 ************ 
2018-05-07 19:07:08,369 p=3530 u=root |  =============================================================================== 
2018-05-07 19:07:08,369 p=3530 u=root |  Identity : pip install python-keystoneclient --------------------------------------------------------------------------------------- 94.57s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 --------------------------------------------------------
2018-05-07 19:07:08,369 p=3530 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.53s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 --------------------------------------------------------
2018-05-07 19:07:08,369 p=3530 u=root |  Identity : Create a service project ------------------------------------------------------------------------------------------------- 2.12s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7 --------------------------------------------------------
2018-05-07 19:29:54,060 p=3652 u=root |  ansible-playbook 2.5.0
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-07 19:29:54,060 p=3652 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-07 19:29:54,080 p=3652 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-07 19:29:54,213 p=3652 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-07 19:29:54,332 p=3652 u=root |  PLAYBOOK: openstack.yml ********************************************************************************************************************
2018-05-07 19:29:54,333 p=3652 u=root |  1 plays in openstack.yml
2018-05-07 19:29:54,374 p=3652 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 19:29:54,387 p=3652 u=root |  META: ran handlers
2018-05-07 19:29:54,394 p=3652 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 19:29:54,394 p=3652 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-07 19:29:54,394 p=3652 u=root |  Monday 07 May 2018  19:29:54 +0800 (0:00:00.088)       0:00:00.089 ************ 
2018-05-07 19:29:55,911 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:29:56,401 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2018-05-07 19:29:56,736 p=3652 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": "file", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-07 19:29:56,743 p=3652 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 19:29:56,743 p=3652 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-07 19:29:56,743 p=3652 u=root |  Monday 07 May 2018  19:29:56 +0800 (0:00:02.348)       0:00:02.438 ************ 
2018-05-07 19:29:56,927 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:29:57,228 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:29:57,777 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/copy.py
2018-05-07 19:29:58,106 p=3652 u=root |  changed: [controller] => {
    "changed": true, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/etc/profile.d/admin-openrc", 
    "diff": [], 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": false, 
            "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
            "content": null, 
            "delimiter": null, 
            "dest": "/etc/profile.d/admin-openrc", 
            "directory_mode": null, 
            "follow": false, 
            "force": true, 
            "group": null, 
            "local_follow": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "/root/.ansible/tmp/ansible-tmp-1525692596.84-231839302790012/source", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "md5sum": "62fbdb9ec1fe522641c485980a837b26", 
    "mode": "0644", 
    "owner": "root", 
    "size": 232, 
    "src": "/root/.ansible/tmp/ansible-tmp-1525692596.84-231839302790012/source", 
    "state": "file", 
    "uid": 0
}
2018-05-07 19:29:58,112 p=3652 u=root |  TASK [Identity : reboot] *******************************************************************************************************************
2018-05-07 19:29:58,113 p=3652 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7
2018-05-07 19:29:58,113 p=3652 u=root |  Monday 07 May 2018  19:29:58 +0800 (0:00:01.369)       0:00:03.807 ************ 
2018-05-07 19:29:58,353 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/commands/command.py
2018-05-07 19:29:59,664 p=3652 u=root |  changed: [controller] => {
    "ansible_job_id": "420526031447.32311", 
    "changed": true, 
    "finished": 0, 
    "results_file": "/root/.ansible_async/420526031447.32311", 
    "started": 1
}
2018-05-07 19:29:59,675 p=3652 u=root |  TASK [Identity : wait server back] *********************************************************************************************************
2018-05-07 19:29:59,675 p=3652 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:12
2018-05-07 19:29:59,676 p=3652 u=root |  Monday 07 May 2018  19:29:59 +0800 (0:00:01.562)       0:00:05.370 ************ 
2018-05-07 19:29:59,911 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/utilities/logic/wait_for.py
2018-05-07 19:31:00,099 p=3652 u=root |  ok: [controller -> localhost] => {
    "changed": false, 
    "elapsed": 60, 
    "invocation": {
        "module_args": {
            "active_connection_states": [
                "ESTABLISHED", 
                "FIN_WAIT1", 
                "FIN_WAIT2", 
                "SYN_RECV", 
                "SYN_SENT", 
                "TIME_WAIT"
            ], 
            "connect_timeout": 5, 
            "delay": 60, 
            "exclude_hosts": null, 
            "host": "172.16.52.17", 
            "msg": null, 
            "path": null, 
            "port": 22, 
            "search_regex": null, 
            "sleep": 1, 
            "state": "started", 
            "timeout": 600
        }
    }, 
    "path": null, 
    "port": 22, 
    "search_regex": null, 
    "state": "started"
}
2018-05-07 19:31:00,105 p=3652 u=root |  TASK [Identity : x] ************************************************************************************************************************
2018-05-07 19:31:00,106 p=3652 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:16
2018-05-07 19:31:00,106 p=3652 u=root |  Monday 07 May 2018  19:31:00 +0800 (0:01:00.430)       0:01:05.800 ************ 
2018-05-07 19:31:00,163 p=3652 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/commands/command.py
2018-05-07 19:31:03,702 p=3652 u=root |  fatal: [controller]: FAILED! => {
    "changed": true, 
    "cmd": [
        "openstack", 
        "project", 
        "create", 
        "--domain", 
        "default", 
        "--description", 
        "Service Project", 
        "service"
    ], 
    "delta": "0:00:02.144526", 
    "end": "2018-05-07 19:31:04.297094", 
    "invocation": {
        "module_args": {
            "_raw_params": "openstack project create --domain default --description \"Service Project\" service", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "stdin": null, 
            "warn": true
        }
    }, 
    "msg": "non-zero return code", 
    "rc": 1, 
    "start": "2018-05-07 19:31:02.152568", 
    "stderr": "Missing value auth-url required for auth plugin password", 
    "stderr_lines": [
        "Missing value auth-url required for auth plugin password"
    ], 
    "stdout": "", 
    "stdout_lines": []
}
2018-05-07 19:31:03,705 p=3652 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 19:31:03,706 p=3652 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 19:31:03,706 p=3652 u=root |  controller                 : ok=4    changed=2    unreachable=0    failed=1   
2018-05-07 19:31:03,706 p=3652 u=root |  Monday 07 May 2018  19:31:03 +0800 (0:00:03.600)       0:01:09.400 ************ 
2018-05-07 19:31:03,706 p=3652 u=root |  =============================================================================== 
2018-05-07 19:31:03,707 p=3652 u=root |  Identity : wait server back -------------------------------------------------------------------------------------------------------- 60.43s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:12 -------------------------------------------------------
2018-05-07 19:31:03,707 p=3652 u=root |  Identity : x ------------------------------------------------------------------------------------------------------------------------ 3.60s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:16 -------------------------------------------------------
2018-05-07 19:31:03,707 p=3652 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.35s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 --------------------------------------------------------
2018-05-07 19:31:03,707 p=3652 u=root |  Identity : reboot ------------------------------------------------------------------------------------------------------------------- 1.56s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:7 --------------------------------------------------------
2018-05-07 19:31:03,707 p=3652 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 1.37s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 --------------------------------------------------------
2018-05-07 19:34:48,607 p=3746 u=root |  ansible-playbook 2.5.0
  config file = /root/openstack/openstack-ansible/playbooks/ansible.cfg
  configured module search path = [u'/usr/share/my_modules', u'/root/openstack/openstack-ansible/playbooks/library/openstack-ansible-plugins/library']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Aug  4 2017, 00:39:18) [GCC 4.8.5 20150623 (Red Hat 4.8.5-16)]
2018-05-07 19:34:48,608 p=3746 u=root |  Using /root/openstack/openstack-ansible/playbooks/ansible.cfg as config file
2018-05-07 19:34:48,628 p=3746 u=root |  Parsed /root/openstack/openstack-ansible/playbooks/inventory/hosts inventory source with ini plugin
2018-05-07 19:34:48,761 p=3746 u=root |  statically imported: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml
2018-05-07 19:34:48,875 p=3746 u=root |  PLAYBOOK: openstack.yml ********************************************************************************************************************
2018-05-07 19:34:48,876 p=3746 u=root |  1 plays in openstack.yml
2018-05-07 19:34:48,916 p=3746 u=root |  PLAY [install openstack] *******************************************************************************************************************
2018-05-07 19:34:48,929 p=3746 u=root |  META: ran handlers
2018-05-07 19:34:48,936 p=3746 u=root |  TASK [Identity : copy file] ****************************************************************************************************************
2018-05-07 19:34:48,936 p=3746 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1
2018-05-07 19:34:48,936 p=3746 u=root |  Monday 07 May 2018  19:34:48 +0800 (0:00:00.087)       0:00:00.087 ************ 
2018-05-07 19:34:50,382 p=3746 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2018-05-07 19:34:50,862 p=3746 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2018-05-07 19:34:51,200 p=3746 u=root |  ok: [controller] => {
    "changed": false, 
    "checksum": "ffabb3c65eadaa453e197f3e1991ebd0b1d4f6d8", 
    "dest": "/root/admin-openrc", 
    "diff": {
        "after": {
            "path": "/root/admin-openrc"
        }, 
        "before": {
            "path": "/root/admin-openrc"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "dest": "/root/admin-openrc", 
            "diff_peek": null, 
            "directory_mode": null, 
            "follow": false, 
            "force": false, 
            "group": null, 
            "mode": null, 
            "original_basename": "admin-openrc", 
            "owner": null, 
            "path": "/root/admin-openrc", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "admin-openrc", 
            "state": "file", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "mode": "0644", 
    "owner": "root", 
    "path": "/root/admin-openrc", 
    "size": 232, 
    "state": "file", 
    "uid": 0
}
2018-05-07 19:34:51,207 p=3746 u=root |  TASK [Identity : x] ************************************************************************************************************************
2018-05-07 19:34:51,207 p=3746 u=root |  task path: /root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4
2018-05-07 19:34:51,207 p=3746 u=root |  Monday 07 May 2018  19:34:51 +0800 (0:00:02.271)       0:00:02.359 ************ 
2018-05-07 19:34:51,449 p=3746 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/commands/command.py
2018-05-07 19:34:53,856 p=3746 u=root |  fatal: [controller]: FAILED! => {
    "changed": true, 
    "cmd": [
        "openstack", 
        "project", 
        "create", 
        "--domain", 
        "default", 
        "--description", 
        "Service Project", 
        "service"
    ], 
    "delta": "0:00:02.103442", 
    "end": "2018-05-07 19:34:55.443324", 
    "invocation": {
        "module_args": {
            "_raw_params": "openstack project create --domain default --description \"Service Project\" service", 
            "_uses_shell": false, 
            "chdir": null, 
            "creates": null, 
            "executable": null, 
            "removes": null, 
            "stdin": null, 
            "warn": true
        }
    }, 
    "msg": "non-zero return code", 
    "rc": 1, 
    "start": "2018-05-07 19:34:53.339882", 
    "stderr": "Missing value auth-url required for auth plugin password", 
    "stderr_lines": [
        "Missing value auth-url required for auth plugin password"
    ], 
    "stdout": "", 
    "stdout_lines": []
}
2018-05-07 19:34:53,861 p=3746 u=root |  	to retry, use: --limit @/root/openstack/openstack-ansible/playbooks/openstack.retry

2018-05-07 19:34:53,861 p=3746 u=root |  PLAY RECAP *********************************************************************************************************************************
2018-05-07 19:34:53,862 p=3746 u=root |  controller                 : ok=1    changed=0    unreachable=0    failed=1   
2018-05-07 19:34:53,862 p=3746 u=root |  Monday 07 May 2018  19:34:53 +0800 (0:00:02.654)       0:00:05.013 ************ 
2018-05-07 19:34:53,862 p=3746 u=root |  =============================================================================== 
2018-05-07 19:34:53,863 p=3746 u=root |  Identity : x ------------------------------------------------------------------------------------------------------------------------ 2.66s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:4 --------------------------------------------------------
2018-05-07 19:34:53,863 p=3746 u=root |  Identity : copy file ---------------------------------------------------------------------------------------------------------------- 2.27s
/root/openstack/openstack-ansible/playbooks/roles/Identity/tasks/create_user.yml:1 --------------------------------------------------------
